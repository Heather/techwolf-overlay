From: Robin Cornelius <robin.cornelius@gmail.com>
Subject: [PATCH] topic/features/jira-backported/avatar_list

Dale Glass's avatar scanner as published on JIRA and rebased by Carjay

Signed-off-by: Robin Cornelius <robin.cornelius@gmail.com>

---
 indra/llaudio/audioengine.h                        |    1 +
 indra/llmessage/llmessagetemplate.h                |  111 +-
 indra/llmessage/message.cpp                        |   28 +-
 indra/llmessage/message.h                          |   18 +-
 indra/llui/llscrolllistctrl.cpp                    |   40 +
 indra/llui/llscrolllistctrl.h                      |    2 +
 indra/newview/CMakeLists.txt                       |    3 +
 indra/newview/app_settings/settings.xml            |   16 +
 indra/newview/llagent.cpp                          |  123 +-
 indra/newview/llagent.h                            |   16 +-
 indra/newview/llappviewer.cpp                      |    4 +
 indra/newview/llchatbar.cpp                        |   34 +-
 indra/newview/llfloateravatarlist.cpp              | 2190 +++++++++
 indra/newview/llfloateravatarlist.h                |  868 ++++
 indra/newview/llfloaterpreference.cpp              |    7 +
 indra/newview/llfloaterpreference.h                |    2 +
 indra/newview/llfloaterreporter.cpp                |   13 +-
 indra/newview/llfloaterreporter.h                  |    2 +-
 indra/newview/llpaneldatabase.cpp                  |  149 +
 indra/newview/llpaneldatabase.h                    |   65 +
 indra/newview/llstartup.cpp                        |    2 +-
 indra/newview/lltoolbar.cpp                        |    9 +
 indra/newview/lltoolbar.h                          |    1 +
 indra/newview/llviewermenu.cpp                     |   14 +
 indra/newview/llviewermessage.cpp                  |    3 +
 indra/newview/llviewerobject.h                     |    3 +-
 indra/newview/llviewerwindow.cpp                   |    8 +-
 indra/newview/llwebbrowserctrl.h                   |    2 +
 indra/newview/pipeline.cpp                         |   44 +-
 indra/newview/skins/default/xui/en-us/alerts.xml   | 5103 ++++++++++++++++++++
 .../default/xui/en-us/floater_avatar_scanner.xml   |  413 ++
 .../skins/default/xui/en-us/menu_viewer.xml        |   13 +
 indra/newview/skins/default/xui/en-us/notify.xml   | 1071 ++++
 .../xui/en-us/panel_preferences_database.xml       |  166 +
 .../skins/default/xui/en-us/panel_toolbar.xml      |    7 +
 35 files changed, 10486 insertions(+), 65 deletions(-)

diff --git a/indra/llaudio/audioengine.h b/indra/llaudio/audioengine.h
index 76f1f95..12a1764 100644
--- a/indra/llaudio/audioengine.h
+++ b/indra/llaudio/audioengine.h
@@ -314,6 +314,7 @@ public:
 	bool setupChannel();
 	bool play(const LLUUID &audio_id);	// Start the audio source playing
 
+	const LLUUID &getOwnerID()		{ return mOwnerID; }
 	bool hasPendingPreloads() const;	// Has preloads that haven't been done yet
 
 	friend class LLAudioEngine;
diff --git a/indra/llmessage/llmessagetemplate.h b/indra/llmessage/llmessagetemplate.h
index d7f02eb..9a02cc0 100644
--- a/indra/llmessage/llmessagetemplate.h
+++ b/indra/llmessage/llmessagetemplate.h
@@ -36,7 +36,11 @@
 #include "lldarray.h"
 #include "message.h" // TODO: babbage: Remove...
 #include "llstat.h"
+#include "llmsgvariabletype.h"
 #include "llstl.h"
+#include <list>
+#include <algorithm>
+#include <functional>
 
 class LLMsgVarData
 {
@@ -271,6 +275,30 @@ enum EMsgDeprecation
 	MD_DEPRECATED
 };
 
+class LLMessageTemplateHandlerEntry
+{
+public:
+	LLMessageTemplateHandlerEntry(message_handler_func_t handler, void **userdata = NULL) :
+		mHandlerFunc(handler), mUserData(userdata) {}
+
+	void call(LLMessageSystem *msgsystem) const { mHandlerFunc(msgsystem, mUserData); }
+
+	bool operator==(const LLMessageTemplateHandlerEntry&a) { return mHandlerFunc == a.mHandlerFunc; }
+private:
+	// message handler function (this is set by each application)
+	message_handler_func_t mHandlerFunc;
+	void **mUserData;	
+};
+
+class callHandler : public std::unary_function<LLMessageTemplateHandlerEntry, void>
+{
+public:
+	callHandler(LLMessageSystem *msg) : mMsg(msg) {}
+	void operator()(const LLMessageTemplateHandlerEntry& a) const { a.call(mMsg); }
+private:
+	LLMessageSystem *mMsg;
+};
+
 class LLMessageTemplate
 {
 public:
@@ -292,9 +320,7 @@ public:
 		mTotalDecodeTime(0.f),
 		mMaxDecodeTimePerMsg(0.f),
 		mBanFromTrusted(false),
-		mBanFromUntrusted(false),
-		mHandlerFunc(NULL), 
-		mUserData(NULL)
+		mBanFromUntrusted(false)
 	{ 
 		mName = LLMessageStringTable::getInstance()->getString(name);
 	}
@@ -362,21 +388,84 @@ public:
 		return mDeprecation;
 	}
 	
-	void setHandlerFunc(void (*handler_func)(LLMessageSystem *msgsystem, void **user_data), void **user_data)
+	/**
+	 * @brief Adds a handler
+	 * This function adds a new handler to be called when the message arrives.
+	 * Repeated additions of the same handler function will be ignored.
+	 * @note delHandlerFunc() must be called to remove the registration
+	 * @param handler Function to call
+	 * @param user_data User specified data to pass to the function
+	 */
+	void addHandlerFunc(message_handler_func_t handler, void **user_data)	
+	{
+		LLMessageTemplateHandlerEntry h(handler, user_data);
+
+		if ( std::find(mHandlers.begin(), mHandlers.end(), h ) != mHandlers.end() )
+		{
+			return;
+		}
+
+		mHandlers.push_back( h );
+	}
+
+	/**
+	 * @brief Sets a handler
+	 * This function sets a handler to be called when the message arrives.
+	 * Any existing handlers are unregistered.
+	 * @note delHandlerFunc() must be called to remove the registration
+	 * @param handler Function to call
+	 * @param user_data User specified data to pass to the function
+	 */
+	void setHandlerFunc(message_handler_func_t handler, void **user_data)
+	{
+		mHandlers.clear();
+		if( handler )
+		{
+			addHandlerFunc(handler, user_data);
+		}
+		else
+		{
+			llwarns << "code has reset handler for \"" << mName << "\" by setting it to NULL." << llendl;
+		}
+	}
+
+	/**
+	 * @brief Removes a handler
+	 * Removes a handler from the list of handlers.
+	 * Attempts to remove handlers that aren't in the list are silently
+	 * ignored.
+	 * @param handler Function to remove
+	 */
+	void delHandlerFunc(message_handler_func_t handler)
 	{
-		mHandlerFunc = handler_func;
-		mUserData = user_data;
+		mHandlers.remove( LLMessageTemplateHandlerEntry(handler) );
 	}
 
 	BOOL callHandlerFunc(LLMessageSystem *msgsystem) const
 	{
-		if (mHandlerFunc)
+		if ( mHandlers.empty() )
+		{
+			return FALSE;
+		}
+		/* 
+		 * Be on the safe side and use for_each only when necessary. There is Linden code ("ReplyPayPrice") that
+		 * does not take the multiple reply handlers into account and simply tries to unregister
+		 * by setting the handler function to 0, unfortunately from within the reply handler so in this case
+		 * the for_each iterator inside std_algo.h is invalidated leading to a crash if the memory is reused
+		 * in between.
+		 */
+		else if( mHandlers.size() == 1 )
 		{
             LLPerfBlock msg_cb_time("msg_cb", mName);
-			mHandlerFunc(msgsystem, mUserData);
+			mHandlers.begin()->call(msgsystem);
+			return TRUE;
+		}
+		else
+		{
+            LLPerfBlock msg_cb_time("msg_cb", mName);
+			std::for_each(mHandlers.begin(), mHandlers.end(), callHandler(msgsystem));
 			return TRUE;
 		}
-		return FALSE;
 	}
 
 	bool isUdpBanned() const
@@ -421,9 +510,7 @@ public:
 	bool									mBanFromUntrusted;
 
 private:
-	// message handler function (this is set by each application)
-	void									(*mHandlerFunc)(LLMessageSystem *msgsystem, void **user_data);
-	void									**mUserData;
+	std::list<LLMessageTemplateHandlerEntry> mHandlers;
 };
 
 #endif // LL_LLMESSAGETEMPLATE_H
diff --git a/indra/llmessage/message.cpp b/indra/llmessage/message.cpp
index 78af35b..b60f034 100644
--- a/indra/llmessage/message.cpp
+++ b/indra/llmessage/message.cpp
@@ -2975,7 +2975,7 @@ void LLMessageSystem::addTemplate(LLMessageTemplate *templatep)
 }
 
 
-void LLMessageSystem::setHandlerFuncFast(const char *name, void (*handler_func)(LLMessageSystem *msgsystem, void **user_data), void **user_data)
+void LLMessageSystem::setHandlerFuncFast(const char *name, message_handler_func_t handler_func, void **user_data)
 {
 	LLMessageTemplate* msgtemplate = get_ptr_in_map(mMessageTemplates, name);
 	if (msgtemplate)
@@ -2988,6 +2988,32 @@ void LLMessageSystem::setHandlerFuncFast(const char *name, void (*handler_func)(
 	}
 }
 
+void LLMessageSystem::addHandlerFuncFast(const char *name, message_handler_func_t handler_func, void **user_data)
+{
+	LLMessageTemplate* msgtemplate = get_ptr_in_map(mMessageTemplates, name);
+	if (msgtemplate)
+	{
+		msgtemplate->addHandlerFunc(handler_func, user_data);
+	}
+	else
+	{
+		llerrs << name << " is not a known message name!" << llendl;
+	}
+}
+
+void LLMessageSystem::delHandlerFuncFast(const char *name, message_handler_func_t handler_func)
+{
+	LLMessageTemplate* msgtemplate = get_ptr_in_map(mMessageTemplates, name);
+	if (msgtemplate)
+	{
+		msgtemplate->delHandlerFunc(handler_func);
+	}
+	else
+	{
+		llerrs << name << " is not a known message name!" << llendl;
+	}
+}
+
 bool LLMessageSystem::callHandler(const char *name,
 		bool trustedSource, LLMessageSystem* msg)
 {
diff --git a/indra/llmessage/message.h b/indra/llmessage/message.h
index b25b27e..2f875e2 100644
--- a/indra/llmessage/message.h
+++ b/indra/llmessage/message.h
@@ -183,7 +183,7 @@ enum EMessageException
 	MX_WROTE_PAST_BUFFER_SIZE // wrote past buffer size in zero code expand
 };
 typedef void (*msg_exception_callback)(LLMessageSystem*,void*,EMessageException);
-
+typedef void (*message_handler_func_t)(LLMessageSystem *msgsystem, void **user_data);
 
 // message data pieces are used to collect the data called for by the message template
 class LLMsgData;
@@ -307,12 +307,24 @@ public:
 
 
 	// methods for building, sending, receiving, and handling messages
-	void	setHandlerFuncFast(const char *name, void (*handler_func)(LLMessageSystem *msgsystem, void **user_data), void **user_data = NULL);
-	void	setHandlerFunc(const char *name, void (*handler_func)(LLMessageSystem *msgsystem, void **user_data), void **user_data = NULL)
+	void	setHandlerFuncFast(const char *name, message_handler_func_t, void **user_data = NULL);
+	void	setHandlerFunc(const char *name, message_handler_func_t handler_func, void **user_data = NULL)
 	{
 		setHandlerFuncFast(LLMessageStringTable::getInstance()->getString(name), handler_func, user_data);
 	}
 
+	void	addHandlerFuncFast(const char *name, message_handler_func_t, void **user_data = NULL);
+	void	addHandlerFunc(const char *name, message_handler_func_t handler_func, void **user_data = NULL)
+	{
+		addHandlerFuncFast(LLMessageStringTable::getInstance()->getString(name), handler_func, user_data);
+	}
+
+	void	delHandlerFuncFast(const char *name, message_handler_func_t);
+	void	delHandlerFunc(const char *name, message_handler_func_t handler_func)
+	{
+		delHandlerFuncFast(LLMessageStringTable::getInstance()->getString(name), handler_func);
+	}
+
 	// Set a callback function for a message system exception.
 	void setExceptionFunc(EMessageException exception, msg_exception_callback func, void* data = NULL);
 	// Call the specified exception func, and return TRUE if a
diff --git a/indra/llui/llscrolllistctrl.cpp b/indra/llui/llscrolllistctrl.cpp
index 7b6c125..dc12511 100644
--- a/indra/llui/llscrolllistctrl.cpp
+++ b/indra/llui/llscrolllistctrl.cpp
@@ -743,6 +743,29 @@ std::vector<LLScrollListItem*> LLScrollListCtrl::getAllSelected() const
 	return ret;
 }
 
+/**
+ * Returns the selected IDs
+ * @returns List of selected IDs
+ * @author Dale Glass
+ */
+LLDynamicArray<LLUUID> LLScrollListCtrl::getSelectedIDs()
+{
+	LLUUID selected_id;
+	LLDynamicArray<LLUUID> ret;
+
+	item_list::const_iterator iter;
+	for(iter = mItemList.begin(); iter != mItemList.end(); iter++)
+	{
+		LLScrollListItem* item  = *iter;
+		if (item->getSelected())
+		{
+			ret.push_back(item->getUUID());
+		}
+	}
+	return ret;
+}
+
+
 S32 LLScrollListCtrl::getFirstSelectedIndex() const
 {
 	S32 CurSelectedIndex = 0;
@@ -2581,6 +2604,23 @@ void LLScrollListCtrl::onScrollChange( S32 new_pos, LLScrollbar* scrollbar, void
 }
 
 
+/**
+ * Re-sorts the list
+ *
+ * This function allows to avoid multiple unnecessary sorts in the case where
+ * multiple elements will be added or removed at once.
+ * @author Dale Glass
+ */
+void LLScrollListCtrl::sort()
+{
+	// sort by column 0, in ascending order
+	std::stable_sort(
+		mItemList.begin(), 
+		mItemList.end(), 
+		SortScrollListItem(mSortColumns));
+}
+
+
 void LLScrollListCtrl::sortByColumn(const std::string& name, BOOL ascending)
 {
 	std::map<std::string, LLScrollListColumn>::iterator itor = mColumns.find(name);
diff --git a/indra/llui/llscrolllistctrl.h b/indra/llui/llscrolllistctrl.h
index 72d8894..66298cc 100644
--- a/indra/llui/llscrolllistctrl.h
+++ b/indra/llui/llscrolllistctrl.h
@@ -362,6 +362,7 @@ public:
 	// Sets an array of column descriptors
 	void 	   		setColumnHeadings(LLSD headings);
 	void   			sortByColumnIndex(U32 column, BOOL ascending);
+	void            sort();
 	
 	// LLCtrlListInterface functions
 	virtual S32  getItemCount() const;
@@ -459,6 +460,7 @@ public:
 	virtual S32			getFirstSelectedIndex() const;
 	std::vector<LLScrollListItem*> getAllSelected() const;
 	LLScrollListItem*	getLastSelectedItem() const { return mLastSelected; }
+ 	LLDynamicArray<LLUUID> 	getSelectedIDs();
 
 	// iterate over all items
 	LLScrollListItem*	getFirstData() const;
diff --git a/indra/newview/CMakeLists.txt b/indra/newview/CMakeLists.txt
index 5fe7de3..a350651 100644
--- a/indra/newview/CMakeLists.txt
+++ b/indra/newview/CMakeLists.txt
@@ -127,6 +127,7 @@ set(viewer_SOURCE_FILES
     llfloateranimpreview.cpp
     llfloaterauction.cpp
     llfloateravatarinfo.cpp
+    llfloateravatarlist.cpp
     llfloateravatarpicker.cpp
     llfloateravatartextures.cpp
     llfloaterbeacons.cpp
@@ -256,6 +257,7 @@ set(viewer_SOURCE_FILES
     llpanelaudioprefs.cpp
     llpanelaudiovolume.cpp
     llpanelavatar.cpp
+    llpaneldatabase.cpp
     llpanelclassified.cpp
     llpanelcontents.cpp
     llpaneldebug.cpp
@@ -660,6 +662,7 @@ set(viewer_HEADER_FILES
     llpanelaudioprefs.h
     llpanelaudiovolume.h
     llpanelavatar.h
+    llpaneldatabase.h
     llpanelclassified.h
     llpanelcontents.h
     llpaneldebug.h
diff --git a/indra/newview/app_settings/settings.xml b/indra/newview/app_settings/settings.xml
index 7ae9212..51650dc 100644
--- a/indra/newview/app_settings/settings.xml
+++ b/indra/newview/app_settings/settings.xml
@@ -3458,6 +3458,22 @@
         <integer>0</integer>
       </array>
     </map>
+    <key>FloaterAvatarListRect</key>
+    <map>
+      <key>Comment</key>
+      <string>Rectangle avatar list window</string>
+      <key>Persist</key>
+      <integer>1</integer>
+      <key>Type</key>
+      <string>Rect</string>
+      <key>Value</key>
+      <array>
+        <integer>0</integer>
+        <integer>400</integer>
+        <integer>200</integer>
+        <integer>0</integer>
+      </array>
+    </map>
     <key>FloaterAudioVolumeRect</key>
     <map>
       <key>Comment</key>
diff --git a/indra/newview/llagent.cpp b/indra/newview/llagent.cpp
index c722b89..784c8f0 100644
--- a/indra/newview/llagent.cpp
+++ b/indra/newview/llagent.cpp
@@ -69,6 +69,7 @@
 #include "llfloater.h"
 #include "llfloateractivespeakers.h"
 #include "llfloateravatarinfo.h"
+#include "llfloateravatarlist.h"
 #include "llfloaterbuildoptions.h"
 #include "llfloatercamera.h"
 #include "llfloaterchat.h"
@@ -2740,7 +2741,18 @@ void LLAgent::startTyping()
 	{
 		sendAnimationRequest(ANIM_AGENT_TYPE, ANIM_REQUEST_START);
 	}
-	gChatBar->sendChatFromViewer("", CHAT_TYPE_START, FALSE);
+	sendChat("", 0, CHAT_TYPE_START, false);
+
+	// Addition for avatar list support.
+	// Makes the fact that this avatar is typing appear in the list
+	if ( NULL != gFloaterAvatarList )
+	{
+		LLAvatarListEntry *ent = gFloaterAvatarList->getAvatarEntry(getID());
+		if ( NULL != ent )
+		{
+			ent->setActivity(ACTIVITY_TYPING);
+		}
+	}
 }
 
 //-----------------------------------------------------------------------------
@@ -2752,7 +2764,7 @@ void LLAgent::stopTyping()
 	{
 		clearRenderState(AGENT_STATE_TYPING);
 		sendAnimationRequest(ANIM_AGENT_TYPE, ANIM_REQUEST_STOP);
-		gChatBar->sendChatFromViewer("", CHAT_TYPE_STOP, FALSE);
+		sendChat("", 0, CHAT_TYPE_STOP, false);
 	}
 }
 
@@ -4594,10 +4606,16 @@ void LLAgent::heardChat(const LLUUID& id)
 	mChatTimer.reset();
 }
 
+
+void LLAgent::lookAtLastChat()
+{
+	lookAtObject(mLastChatterID, CAMERA_POSITION_SELF);
+}
+
 //-----------------------------------------------------------------------------
 // lookAtLastChat()
 //-----------------------------------------------------------------------------
-void LLAgent::lookAtLastChat()
+void LLAgent::lookAtObject(LLUUID object_id, ECameraPosition camera_pos)
 {
 	// Block if camera is animating or not in normal third person camera mode
 	if (mCameraAnimating || !cameraThirdPerson())
@@ -4605,7 +4623,7 @@ void LLAgent::lookAtLastChat()
 		return;
 	}
 
-	LLViewerObject *chatter = gObjectList.findObject(mLastChatterID);
+	LLViewerObject *chatter = gObjectList.findObject(object_id);
 	if (chatter)
 	{
 		LLVector3 delta_pos;
@@ -4634,15 +4652,39 @@ void LLAgent::lookAtLastChat()
 			new_camera_pos -= delta_pos * 0.4f;
 			new_camera_pos += left * 0.3f;
 			new_camera_pos += up * 0.2f;
+
+			F32 radius = chatter_av->getVObjRadius();
+			LLVector3d view_dist(radius, radius, 0.0f);
+
 			if (chatter_av->mHeadp)
 			{
-				setFocusGlobal(getPosGlobalFromAgent(chatter_av->mHeadp->getWorldPosition()), mLastChatterID);
+				setFocusGlobal(getPosGlobalFromAgent(chatter_av->mHeadp->getWorldPosition()), object_id);
 				mCameraFocusOffsetTarget = getPosGlobalFromAgent(new_camera_pos) - gAgent.getPosGlobalFromAgent(chatter_av->mHeadp->getWorldPosition());
+
+				switch(camera_pos)
+				{
+					case CAMERA_POSITION_SELF:
+						mCameraFocusOffsetTarget = getPosGlobalFromAgent(new_camera_pos) - gAgent.getPosGlobalFromAgent(chatter_av->mHeadp->getWorldPosition());
+						break;
+					case CAMERA_POSITION_OBJECT:
+						mCameraFocusOffsetTarget =  view_dist;
+						break;
+				}
 			}
 			else
 			{
-				setFocusGlobal(chatter->getPositionGlobal(), mLastChatterID);
+				setFocusGlobal(chatter->getPositionGlobal(), object_id);
 				mCameraFocusOffsetTarget = getPosGlobalFromAgent(new_camera_pos) - chatter->getPositionGlobal();
+
+				switch(camera_pos)
+				{
+					case CAMERA_POSITION_SELF:
+						mCameraFocusOffsetTarget = getPosGlobalFromAgent(new_camera_pos) - chatter->getPositionGlobal();
+						break;
+					case CAMERA_POSITION_OBJECT:
+						mCameraFocusOffsetTarget = view_dist;
+						break;
+				}
 			}
 			setFocusOnAvatar(FALSE, TRUE);
 		}
@@ -4664,8 +4706,20 @@ void LLAgent::lookAtLastChat()
 			new_camera_pos += left * 0.3f;
 			new_camera_pos += up * 0.2f;
 
-			setFocusGlobal(chatter->getPositionGlobal(), mLastChatterID);
-			mCameraFocusOffsetTarget = getPosGlobalFromAgent(new_camera_pos) - chatter->getPositionGlobal();
+			setFocusGlobal(chatter->getPositionGlobal(), object_id);
+
+			switch(camera_pos)
+			{
+				case CAMERA_POSITION_SELF:
+					mCameraFocusOffsetTarget = getPosGlobalFromAgent(new_camera_pos) - chatter->getPositionGlobal();
+					break;
+				case CAMERA_POSITION_OBJECT:
+					F32 radius = chatter->getVObjRadius();
+					LLVector3d view_dist(radius, radius, 0.0f);
+					mCameraFocusOffsetTarget = view_dist;
+					break;
+			}
+
 			setFocusOnAvatar(FALSE, TRUE);
 		}
 	}
@@ -6148,6 +6202,58 @@ void LLAgent::setTeleportState(ETeleportState state)
 	}
 }
 
+
+void LLAgent::sendChat(const std::string &text, S32 channel, EChatType type, bool animate)
+{
+
+	// Don't animate for chats people can't hear (chat to scripts)
+	if (animate && (channel == 0))
+	{
+		if (type == CHAT_TYPE_WHISPER)
+		{
+			lldebugs << "You whisper " << text << llendl;
+			sendAnimationRequest(ANIM_AGENT_WHISPER, ANIM_REQUEST_START);
+		}
+		else if (type == CHAT_TYPE_NORMAL)
+		{
+			lldebugs << "You say " << text << llendl;
+			sendAnimationRequest(ANIM_AGENT_TALK, ANIM_REQUEST_START);
+		}
+		else if (type == CHAT_TYPE_SHOUT)
+		{
+			lldebugs << "You shout " << text << llendl;
+			sendAnimationRequest(ANIM_AGENT_SHOUT, ANIM_REQUEST_START);
+		}
+		else
+		{
+			llinfos << "send_chat_from_viewer() - invalid volume" << llendl;
+			return;
+		}
+	}
+	else
+	{
+		if (type != CHAT_TYPE_START && type != CHAT_TYPE_STOP)
+		{
+			lldebugs << "Channel chat: " << text << llendl;
+		}
+	}
+
+	LLMessageSystem* msg = gMessageSystem;
+
+	msg->newMessageFast(_PREHASH_ChatFromViewer);
+	msg->nextBlockFast(_PREHASH_AgentData);
+	msg->addUUIDFast(_PREHASH_AgentID, getID());
+	msg->addUUIDFast(_PREHASH_SessionID, getSessionID());
+	msg->nextBlockFast(_PREHASH_ChatData);
+	msg->addStringFast(_PREHASH_Message, text);
+	msg->addU8Fast(_PREHASH_Type, type);
+	msg->addS32("Channel", channel);
+
+	gAgent.sendReliableMessage();
+
+	LLViewerStats::getInstance()->incStat(LLViewerStats::ST_CHAT_COUNT);
+}
+
 void LLAgent::stopCurrentAnimations()
 {
 	// This function stops all current overriding animations on this
@@ -6182,6 +6288,7 @@ void LLAgent::stopCurrentAnimations()
 		sendAnimationRequest(ANIM_AGENT_STAND,
 				     ANIM_REQUEST_START);
 	}
+
 }
 
 void LLAgent::fidget()
diff --git a/indra/newview/llagent.h b/indra/newview/llagent.h
index 226c78e..1a35b90 100644
--- a/indra/newview/llagent.h
+++ b/indra/newview/llagent.h
@@ -37,6 +37,7 @@
 
 #include "indra_constants.h"
 #include "llmath.h"
+#include "llchat.h"
 #include "llcontrol.h"
 #include "llcoordframe.h"
 #include "llevent.h"
@@ -82,6 +83,15 @@ typedef enum e_camera_modes
 	CAMERA_MODE_FOLLOW
 } ECameraMode;
 
+/**
+ * @brief When looking at an object, where is the camera offset from
+ */
+typedef enum e_camera_position
+{
+	CAMERA_POSITION_SELF, /** Camera positioned at our position */
+	CAMERA_POSITION_OBJECT /** Camera positioned at observed object's position */
+} ECameraPosition;
+
 typedef enum e_anim_request
 {
 	ANIM_REQUEST_START,
@@ -208,7 +218,8 @@ public:
 
 	void			heardChat(const LLUUID& id);
 	void			lookAtLastChat();
-	F32				getTypingTime() { return mTypingTimer.getElapsedTimeF32(); }
+	void			lookAtObject(LLUUID avatar_id, ECameraPosition camera_pos);
+	F32			getTypingTime() { return mTypingTimer.getElapsedTimeF32(); }
 
 	void			setAFK();
 	void			clearAFK();
@@ -505,6 +516,9 @@ public:
 
 	const std::string getTeleportSourceSLURL() const { return mTeleportSourceSLURL; }
 
+	void sendChat(const std::string &text, S32 channel = 0, EChatType type = CHAT_TYPE_NORMAL, bool animate = false);
+	void sendChat(const std::wstring &text, S32 channel = 0, EChatType type = CHAT_TYPE_NORMAL, bool animate = false)
+		{ sendChat(wstring_to_utf8str(text), channel, type, animate); }
 
 	// Setting the ability for this avatar to proxy for another avatar.
 	//static void processAddModifyAbility(LLMessageSystem* msg, void**);
diff --git a/indra/newview/llappviewer.cpp b/indra/newview/llappviewer.cpp
index 8fc2578..44ae6ff 100644
--- a/indra/newview/llappviewer.cpp
+++ b/indra/newview/llappviewer.cpp
@@ -34,6 +34,7 @@
 #include "llviewerprecompiledheaders.h"
 #include "llappviewer.h"
 #include "llprimitive.h"
+#include "llfloateravatarlist.h"
 
 #include "llversionviewer.h"
 #include "llfeaturemanager.h"
@@ -3249,6 +3250,9 @@ void LLAppViewer::idle()
 		}
 		gFrameStats.addFrameData();
 	}
+
+	// Update avatar list
+	gFloaterAvatarList->updateAvatarList();
 	
 	if (!gDisconnected)
 	{
diff --git a/indra/newview/llchatbar.cpp b/indra/newview/llchatbar.cpp
index 2395f3c..8d57182 100644
--- a/indra/newview/llchatbar.cpp
+++ b/indra/newview/llchatbar.cpp
@@ -588,39 +588,7 @@ void LLChatBar::sendChatFromViewer(const LLWString &wtext, EChatType type, BOOL
 		utf8_text = utf8str_truncate(utf8_text, MAX_STRING - 1);
 	}
 
-	// Don't animate for chats people can't hear (chat to scripts)
-	if (animate && (channel == 0))
-	{
-		if (type == CHAT_TYPE_WHISPER)
-		{
-			lldebugs << "You whisper " << utf8_text << llendl;
-			gAgent.sendAnimationRequest(ANIM_AGENT_WHISPER, ANIM_REQUEST_START);
-		}
-		else if (type == CHAT_TYPE_NORMAL)
-		{
-			lldebugs << "You say " << utf8_text << llendl;
-			gAgent.sendAnimationRequest(ANIM_AGENT_TALK, ANIM_REQUEST_START);
-		}
-		else if (type == CHAT_TYPE_SHOUT)
-		{
-			lldebugs << "You shout " << utf8_text << llendl;
-			gAgent.sendAnimationRequest(ANIM_AGENT_SHOUT, ANIM_REQUEST_START);
-		}
-		else
-		{
-			llinfos << "send_chat_from_viewer() - invalid volume" << llendl;
-			return;
-		}
-	}
-	else
-	{
-		if (type != CHAT_TYPE_START && type != CHAT_TYPE_STOP)
-		{
-			lldebugs << "Channel chat: " << utf8_text << llendl;
-		}
-	}
-
-	send_chat_from_viewer(utf8_out_text, type, channel);
+	gAgent.sendChat(utf8_out_text, channel, type, animate);
 }
 
 void send_chat_from_viewer(const std::string& utf8_out_text, EChatType type, S32 channel)
diff --git a/indra/newview/llfloateravatarlist.cpp b/indra/newview/llfloateravatarlist.cpp
new file mode 100644
index 0000000..0c1281b
--- /dev/null
+++ b/indra/newview/llfloateravatarlist.cpp
@@ -0,0 +1,2190 @@
+/** 
+ * @file llfloatermute.cpp
+ * @brief Container for mute list
+ *
+ * @author Dale Glass <dale@daleglass.net>, (C) 2007
+ */
+
+#include "llviewerprecompiledheaders.h" // must be first include
+
+#include "llavatarconstants.h"
+#include "llfloateravatarlist.h"
+
+#include "lluictrlfactory.h" // builds floaters from XML
+#include "llviewerwindow.h"
+#include "llscrolllistctrl.h"
+
+#include "llvoavatar.h"
+#include "llimview.h"
+#include "llfloateravatarinfo.h"
+#include "llregionflags.h"
+#include "llfloaterreporter.h"
+#include "llagent.h"
+#include "llviewerregion.h"
+#include "lltracker.h"
+#include "llviewercontrol.h"
+#include "llviewerstats.h"
+#include "llerror.h"
+#include "llchat.h"
+#include "llviewermessage.h"
+#include "llweb.h"
+#include "llviewerobjectlist.h"
+#include "llmutelist.h"
+#include "llviewerimagelist.h"
+#include "llworld.h"
+#include "llcachename.h"
+#include "llviewercamera.h"
+
+#include <time.h>
+#include <string.h>
+
+#include <map>
+
+
+// Timeouts
+/**
+ * @brief How long to keep showing an activity, in seconds
+ */
+const F32 ACTIVITY_TIMEOUT = 1.0f;
+
+
+/**
+ * @brief How many seconds to wait between data requests
+ *
+ * This is intended to avoid flooding the server with requests
+ */
+const F32 MIN_REQUEST_INTERVAL   = 1.0f;
+
+/**
+ * @brief How long to wait for a request to arrive during the first try in seconds
+ */
+const F32 FIRST_REQUEST_TIMEOUT  = 16.0f;
+
+/**
+ * @brief Delay is doubled on each attempt. This is as high as it'll go
+ */
+const F32 MAX_REQUEST_TIMEOUT    = 2048.0f;
+ 
+/**
+ * How long to wait for a request to arrive before assuming failure
+ * and showing the failure icon in the list. This is just for the user's
+ * information, if a reply arrives after this interval we'll accept it anyway.
+ */
+const F32 REQUEST_FAIL_TIMEOUT   = 15.0f;
+
+/**
+ * How long to keep people who are gone in the list. After this time is reached,
+ * they're not shown in the list anymore, but still kept in memory until
+ * CLEANUP_TIMEOUT is reached.
+ */
+const F32 DEAD_KEEP_TIME = 10.0f;
+
+/**
+ * @brief How long to keep entries around before removing them.
+ *
+ * @note Longer term, data like birth and payment info should be cached on disk.
+ */
+const F32 CLEANUP_TIMEOUT = 3600.0f;
+
+
+/**
+ * @brief TrustNet channel
+ * This is fixed in the adapter script.
+ */
+const S32 TRUSTNET_CHANNEL = 0x44470002;
+
+
+extern U32 gFrameCount;
+
+
+LLAvListTrustNetScore::LLAvListTrustNetScore(std::string type, F32 score)
+{
+	Score = score;
+	Type = type;	
+}
+
+LLAvatarInfo::LLAvatarInfo()
+{
+}
+
+LLAvatarInfo::LLAvatarInfo(PAYMENT_TYPE payment, ACCOUNT_TYPE account, struct tm birth)
+{
+	Payment = payment;
+	Account = account;
+	BirthDate = birth;
+}
+
+S32 LLAvatarInfo::getAge()
+{
+	time_t birth = mktime(&BirthDate);
+	time_t now = time(NULL);
+	return(S32)(difftime(now,birth) / (60*60*24));
+}
+
+void LLAvatarListEntry::setPosition(LLVector3d position)
+{
+	if ( mPosition != position )
+	{
+		setActivity(ACTIVITY_MOVING);
+	}
+
+	mPosition = position;
+	mFrame = gFrameCount;
+	mUpdateTimer.start();
+}
+
+LLVector3d LLAvatarListEntry::getPosition()
+{
+	return mPosition;
+}
+
+U32 LLAvatarListEntry::getEntryAgeFrames()
+{
+	return (gFrameCount - mFrame);
+}
+
+F32 LLAvatarListEntry::getEntryEnteredSeconds()
+{
+	return mEnteredTimer.getElapsedTimeF32();
+}
+
+F32 LLAvatarListEntry::getEntryAgeSeconds()
+{
+	return mUpdateTimer.getElapsedTimeF32();
+}
+
+void LLAvatarListEntry::setName(std::string name)
+{
+	if ( name.empty() || (name.compare(" ") == 0))
+	{
+		llwarns << "Trying to set empty name" << llendl;
+	}
+	mName = name;
+}
+
+std::string LLAvatarListEntry::getName()
+{
+	return mName;
+}
+
+LLUUID LLAvatarListEntry::getID()
+{
+	return mID;
+}
+
+void LLAvatarListEntry::setID(LLUUID id)
+{
+	if ( id.isNull() )
+	{
+		llwarns << "Trying to set null id" << llendl;
+	}
+	mID = id;
+}
+
+BOOL LLAvatarListEntry::getIsLinden()
+{
+	// Are there any employees that are not a Linden?
+	// I suppose this is a bit redundant.
+	return ( mIsLinden || ( mAvatarInfo.getValue().Account == ACCOUNT_EMPLOYEE ) );
+}
+
+void LLAvatarListEntry::setAccountCustomTitle(std::string &title)
+{
+	mAccountTitle = title;
+	mAvatarInfo.getValue().Account = ACCOUNT_CUSTOM;
+}
+
+std::string LLAvatarListEntry::getAccountCustomTitle()
+{
+	return mAccountTitle;
+}
+
+
+
+void LLAvatarListEntry::setActivity(ACTIVITY_TYPE activity)
+{
+	if ( activity >= mActivityType || mActivityTimer.getElapsedTimeF32() > ACTIVITY_TIMEOUT )
+	{
+		mActivityType = activity;
+		mActivityTimer.start();
+	}
+}
+
+ACTIVITY_TYPE LLAvatarListEntry::getActivity()
+{
+	if ( mActivityTimer.getElapsedTimeF32() > ACTIVITY_TIMEOUT )
+	{
+		mActivityType = ACTIVITY_NONE;
+	}
+	
+	return mActivityType;
+}
+
+void LLAvatarListEntry::toggleMark()
+{
+	mMarked = !mMarked;
+}
+
+BOOL LLAvatarListEntry::isMarked()
+{
+	return mMarked;
+}
+
+BOOL LLAvatarListEntry::isDead()
+{
+	return getEntryAgeSeconds() > DEAD_KEEP_TIME;
+}
+
+// Avatar list is global
+LLFloaterAvatarList* gFloaterAvatarList = NULL;
+
+
+
+
+LLFloaterAvatarList::LLFloaterAvatarList() :  LLFloater("avatar list")
+{
+
+	// Default values
+	mTracking = FALSE;
+	mTrackByLocation = FALSE;
+	mARLastFrame = 0;
+
+	// Create interface from XML
+	LLUICtrlFactory::getInstance()->buildFloater(this, "floater_avatar_scanner.xml");
+
+	// Floater starts hidden	
+	setVisible(FALSE);
+
+	// Set callbacks
+	//childSetAction("refresh_btn", onClickRefresh, this);
+	childSetAction("profile_btn", onClickProfile, this);
+	childSetAction("im_btn", onClickIM, this);
+	childSetAction("track_btn", onClickTrack, this);
+	childSetAction("mark_btn", onClickMark, this);
+
+	childSetAction("gowarn_btn", onClickGohomerWarn, this);
+	childSetAction("goeject_btn", onClickGohomerEject, this);
+	childSetAction("goaway_btn", onClickGohomerSendAway, this);
+	childSetAction("gohome_btn", onClickGohomerSendHome, this);
+	childSetAction("gohomeoff_btn", onClickGohomerOff, this);
+	childSetAction("gokey_btn", onClickGohomerSendHomeByKey, this);
+
+	childSetAction("prev_in_list_btn", onClickPrevInList, this);
+	childSetAction("next_in_list_btn", onClickNextInList, this);
+	childSetAction("prev_marked_btn", onClickPrevMarked, this);
+	childSetAction("next_marked_btn", onClickNextMarked, this);
+	
+	childSetAction("get_key_btn", onClickGetKey, this);
+
+	childSetAction("tn_rate_btn", onClickTrustNetRate, this);
+	childSetAction("tn_explain_btn", onClickTrustNetExplain, this);
+	childSetAction("tn_website_btn", onClickTrustNetWebsite, this);
+	childSetAction("tn_password_btn", onClickTrustNetGetPassword, this);
+	childSetAction("tn_renew_btn", onClickTrustNetRenew, this);
+
+	childSetAction("freeze_btn", onClickFreeze, this);
+	childSetAction("eject_btn", onClickEject, this);
+//	childSetAction("ban_btn", onClickBan, this);
+//	childSetAction("unban_btn", onClickUnban, this);
+	childSetAction("mute_btn", onClickMute, this);
+//	childSetAction("unmute_btn", onClickUnmute, this);
+	childSetAction("ar_btn", onClickAR, this);
+	childSetAction("teleport_btn", onClickTeleport, this);
+	childSetAction("estate_eject_btn", onClickEjectFromEstate, this);
+
+	setDefaultBtn("refresh_btn");
+
+	// Get a pointer to the scroll list from the interface
+	mAvatarList = getChild<LLScrollListCtrl>("avatar_list");
+
+	mAvatarList->setCallbackUserData(this);
+	mAvatarList->setDoubleClickCallback(onDoubleClick);
+	mAvatarList->sortByColumn("distance", TRUE);
+	mDataRequestTimer.start();
+	refreshAvatarList();
+
+	LLMessageSystem *msg = gMessageSystem;
+	msg->addHandlerFunc("AvatarPropertiesReply", processAvatarPropertiesReply);
+}
+
+LLFloaterAvatarList::~LLFloaterAvatarList()
+{
+	LLMessageSystem *msg = gMessageSystem;
+	if ( msg )
+	{
+		msg->delHandlerFunc("AvatarPropertiesReply", processAvatarPropertiesReply);
+	}
+	std::map< LLUUID, LLPointer< LLHUDObject > >::iterator it = mHudObjectMap.begin();
+	for ( ; it != mHudObjectMap.end(); ++it )
+	{ // clean up list
+		it->second->markDead();
+	}
+
+}
+
+
+void LLFloaterAvatarList::show()
+{
+	// Make sure we make a noise.
+	open();
+}
+
+//static
+void LLFloaterAvatarList::toggle(void*) {
+	if (!gFloaterAvatarList) {
+		llinfos << "No avatar list!" << llendl;
+		return;
+	}
+
+	if (gFloaterAvatarList->getVisible())
+	{
+		gFloaterAvatarList->close();
+	}
+	else
+	{
+		gFloaterAvatarList->show();
+	}
+}
+
+//static
+BOOL LLFloaterAvatarList::visible(void*)
+{
+	return (gFloaterAvatarList && gFloaterAvatarList->getVisible());
+}
+
+void LLFloaterAvatarList::updateFromCoarse()
+{
+	/*
+	 * Walk through remaining list of coarse update avatars in all known regions
+	 * this will not give us an accurate height since it's mod 2048 and least possible
+	 * increment is 4 meter. Coarse Update information is accurate instantly while
+	 * the object list is filled one by one.
+	 *
+	 * This also works for neighbour sims which makes it really handy :)
+	 */
+	
+	// first wipe the list clean from coarse entries
+	std::map<LLUUID, LLAvatarListEntry>::iterator iter;
+	for(iter = mAvatars.begin(); iter != mAvatars.end();)
+	{
+		LLAvatarListEntry entry = iter->second;
+		if ( entry.getIsCoarse() )
+		{
+			mAvatars.erase( iter++ );
+		}
+		else
+		{
+			++iter;
+		}
+	}
+
+	LLWorld::region_list_t regions = LLWorld::getInstance()->getRegionList();
+	LLWorld::region_list_t::const_iterator it = regions.begin();
+	
+	for ( ; it != regions.end(); ++it )
+	{
+		LLViewerRegion const *region = *it;
+		if ( !region )
+		{
+			llwarns << "null region while parsing region list" << llendl;
+			continue;
+		}
+
+		for (int idx = 0; idx < region->mMapAvatarIDs.count(); ++idx)
+		{
+			LLUUID avid = region->mMapAvatarIDs.get( idx );
+
+			if ( avid.isNull() )
+			{
+				continue;
+			}
+
+			// we need to accomodate for avatars that are stuck in the
+			// object list while still accurately received in the coarse
+			// location list
+			U32 modpos = region->mMapAvatars.get( idx );
+			LLVector3 localpos;
+			localpos[0] = (modpos >> 16) & 0xff;
+			localpos[1] = (modpos >>  8) & 0xff;
+			// scale z-position
+			localpos[2] = (modpos        & 0xff) << 2;
+			LLVector3d position = region->getPosGlobalFromRegion( localpos );
+			
+			if ( ( mAvatars.count( avid ) > 0 ) && ( !mAvatars[ avid ].isDead() ) )
+			{
+				// Avatar already in list but could be one of these "perpetual motion" avatars
+				// which would overlay the real coordinates, so we check for the distance disregarding
+				// the z axis
+				LLVector3d coarsepos = position;
+				coarsepos[2]     = 0.0;
+				LLVector3d vopos = mAvatars[ avid ].mPosition;
+				vopos[2]         = 0.0;
+				LLVector3d dist  = coarsepos - vopos;
+				if ( dist.magVecSquared() > ( 50.0 * 50.0 ) )
+				{
+					// Avatar already in list, but position info is
+					// out of sync so use coarse info, we can safely overwrite
+					// the info here since we are called after the VOlist has
+					// already been parsed. The only issue is that this will now
+					// show the avatar as perpetually moving
+					mAvatars[ avid ].setPosition( coarsepos );
+				}
+				// Avatar already in list, active and
+				// close enough to coarse info, so skip
+				continue;
+			}
+
+			// Avatar not there yet, add it
+			std::string name;
+			BOOL isLinden = FALSE;
+			if ( !gCacheName->getFullName( avid, name ) )
+			{
+				continue; // wait for proper name
+			}
+			else
+			{
+				std::string first, last;
+				gCacheName->getName( avid, first, last );
+				if ( last == "Linden" )
+				{
+					isLinden = TRUE;
+				}
+			}
+
+			std::string regionname;
+			if ( gAgent.getRegion() && ( region->getName() != gAgent.getRegion()->getName() ) )
+			{
+				regionname = region->getName();
+			}
+
+			// add as coarse info
+			LLAvatarListEntry entry(avid, name, position, isLinden, TRUE, regionname);
+			mAvatars[avid] = entry;
+
+			//llinfos << "avatar list refresh from coarse: adding " << name << llendl;
+
+		}
+	}
+}
+
+
+void LLFloaterAvatarList::purgeAvatarHUDMap()
+{
+	std::map< LLUUID, LLPointer< LLHUDObject > >::iterator huditer = mHudObjectMap.begin();
+	while ( huditer != mHudObjectMap.end() )
+	{
+		if ( mAvatars.count( huditer->first ) == 0 )
+		{
+			huditer->second->markDead();
+			mHudObjectMap.erase( huditer++ );
+		}
+		else
+		{
+			++huditer;
+		}
+	}
+}
+
+
+void LLFloaterAvatarList::updateAvatarList()
+{
+//	LLVOAvatar *avatarp;
+
+	//llinfos << "avatar list refresh: updating map" << llendl;
+
+	// Check whether updates are enabled
+	LLCheckboxCtrl* check;
+	check = getChild<LLCheckBoxCtrl>("update_enabled_cb");
+
+	if ( !check->getValue() )
+	{
+		return;
+	}
+
+	
+	/*
+	 * Iterate over all the avatars known at the time
+	 * NOTE: Is this the right way to do that? It does appear that LLVOAvatar::isInstances contains
+	 * the list of avatars known to the client. This seems to do the task of tracking avatars without
+	 * any additional requests.
+	 *
+	 * BUG: It looks like avatars sometimes get stuck in this list, and keep perpetually
+	 * moving in the same direction. My current guess is that somewhere else the client
+	 * doesn't notice an avatar disappeared, and keeps updating its position. This should
+	 * be solved at the source of the problem.
+	 */
+	for (std::vector<LLCharacter*>::iterator iter = LLCharacter::sInstances.begin();
+		iter != LLCharacter::sInstances.end(); ++iter)
+	{
+		LLVOAvatar* avatarp = (LLVOAvatar*) *iter;
+
+		// Skip if avatar is dead(what's that?)
+		// or if the avatar is ourselves.
+		if (avatarp->isDead() || avatarp->isSelf())
+		{
+			continue;
+		}
+
+		// Get avatar data
+		LLVector3d position = gAgent.getPosGlobalFromAgent(avatarp->getCharacterPosition());
+		LLUUID avid = avatarp->getID();
+		std::string name = avatarp->getFullname();
+
+		// Apparently, sometimes the name comes out empty, with a " " name. This is because
+		// getFullname concatenates first and last name with a " " in the middle.
+		// This code will avoid adding a nameless entry to the list until it acquires a name.
+		if (name.empty() || (name.compare(" ") == 0))
+		{
+			llinfos << "Name empty for avatar " << avid << llendl;
+			continue;
+		}
+
+		if (avid.isNull())
+		{
+			llinfos << "Key empty for avatar " << name << llendl;
+			continue;
+		}
+
+		if ( ( mAvatars.count( avid ) > 0 ) && !mAvatars[avid].getIsCoarse() )
+		{
+			// Avatar already in list, update position
+			mAvatars[avid].setPosition(position);
+		}
+		else
+		{
+			// Avatar not there yet or only from coarse list, add it properly
+			BOOL isLinden = ( std::string( avatarp->getNVPair("LastName")->getString() ) == "Linden" );
+
+			LLAvatarListEntry entry(avid, name, position, isLinden);
+			mAvatars[avid] = entry;
+
+			sendAvatarPropertiesRequest(avid);
+			llinfos << "avatar list refresh: adding " << name << llendl;
+
+		}
+
+	}
+
+	updateFromCoarse();
+
+//	llinfos << "avatar list refresh: done" << llendl;
+
+	expireAvatarList();
+	refreshAvatarList();
+	
+	purgeAvatarHUDMap();
+	
+	checkTrackingStatus();
+	processARQueue();
+}
+
+void LLFloaterAvatarList::processARQueue()
+{
+	if ( mARQueue.empty() ) return;
+
+	LLUUID avatar_id = mARQueue.front();
+
+	if ( 0 == mARLastFrame )
+	{
+		// Start of the process: Move the camera to the avatar. This happens gradually,
+		// so we'll give it a few frames
+		gAgent.lookAtObject(avatar_id, CAMERA_POSITION_OBJECT);
+		mARLastFrame = gFrameCount;
+		return;
+	}
+
+	if ( gFrameCount - mARLastFrame >= 10 )
+	{
+		// Camera should be in position, show AR screen now
+		LLFloaterReporter *report = LLFloaterReporter::showFromObject(avatar_id, false);
+		report->setMinimized(TRUE);
+
+		mARReporterQueue.push(report);
+
+		mARQueue.pop();
+		mARLastFrame = 0;
+
+		if ( mARQueue.empty() )
+		{
+			// Now that all reports are taken, open them.
+
+			while( !mARReporterQueue.empty() )
+			{
+				LLFloaterReporter *r = mARReporterQueue.front();
+				mARReporterQueue.pop();
+
+				r->open();
+				r->setMinimized(FALSE);
+			}
+		}
+	}
+}
+
+void LLFloaterAvatarList::expireAvatarList()
+{
+//	llinfos << "avatar list: expiring" << llendl;
+	std::map<LLUUID, LLAvatarListEntry>::iterator iter;
+	std::queue<LLUUID> delete_queue;
+
+	for(iter = mAvatars.begin(); iter != mAvatars.end(); iter++)
+	{
+		LLAvatarListEntry *ent = &iter->second;
+		
+		if ( ent->getEntryAgeFrames() >= 2 )
+		{
+			ent->setActivity(ACTIVITY_DEAD);
+		}
+
+
+		if ( ent->getEntryAgeSeconds() > CLEANUP_TIMEOUT )
+		{
+			llinfos << "avatar list: expiring avatar " << ent->getName() << llendl;
+			LLUUID av_id = ent->getID();
+			delete_queue.push(av_id);
+		}
+	}
+
+	while(!delete_queue.empty())
+	{
+		mAvatars.erase(delete_queue.front());
+		if ( mHudObjectMap.count(delete_queue.front()) )
+		{
+			mHudObjectMap[delete_queue.front()]->markDead();
+			mHudObjectMap.erase(delete_queue.front());
+		}
+		delete_queue.pop();
+	}
+}
+
+/**
+ * Redraws the avatar list
+ * Only does anything if the avatar list is visible.
+ * @author Dale Glass
+ */
+void LLFloaterAvatarList::refreshAvatarList() 
+{
+
+
+
+	// Don't update list when interface is hidden
+	if (!LLFloaterAvatarList::visible(NULL))
+	{
+		return;
+	}
+
+
+	LLCheckboxCtrl* fetch_data;
+	fetch_data = getChild<LLCheckBoxCtrl>("fetch_avdata_enabled_cb");
+
+	//BOOL db_enabled = gSavedSettings.getBOOL("DBEnabled");
+	//std::string db_avatar = gSavedPerAccountSettings.getString("DBAvatarName");
+	//if ( db_avatar.empty() )
+	//{
+	//	db_enabled = FALSE;
+	//}
+
+
+
+	// We rebuild the list fully each time it's refreshed
+	
+	// The assumption is that it's faster to refill it and sort than
+	// to rebuild the whole list.
+	LLDynamicArray<LLUUID> selected = mAvatarList->getSelectedIDs();
+	S32 scrollpos = mAvatarList->getScrollPos();
+
+	mAvatarList->deleteAllItems();
+
+	LLVector3d mypos = gAgent.getPositionGlobal();
+
+	unsigned int counter = 0;
+
+	std::map<LLUUID, LLAvatarListEntry>::iterator iter;
+	for(iter = mAvatars.begin(); iter != mAvatars.end(); iter++)
+	{
+		LLSD element;
+		LLUUID av_id;
+
+		
+		LLAvatarListEntry *ent = &iter->second;
+
+		// Skip if avatar hasn't been around
+		if ( ent->isDead() )
+		{
+			continue;
+		}
+
+		av_id = ent->getID();
+
+		// Get avatar name, position
+		LLAvatarInfo avinfo = ent->mAvatarInfo.getValue();
+		//LLAvListTrustNetScore avscore = ent->mTrustNetScore.getValue();
+
+		DATA_STATUS avinfo_status = ent->mAvatarInfo.getStatus();
+		//DATA_STATUS avscore_status = ent->mTrustNetScore.getStatus();
+
+		LLVector3d position = ent->getPosition();
+		LLVector3d delta = position - mypos;
+		F32 distance = (F32)delta.magVec();
+
+		std::string icon = "";
+
+		// HACK: Workaround for an apparent bug:
+		// sometimes avatar entries get stuck, and are registered
+		// by the client as perpetually moving in the same direction.
+		// this makes sure they get removed from the visible list eventually.
+		// for the coarse list this is not necessary since it is always accurate
+		if ( distance > 1024 && !ent->getIsCoarse() )
+		{
+			continue;
+		}
+
+		if ( av_id.isNull() )
+		{
+			llwarns << "Avatar with null key somehow got into the list!" << llendl;
+			continue;
+		}
+
+		counter++;
+
+		element["id"] = av_id;
+
+		element["columns"][LIST_AVATAR_ICON]["column"] = "avatar_icon";
+		element["columns"][LIST_AVATAR_ICON]["type"] = "text";
+		if ( !ent->isMarked() )
+		{ // show counter if not marked
+			element["columns"][LIST_AVATAR_ICON]["value"] = llformat("%d", counter);
+		}
+		else
+		{
+			element["columns"][LIST_AVATAR_ICON]["type"] = "icon";
+			const LLUUID flag_blue("e39cbfe7-c4e7-3bad-5e5f-958082d55046");
+			element["columns"][LIST_AVATAR_ICON]["value"] = flag_blue.asString();
+		}
+
+
+		if ( ent->getIsLinden() )
+		{
+			element["columns"][LIST_AVATAR_NAME]["font-style"] = "BOLD";
+		}
+
+		if ( ent->getIsCoarse() )
+		{
+			element["columns"][LIST_AVATAR_NAME]["color"] = LLColor4::grey4.getValue();
+		}
+
+		if ( ent->isFocused() )
+		{
+			element["columns"][LIST_AVATAR_NAME]["color"] = LLColor4::cyan.getValue();
+		}
+
+		//element["columns"][LIST_AVATAR_NAME]["font-color"] = getAvatarColor(ent, distance).getValue();
+		element["columns"][LIST_AVATAR_NAME]["column"] = "avatar_name";
+		element["columns"][LIST_AVATAR_NAME]["type"] = "text";
+		std::string agentname = ent->getName();
+		if ( !ent->getIsSameRegion() )
+		{
+			agentname += " (" + ent->getRegionName() + ")";
+		}
+		element["columns"][LIST_AVATAR_NAME]["value"] = agentname.c_str();
+
+		char temp[32];
+		snprintf(temp, sizeof(temp), "%.2f", distance);
+
+		element["columns"][LIST_DISTANCE]["column"] = "distance";
+		element["columns"][LIST_DISTANCE]["type"] = "text";
+		element["columns"][LIST_DISTANCE]["value"] = temp;
+		element["columns"][LIST_DISTANCE]["color"] = getAvatarColor(ent, distance, CT_DISTANCE).getValue();
+
+		
+		if ( avinfo_status == DATA_RETRIEVED )
+		{
+			element["columns"][LIST_AGE]["column"] = "age";
+			element["columns"][LIST_AGE]["type"] = "text";
+			element["columns"][LIST_AGE]["value"] = avinfo.getAge();
+			element["columns"][LIST_AGE]["color"] = getAvatarColor(ent, distance, CT_AGE).getValue();
+		}
+
+		const LLUUID info_error("bbda234c-c76e-8617-0a32-46cc15c5ec42");
+		const LLUUID info_fetching("1468fae4-2f47-6e75-d39f-3ccbd443d31c");
+		const LLUUID info_unknown("0f2d532a-1fc8-01bb-eed3-ef60e7943d1e");
+		const LLUUID payment_info_charter("07bef5d9-31b2-4cc5-999e-c2cd8b5d3a69");
+		const LLUUID payment_info_filled("9d61c4d5-e8f6-78ec-a64f-490e3a4c03d5");
+		const LLUUID payment_info_used("49ac7ef9-caaa-750a-6ec1-51358f0a1672");
+
+		/*
+		element["columns"][LIST_SCORE]["column"] = "score";
+		element["columns"][LIST_SCORE]["type"] = "text";
+
+		icon = "";
+		switch(avscore_status)
+		{
+			case DATA_UNKNOWN:
+				icon = info_unknown.asString();
+				break;
+			case DATA_REQUESTING:
+				icon = info_fetching.asString();
+				break;
+			case DATA_ERROR:
+				icon =  info_error.asString();
+			case DATA_RETRIEVED:
+				element["columns"][LIST_SCORE]["value"] = avscore.Score;
+				element["columns"][LIST_SCORE]["color"] = getAvatarColor(ent, distance, CT_SCORE).getValue();
+				break;
+		}
+		
+		if (!icon.empty() )
+		{	
+			element["columns"][LIST_SCORE].erase("color");
+			element["columns"][LIST_SCORE]["type"] = "icon";
+			element["columns"][LIST_SCORE]["value"] = icon;
+		}*/
+	
+
+		// Get an icon for the payment data
+		// These should be replaced with something proper instead of reusing whatever
+		// LL-provided images happened to fit
+		icon = "";
+
+		switch(avinfo_status)
+		{
+			case DATA_UNKNOWN:
+				icon = info_unknown.asString();
+				break;
+			case DATA_REQUESTING:
+				icon = info_fetching.asString();
+				break;
+			case DATA_ERROR:
+				icon = info_error.asString();
+				break;
+			case DATA_RETRIEVED:
+				switch(avinfo.Payment)
+				{
+					case PAYMENT_NONE:
+						break;
+					case PAYMENT_ON_FILE:
+						icon =  payment_info_filled.asString();
+						break;
+					case PAYMENT_USED:
+						icon =  payment_info_used.asString();
+						break;
+					case PAYMENT_LINDEN:
+						// confusingly named icon, maybe use something else
+						icon =  "icon_top_pick.tga";
+						break;
+				}
+				break;
+		}
+
+		element["columns"][LIST_PAYMENT]["column"] = "payment_data";
+		element["columns"][LIST_PAYMENT]["type"] = "text";
+
+		// TODO: Add icon for "unknown" status
+		//if ( PAYMENT_NONE != avinfo.Payment && DATA_UNKNOWN != avinfo_status )
+		if ( !icon.empty() )
+		{
+			element["columns"][LIST_PAYMENT].erase("color");
+			element["columns"][LIST_PAYMENT]["type"] = "icon";
+			element["columns"][LIST_PAYMENT]["value"] =  icon;
+			//llinfos << "Payment icon: " << payment_icon << llendl;
+		}
+
+		const LLUUID avatar_gone("db4592d5-c8a5-9336-019c-fcbd282d5f33");
+		const LLUUID avatar_new("33d4b23e-a29c-ac03-f7f6-c2fa197b13fe");
+		const LLUUID avatar_typing("6f083c3c-1e88-d184-6add-95402b3e108f");
+		/*<avatar_sound.tga value = "439836e2-29f5-c12f-71d4-aa59283296e1"/>
+		<flag_blue.tga value="e39cbfe7-c4e7-3bad-5e5f-958082d55046"/>
+		<flag_green.tga value="78952758-1bef-f968-d382-b39094f85aa1"/>
+		<flag_orange.tga value="c72ca7d9-42cd-02f1-ce32-ca1ea5d1c25d"/>
+		<flag_pink.tga value="a3419a89-b8d9-293c-693e-12982e574304"/>
+		<flag_purple.tga value="7982fbf8-457a-77ce-61e6-b3c7d9500d2f"/>
+		<flag_red.tga value="11ba32bf-44fe-666e-073b-00768785b4d0"/>
+		<flag_yellow.tga value="98a5a29e-e933-eeed-bdd9-4d461f557d34"/>*/
+		
+		ACTIVITY_TYPE activity = ent->getActivity();
+		icon = "";
+		switch( activity )
+		{
+			case ACTIVITY_NONE:
+				break;
+			case ACTIVITY_MOVING:
+				icon = "inv_item_animation.tga";
+				break;
+			case ACTIVITY_GESTURING:
+				icon = "inv_item_gesture.tga";
+				break;
+			case ACTIVITY_SOUND:
+				icon = "inv_item_sound.tga";
+				break;
+			case ACTIVITY_REZZING:
+				icon = "ff_edit_theirs.tga";
+				break;
+			case ACTIVITY_PARTICLES:
+				// TODO: Replace with something better
+				icon = "account_id_green.tga";
+				break;
+			case ACTIVITY_NEW:
+				icon = avatar_new.asString();
+				break;
+			case ACTIVITY_TYPING:
+				icon = avatar_typing.asString();
+				break;
+			case ACTIVITY_DEAD:
+				// TODO: Replace, icon is quite inappropiate
+				icon = avatar_gone.asString();
+				break;
+		}
+
+		element["columns"][LIST_ACTIVITY]["column"] = "activity";
+		element["columns"][LIST_ACTIVITY]["type"] = "text";
+
+		if (!icon.empty() )
+		{	
+			element["columns"][LIST_ACTIVITY]["type"] = "icon";
+			element["columns"][LIST_ACTIVITY]["value"] = icon;
+			//llinfos << "Activity icon: " << activity_icon << llendl;
+		}
+		
+		char tempentered[32];
+		F32 entered = ent->getEntryEnteredSeconds();
+		snprintf(tempentered, sizeof(tempentered), "%u", (unsigned int)(entered/60.0));
+		element["columns"][LIST_ENTERED]["column"] = "entered";
+		element["columns"][LIST_ENTERED]["type"] = "text";
+		element["columns"][LIST_ENTERED]["value"] = tempentered;
+		element["columns"][LIST_ENTERED]["color"] = getAvatarColor(ent, distance, CT_ENTERED).getValue();
+
+		// Add to list
+		mAvatarList->addElement(element, ADD_BOTTOM);
+
+		// Request data only if fetching avatar data is enabled
+		if ( fetch_data->getValue() && ent->mAvatarInfo.requestIfNeeded() )
+		{
+			sendAvatarPropertiesRequest(av_id);
+			llinfos << "Data for avatar " << ent->getName() << " didn't arrive yet, retrying" << llendl;
+		}
+
+		/*if ( ent->mTrustNetScore.requestIfNeeded() )
+		{
+			requestTrustNetScore(av_id, ent->getName(), "behavior");
+			llinfos << "Requesting TrustNet score for " << ent->getName() << llendl;
+		}*/
+		
+		//if ( db_enabled && ent->mMiscInfo.requestIfNeeded() )
+		//{
+		//	requestMiscInfo(av_id, ent->getName());
+		//	llinfos << "Requesting misc info for " << ent->getName() << llendl;
+		//}
+	}
+
+	// finish
+	mAvatarList->sort();
+	mAvatarList->selectMultiple(selected);
+	mAvatarList->setScrollPos(scrollpos);
+
+//	llinfos << "avatar list refresh: done" << llendl;
+
+}
+
+// static
+void LLFloaterAvatarList::onClickIM(void* userdata)
+{
+	//llinfos << "LLFloaterFriends::onClickIM()" << llendl;
+	LLFloaterAvatarList *avlist = (LLFloaterAvatarList*)userdata;
+
+	LLDynamicArray<LLUUID> ids = avlist->mAvatarList->getSelectedIDs();
+	if(ids.size() > 0)
+	{
+		if(ids.size() == 1)
+		{
+			// Single avatar
+			LLUUID agent_id = ids[0];
+
+			char buffer[MAX_STRING];
+			snprintf(buffer, MAX_STRING, "%s", avlist->mAvatars[agent_id].getName().c_str());
+			gIMMgr->setFloaterOpen(TRUE);
+			gIMMgr->addSession(
+				buffer,
+				IM_NOTHING_SPECIAL,
+				agent_id);
+		}
+		else
+		{
+			// Group IM
+			LLUUID session_id;
+			session_id.generate();
+			gIMMgr->setFloaterOpen(TRUE);
+			gIMMgr->addSession("Avatars Conference", IM_SESSION_CONFERENCE_START, ids[0], ids);
+		}
+	}
+}
+
+void LLFloaterAvatarList::onClickTrack(void *userdata)
+{
+	LLFloaterAvatarList *avlist = (LLFloaterAvatarList*)userdata;
+	
+ 	LLScrollListItem *item =   avlist->mAvatarList->getFirstSelected();
+	if (!item) return;
+
+	LLUUID agent_id = item->getUUID();
+
+	if ( avlist->mTracking && avlist->mTrackedAvatar == agent_id ) {
+		LLTracker::stopTracking(NULL);
+		avlist->mTracking = FALSE;
+	}
+	else
+	{
+		avlist->mTracking = TRUE;
+		avlist->mTrackByLocation = FALSE;
+		avlist->mTrackedAvatar = agent_id;
+		LLTracker::trackAvatar(agent_id, avlist->mAvatars[agent_id].getName());
+	}
+}
+
+void LLFloaterAvatarList::sendAvatarPropertiesRequest(LLUUID avid)
+{
+	
+
+	lldebugs << "LLPanelAvatar::sendAvatarPropertiesRequest()" << llendl; 
+	LLMessageSystem *msg = gMessageSystem;
+
+	msg->newMessageFast(_PREHASH_AvatarPropertiesRequest);
+	msg->nextBlockFast( _PREHASH_AgentData);
+	msg->addUUIDFast(   _PREHASH_AgentID, gAgent.getID() );
+	msg->addUUIDFast(_PREHASH_SessionID, gAgent.getSessionID());
+	msg->addUUIDFast(   _PREHASH_AvatarID, avid);
+	gAgent.sendReliableMessage();
+
+	mAvatars[avid].mAvatarInfo.requestStarted();
+}
+
+// static
+void LLFloaterAvatarList::processAvatarPropertiesReply(LLMessageSystem *msg, void**)
+{
+
+	
+	LLFloaterAvatarList* self = NULL;
+	LLAvatarInfo avinfo;
+
+	BOOL	identified = FALSE;
+	BOOL	transacted = FALSE;
+
+	LLUUID	agent_id;	// your id
+	LLUUID	avatar_id;	// target of this panel
+	U32	flags = 0x0;
+	char	born_on[DB_BORN_BUF_SIZE];
+	S32	charter_member_size = 0;
+
+	msg->getUUIDFast(_PREHASH_AgentData, _PREHASH_AgentID, agent_id);
+	msg->getUUIDFast(_PREHASH_AgentData, _PREHASH_AvatarID, avatar_id );
+
+	
+	self = gFloaterAvatarList;
+
+	// Verify that the avatar is in the list, if not, ignore.
+	if ( self->mAvatarList->getItemIndex(avatar_id) < 0 )
+	{
+		return;
+	}
+
+	LLAvatarListEntry *entry = &self->mAvatars[avatar_id];
+
+	msg->getStringFast(_PREHASH_PropertiesData, _PREHASH_BornOn, DB_BORN_BUF_SIZE, born_on);
+	msg->getU32Fast(_PREHASH_PropertiesData, _PREHASH_Flags, flags);
+
+	identified = (flags & AVATAR_IDENTIFIED);
+	transacted = (flags & AVATAR_TRANSACTED);
+
+	// What's this?
+	// Let's see if I understand correctly: CharterMember property is dual purpose:
+	// it either contains a number indicating an account type (usual value), or 
+	// it contains a string with a custom title. Probably that's where Philip Linden's
+	// "El Presidente" title comes from. Heh.
+	U8 caption_index = 0;
+	std::string caption_text;
+	charter_member_size = msg->getSize("PropertiesData", "CharterMember");
+
+	if(1 == charter_member_size)
+	{
+		msg->getBinaryData("PropertiesData", "CharterMember", &caption_index, 1);
+	}
+	else if(1 < charter_member_size)
+	{
+		char caption[MAX_STRING];
+		msg->getString("PropertiesData", "CharterMember", MAX_STRING, caption);
+
+		caption_text = caption;
+		entry->setAccountCustomTitle(caption_text);
+	}
+		
+
+	if(caption_text.empty())
+	{
+		
+		const enum ACCOUNT_TYPE ACCT_TYPE[] = {
+			ACCOUNT_RESIDENT,
+			ACCOUNT_TRIAL,
+			ACCOUNT_CHARTER_MEMBER,
+			ACCOUNT_EMPLOYEE
+		};
+
+		//enum ACCOUNT_TYPE acct =
+		avinfo.Account =  ACCT_TYPE[llclamp(caption_index, (U8)0, (U8)(sizeof(ACCT_TYPE)/sizeof(ACCT_TYPE[0])-1))];
+		//entry->setAccountType(acct);
+
+		
+		if ( avinfo.Account != ACCOUNT_EMPLOYEE )
+		{
+			if ( transacted )
+			{
+				avinfo.Payment = PAYMENT_USED;
+			}
+			else if ( identified )
+			{
+				avinfo.Payment = PAYMENT_ON_FILE;
+			}
+			else
+			{
+				avinfo.Payment = PAYMENT_NONE;
+			}
+		}
+		else
+		{
+			avinfo.Payment = PAYMENT_LINDEN;
+		}
+	}
+	
+	// Structure must be zeroed to have sane results, as we
+	// have an incomplete string for input
+	memset(&avinfo.BirthDate, 0, sizeof(avinfo.BirthDate));
+
+	int num_read = sscanf(born_on, "%d/%d/%d", &avinfo.BirthDate.tm_mon,
+	                                           &avinfo.BirthDate.tm_mday,
+	                                           &avinfo.BirthDate.tm_year);
+
+	if ( num_read == 3 && avinfo.BirthDate.tm_mon <= 12 )
+	{
+		avinfo.BirthDate.tm_year -= 1900;
+		avinfo.BirthDate.tm_mon--;
+	}
+	else
+	{
+		// Zero again to remove any partially read data
+		memset(&avinfo.BirthDate, 0, sizeof(avinfo.BirthDate));
+		llwarns << "Error parsing birth date: " << born_on << llendl;
+	}
+
+	entry->mAvatarInfo.setValue(avinfo);
+}
+
+void LLFloaterAvatarList::checkTrackingStatus()
+{
+
+	if ( mTracking && LLTracker::getTrackedPositionGlobal().isExactlyZero() )
+	{
+		// trying to track an avatar, but tracker stopped tracking		
+		if ( mAvatars.count( mTrackedAvatar ) > 0 && !mTrackByLocation )
+		{
+			llinfos << "Switching to location-based tracking" << llendl;
+			mTrackByLocation = TRUE;
+		}
+		else
+		{
+			// not found
+			llinfos << "Stopping tracking avatar, server-side didn't work, and not in list anymore." << llendl;
+			LLTracker::stopTracking(NULL);
+			mTracking = FALSE;
+		}
+	}
+
+	if ( mTracking && mTrackByLocation )
+	{
+		std::string name = mAvatars[mTrackedAvatar].getName();
+		std::string tooltip = "Tracking last known position";
+		name += " (near)";
+		LLTracker::trackLocation(mAvatars[mTrackedAvatar].getPosition(), name, tooltip);
+	}
+
+	//llinfos << "Tracking position: " << LLTracker::getTrackedPositionGlobal() << llendl;
+	
+}
+
+
+BOOL  LLFloaterAvatarList::avatarIsInList(LLUUID avatar)
+{
+	return ( mAvatars.count( avatar ) > 0 );
+}
+
+LLAvatarListEntry * LLFloaterAvatarList::getAvatarEntry(LLUUID avatar)
+{
+	if ( avatar.isNull() )
+	{
+		return NULL;
+	}
+
+	std::map<LLUUID, LLAvatarListEntry>::iterator iter;
+
+	iter = mAvatars.find(avatar);
+	if ( iter == mAvatars.end() )
+	{
+		return NULL;
+	}
+
+	return &iter->second;	
+	
+	//if ( mAvatars.count( avatar ) < 0 )
+	//{
+		//return NULL;
+	//}
+
+	//return &mAvatars[avatar];
+}
+
+void LLFloaterAvatarList::speakText(S32 channel, EChatType type, std::string text)
+{
+	LLMessageSystem* msg = gMessageSystem;
+
+	msg->newMessageFast(_PREHASH_ChatFromViewer);
+	msg->nextBlockFast(_PREHASH_AgentData);
+	msg->addUUIDFast(_PREHASH_AgentID, gAgent.getID());
+	msg->addUUIDFast(_PREHASH_SessionID, gAgent.getSessionID());
+	msg->nextBlockFast(_PREHASH_ChatData);
+	msg->addStringFast(_PREHASH_Message, text);
+	msg->addU8Fast(_PREHASH_Type, type);
+	msg->addS32("Channel", channel);
+
+	gAgent.sendReliableMessage();
+
+	LLViewerStats::getInstance()->incStat(LLViewerStats::ST_CHAT_COUNT);
+}
+
+
+void LLFloaterAvatarList::requestTrustNetScore(LLUUID avatar, const std::string name, const std::string type)
+{
+	char *temp = new char[UUID_STR_LENGTH];
+	avatar.toString(temp);
+
+	std::string text = "GetScore|" + name + "|" + temp + "|" + type;
+	speakText(TRUSTNET_CHANNEL, CHAT_TYPE_WHISPER, text);
+}
+
+//static
+void LLFloaterAvatarList::replaceVars(std::string &str, LLUUID avatar, const std::string& name)
+{
+	char *temp = new char[UUID_STR_LENGTH];
+	avatar.toString(temp);
+
+	std::string vars[][2] = {
+		{"$NAME", name},
+		{"$KEY",  temp},
+	};
+
+	BOOL replaced = TRUE;
+
+	while( replaced )
+	{
+		replaced = FALSE;
+		for(U32 i=0;i<sizeof(vars)/sizeof(vars[0]);i++)
+		{
+			std::string::size_type pos = str.find(vars[i][0]);
+			if ( pos != std::string::npos )
+			{
+				str.replace(pos, vars[i][0].size(), vars[i][1]);
+				replaced = TRUE;
+			}
+		}
+	}
+
+}
+
+void LLFloaterAvatarList::requestMiscInfo(LLUUID avatar, const std::string name)
+{
+	//LLUUID   db_av_key;
+
+	//std::string message      = gSavedPerAccountSettings.getString("DBSendPattern");
+	//std::string db_av_name   = gSavedPerAccountSettings.getString("DBAvatarName");
+	//db_av_key.set(gSavedPerAccountSettings.getString("DBAvatarKey"));
+
+	
+	//llinfos << "Requesting info " << llendl;
+	//replaceVars(message, avatar, name);
+
+	//llinfos << "Request string: " << message << llendl;
+	//send_simple_im(db_av_key, message.c_str());
+ }
+
+//static
+BOOL LLFloaterAvatarList::handleIM(LLUUID from_id, const std::string message)
+{
+	LLUUID   db_av_key;
+	//db_av_key.set(gSavedPerAccountSettings.getString("DBAvatarKey"));
+
+	if ( db_av_key == from_id )
+	{
+		std::map<LLUUID, LLAvatarListEntry>::iterator iter;
+
+		for(iter = gFloaterAvatarList->mAvatars.begin(); iter != gFloaterAvatarList->mAvatars.end(); iter++)
+		{
+			LLAvatarListEntry *ent = &iter->second;
+		
+			// Check if the key, or the name are found in the reply.
+			// Name is only accepted if it's in the beginning of the message.
+			if ( message.find(ent->getID().asString()) != std::string::npos
+			     || message.find(ent->getName().c_str()) == 0 )
+			{
+				LLMiscDBInfo info;
+				info.data = message;
+
+				llinfos << "Database reply arrived for avatar " << ent->getName() << llendl;
+				ent->mMiscInfo.setValue(info);
+			}
+		}
+
+		return TRUE;
+	}
+	return FALSE;
+}
+
+//static
+void LLFloaterAvatarList::processTrustNetReply(char *reply)
+{
+	char *tokens[10];
+	char *tmp = &reply[0];
+	U32 count = 0;
+
+	llinfos << "TrustNet reply: " << reply << llendl;
+	
+
+	// Split into tokens
+	while( (NULL != (tmp = strtok(tmp, "|"))) && count < (sizeof(tokens)/sizeof(tokens[0])) )
+	{
+		tokens[count++] = tmp;
+		llinfos << "token: " << tmp << llendl;
+		tmp = NULL;
+	}
+
+	llinfos << "Got " << count << " tokens" << llendl;
+
+	if ( count >= 1 )
+	{
+		if (!strcmp(tokens[0], "Score") && count >= 4)
+		{
+			//format: key|type|score
+			LLUUID avatar(tokens[1]);
+			std::string type = tokens[2];
+			F32 score = (F32)strtod(tokens[3], NULL);
+			
+			LLAvatarListEntry *ent = gFloaterAvatarList->getAvatarEntry(avatar);
+			if ( ent != NULL )
+			{
+				LLAvListTrustNetScore s(type, score);
+				ent->mTrustNetScore.setValue(s);
+				llinfos << "Score arrived for avatar " << avatar << ": " << score << llendl;
+			}
+			else
+			{
+				llinfos << "Score arrived for avatar " << avatar << ", but it wasn't in the list anymore" << llendl;
+			}
+		}
+		else if (!strcmp(tokens[0], "WebAuthToken") && count >= 2)
+		{
+			std::string URL = LLWeb::escapeURL(llformat("http://trustnet.daleglass.net/?session=%s", tokens[1]));
+ 			LLWeb::loadURL(URL);
+		}
+		else if (!strcmp(tokens[0], "WebPassword") && count >= 2)
+		{
+			std::string password = tokens[1];
+			gViewerWindow->mWindow->copyTextToClipboard(utf8str_to_wstring(password));
+		}
+		else
+		{
+			llwarns << "Unrecognized TrustNet reply " << tokens[0] << llendl;
+		}
+	}
+}
+
+void LLFloaterAvatarList::luskwoodCommand(std::string cmd)
+{
+	LLDynamicArray<LLUUID> ids = mAvatarList->getSelectedIDs();
+
+	for(LLDynamicArray<LLUUID>::iterator itr = ids.begin(); itr != ids.end(); ++itr)
+	{
+		LLUUID avid = *itr;
+		LLAvatarListEntry *ent = getAvatarEntry(avid);
+		if ( ent != NULL )
+		{
+			//llinfos << "Would say: " << cmd << " " << ent->getName() << llendl;
+			// Use key got gokey, name for everything else
+			speakText(0, CHAT_TYPE_SHOUT, cmd + " " + ( cmd == "gokey" ? ent->getID().asString() :  ent->getName() ) );
+		}
+	}
+}
+
+//static
+void LLFloaterAvatarList::onClickMark(void *userdata)
+{
+	LLFloaterAvatarList *avlist = (LLFloaterAvatarList*)userdata;
+	LLDynamicArray<LLUUID> ids = avlist->mAvatarList->getSelectedIDs();
+
+	for(LLDynamicArray<LLUUID>::iterator itr = ids.begin(); itr != ids.end(); ++itr)
+	{
+		LLUUID avid = *itr;
+		LLAvatarListEntry *ent = avlist->getAvatarEntry(avid);
+		if ( ent != NULL )
+		{
+			ent->toggleMark();
+		}
+	}
+}
+
+void LLFloaterAvatarList::handleLuskwoodDialog(S32 option, void* data)
+{
+	LLFloaterAvatarList *self = (LLFloaterAvatarList*)data;
+	if ( 0 == option )
+	{
+		self->luskwoodCommand(self->mLuskwoodCommand);
+	}
+}
+
+void LLFloaterAvatarList::handleLuskwoodGohomerOffDialog(S32 option, void* data)
+{
+	LLFloaterAvatarList *self = (LLFloaterAvatarList*)data;
+	if ( 0 == option )
+	{
+		self->speakText(0, CHAT_TYPE_SHOUT, "gohome off");
+	}
+}
+
+//static
+void LLFloaterAvatarList::onClickGohomerWarn(void *data)
+{
+	LLFloaterAvatarList *self = (LLFloaterAvatarList*)data;
+
+	self->mLuskwoodCommand = "gowarn";
+	LLSD args;
+	LLNotificationPtr notification = LLNotifications::instance().add("LuskwoodGohomerWarn", args);
+
+}
+
+//static
+void LLFloaterAvatarList::onClickGohomerEject(void *data)
+{
+	//LLFloaterAvatarList *self = (LLFloaterAvatarList*)data;
+
+	//self->mLuskwoodCommand = "goeject";
+	//gViewerWindow->alertXml("LuskwoodGohomerEject", handleLuskwoodDialog, self);
+	//LLSD args;
+	//LLNotificationPtr notification = LLNotifications::instance().add("goeject", args);
+
+}
+
+//static
+void LLFloaterAvatarList::onClickGohomerSendAway(void *data)
+{
+	//LLFloaterAvatarList *self = (LLFloaterAvatarList*)data;
+
+	//self->mLuskwoodCommand = "goaway";
+	//gViewerWindow->alertXml("LuskwoodGohomerKeepAway", handleLuskwoodDialog, self);
+}
+
+//static
+void LLFloaterAvatarList::onClickGohomerSendHome(void *data)
+{
+	//LLFloaterAvatarList *self = (LLFloaterAvatarList*)data;
+
+	//self->mLuskwoodCommand = "gohome";
+	//gViewerWindow->alertXml("LuskwoodGohomerSendHome", handleLuskwoodDialog, self);
+}
+
+//static
+void LLFloaterAvatarList::onClickGohomerSendHomeByKey(void *data)
+{
+	//LLFloaterAvatarList *self = (LLFloaterAvatarList*)data;
+
+	//self->mLuskwoodCommand = "gokey";
+	//gViewerWindow->alertXml("LuskwoodGohomerSendHome", handleLuskwoodDialog, self);
+}
+
+
+//static
+void LLFloaterAvatarList::onClickGohomerOff(void *data)
+{
+	//LLFloaterAvatarList *self = (LLFloaterAvatarList*)data;
+	//gViewerWindow->alertXml("LuskwoodGohomerOff", handleLuskwoodGohomerOffDialog, self);
+}
+
+LLColor4 LLFloaterAvatarList::getAvatarColor(LLAvatarListEntry *ent, F32 distance, e_coloring_type type)
+{
+ 	F32 r = 0.0f, g = 0.0f, b = 0.0f, a = 1.0f;
+
+	switch(type)
+	{
+		case CT_NONE:
+			return LLColor4::black;
+			break;
+		case CT_DISTANCE:
+			if ( distance <= 10.0f )
+			{
+				// whisper range
+				g = 0.7f - ( distance / 20.0f );
+			}
+			else if ( distance > 10.0f && distance <= 20.0f )
+			{
+				// talk range
+				g = 0.7f - ( (distance - 10.0f) / 20.0f );
+				b = g;
+			}
+			else if ( distance > 20.0f && distance <= 96.0f )
+			{
+				// shout range
+				r = 0.7f - ( (distance - 20.0f) / 192.0f );
+				b = r;
+			}
+			else
+			{
+				// unreachable by chat
+				r = 1.0;
+			}
+			break;
+		case CT_AGE:
+			if ( ent->mAvatarInfo.getStatus() == DATA_RETRIEVED )
+			{
+				S32 age = ent->mAvatarInfo.getValue().getAge();
+				if ( age < 14 )
+				{
+					r = 0.7f - ( age / 28 );
+				}
+				else if ( age > 14 && age <= 30 )
+				{
+					r = 0.7f - ( (age-14) / 32 );
+					g = r;
+				}
+				else if ( age > 30 && age < 90 )
+				{
+					g = 0.7f - ( (age-30) / 120 );
+				}
+				else
+				{
+					b = 1.0f;
+				}
+			}
+			break;
+		case CT_SCORE:
+			if ( ent->mTrustNetScore.getStatus() == DATA_RETRIEVED )
+			{
+				F32 score = ent->mTrustNetScore.getValue().Score;
+
+				if ( score == 0.0 )
+				{
+					b = 1.0f;
+				}
+				else if ( score == 10.0f )
+				{
+					g = 1.0f;
+				}
+				else if ( score == -10.0f )
+				{
+					r = 1.0f;
+				}
+				else if ( score > 0.0f )
+				{
+					g = 0.2f + ( score / 20.0f );
+				}
+				else if ( score < 0.0f )
+				{ 
+					r = 0.2f + ( score / 20.0f );
+				}
+			}
+			break;
+		case CT_PAYMENT:
+			break;
+		case CT_ENTERED:
+			F32 entered = ent->getEntryEnteredSeconds();
+			if (distance <= 20.0f)
+			{
+				if ( entered <= ( 5.0f * 60.0f ) )
+				{
+					r = 0.7f - ( entered / ( 4.0f * 5.0f * 60.0f ) );
+					b = 1.0f - ( ( ( 5.0f * 60.0f ) - entered) / ( 5.0f * 60.0f ) );
+				}
+				else
+				{
+					b = 1.0f;
+				}
+			}
+			else
+			{
+				r = g = b = 0.5f;
+			}
+			break;
+	}
+
+	return LLColor4(r,g,b,a);
+}
+
+void LLFloaterAvatarList::onDoubleClick(void *userdata)
+{
+	LLFloaterAvatarList *self = (LLFloaterAvatarList*)userdata;
+ 	LLScrollListItem *item =   self->mAvatarList->getFirstSelected();
+	LLUUID agent_id = item->getUUID();
+	LLAvatarListEntry *ent = 0;
+
+	if ( self->mAvatars.count( agent_id ) )
+	{
+		ent = &self->mAvatars[ agent_id ];
+	}
+
+	if ( ent && ent->getIsCoarse() )
+	{
+		// nothing to look at, manipulate camera directly
+		LLQuaternion rot;
+		
+		LLMatrix3 mat(rot);
+
+		LLVector3 pos( ent->getPosition() );
+
+		LLViewerCamera::getInstance()->setView(1.0);
+		LLViewerCamera::getInstance()->setOrigin( pos );
+		LLViewerCamera::getInstance()->mXAxis = LLVector3(mat.mMatrix[0]);
+		LLViewerCamera::getInstance()->mYAxis = LLVector3(mat.mMatrix[1]);
+		LLViewerCamera::getInstance()->mZAxis = LLVector3(mat.mMatrix[2]);	}
+	else
+	{
+		gAgent.lookAtObject(agent_id, CAMERA_POSITION_OBJECT);
+	}
+}
+
+void LLFloaterAvatarList::removeFocusFromAll()
+{
+	std::map<LLUUID, LLAvatarListEntry>::iterator iter;
+
+	for(iter = mAvatars.begin(); iter != mAvatars.end(); iter++)
+	{
+		LLAvatarListEntry *ent = &iter->second;
+		ent->setFocus(FALSE);
+	}
+}
+
+void LLFloaterAvatarList::focusOnPrev(BOOL marked_only)
+{
+	std::map<LLUUID, LLAvatarListEntry>::iterator iter;
+	LLAvatarListEntry *prev = NULL;
+	LLAvatarListEntry *ent;
+
+	if ( mAvatars.size() == 0 )
+	{
+		return;
+	}
+
+	for(iter = mAvatars.begin(); iter != mAvatars.end(); iter++)
+	{
+		ent = &iter->second;
+
+		if ( ent->isDead() )
+			continue;
+
+		if ( (ent->getID() == mFocusedAvatar) && (prev != NULL)  )
+		{
+			removeFocusFromAll();
+			prev->setFocus(TRUE);
+			mFocusedAvatar = prev->getID();
+			gAgent.lookAtObject(mFocusedAvatar, CAMERA_POSITION_OBJECT);
+			return;
+		}
+
+		if ( (!marked_only) || ent->isMarked() )
+		{
+			prev = ent;
+		}
+	}
+
+	if (prev != NULL && ((!marked_only) || prev->isMarked()) )
+	{
+		removeFocusFromAll();
+		prev->setFocus(TRUE);
+		mFocusedAvatar = prev->getID();
+		gAgent.lookAtObject(mFocusedAvatar, CAMERA_POSITION_OBJECT);
+	}
+}
+
+void LLFloaterAvatarList::focusOnNext(BOOL marked_only)
+{
+
+	
+	std::map<LLUUID, LLAvatarListEntry>::iterator iter;
+	BOOL found = FALSE;
+	LLAvatarListEntry *first = NULL;
+	LLAvatarListEntry *ent;
+
+	if ( mAvatars.size() == 0 )
+	{
+		return;
+	}
+
+	for(iter = mAvatars.begin(); iter != mAvatars.end(); iter++)
+	{
+		ent = &iter->second;
+
+		if ( ent->isDead() )
+			continue;
+
+		if ( NULL == first && ((!marked_only) || ent->isMarked()))
+		{
+			first = ent;
+		}
+
+		if ( found && ((!marked_only) || ent->isMarked()) )
+		{
+			removeFocusFromAll();
+			ent->setFocus(TRUE);
+			mFocusedAvatar = ent->getID();
+			gAgent.lookAtObject(mFocusedAvatar, CAMERA_POSITION_OBJECT);
+			return;
+		}
+
+		if ( ent->getID() == mFocusedAvatar )
+		{
+			found = TRUE;
+		} 
+	}
+
+	if (first != NULL && ((!marked_only) || first->isMarked()))
+	{
+		removeFocusFromAll();
+		first->setFocus(TRUE);
+		mFocusedAvatar = first->getID();
+		gAgent.lookAtObject(mFocusedAvatar, CAMERA_POSITION_OBJECT);
+	}
+}
+//static
+void LLFloaterAvatarList::onClickPrevInList(void *userdata)
+{
+	LLFloaterAvatarList *self = (LLFloaterAvatarList*)userdata;
+	self->focusOnPrev(FALSE);
+}
+
+//static
+void LLFloaterAvatarList::onClickNextInList(void *userdata)
+{
+	LLFloaterAvatarList *self = (LLFloaterAvatarList*)userdata;
+	self->focusOnNext(FALSE);
+}
+
+//static
+void LLFloaterAvatarList::onClickPrevMarked(void *userdata)
+{
+	LLFloaterAvatarList *self = (LLFloaterAvatarList*)userdata;
+	self->focusOnPrev(TRUE);
+}
+
+//static
+void LLFloaterAvatarList::onClickNextMarked(void *userdata)
+{
+	LLFloaterAvatarList *self = (LLFloaterAvatarList*)userdata;
+	self->focusOnNext(TRUE);
+}
+
+//static
+void LLFloaterAvatarList::onClickTrustNetRate(void *userdata)
+{
+	// LLFloaterAvatarList *self = (LLFloaterAvatarList*)userdata;
+	llinfos << "Ratings not implemented yet" << llendl;
+}
+
+//static
+void LLFloaterAvatarList::onClickTrustNetExplain(void *userdata)
+{
+	LLFloaterAvatarList *self = (LLFloaterAvatarList*)userdata;
+	LLScrollListItem *item =   self->mAvatarList->getFirstSelected();
+
+	if ( item != NULL )
+	{
+		LLAvatarListEntry *ent = self->getAvatarEntry(item->getUUID());
+		self->speakText(TRUSTNET_CHANNEL, CHAT_TYPE_WHISPER, "Explain|" + ent->getName() + "|" + ent->getID().asString());
+	}
+}
+
+//static
+void LLFloaterAvatarList::onClickTrustNetWebsite(void *userdata)
+{
+	LLFloaterAvatarList *self = (LLFloaterAvatarList*)userdata;
+
+	self->speakText(TRUSTNET_CHANNEL, CHAT_TYPE_WHISPER, "GetWebAuthToken");
+}
+
+//static
+void LLFloaterAvatarList::onClickTrustNetGetPassword(void *userdata)
+{
+	LLFloaterAvatarList *self = (LLFloaterAvatarList*)userdata;
+
+	self->speakText(TRUSTNET_CHANNEL, CHAT_TYPE_WHISPER, "GetWebPassword");
+}
+
+//static
+void LLFloaterAvatarList::onClickTrustNetRenew(void *userdata)
+{
+	LLFloaterAvatarList *self = (LLFloaterAvatarList*)userdata;
+	self->speakText(TRUSTNET_CHANNEL, CHAT_TYPE_WHISPER, "RenewSubscription");
+}
+
+//static
+void LLFloaterAvatarList::onClickGetKey(void *userdata)
+{
+	LLFloaterAvatarList *self = (LLFloaterAvatarList*)userdata;
+ 	LLScrollListItem *item = self->mAvatarList->getFirstSelected();
+
+	if ( NULL == item ) return;
+
+	LLUUID agent_id = item->getUUID();
+
+	char buffer[UUID_STR_LENGTH];		/*Flawfinder: ignore*/
+	agent_id.toString(buffer);
+
+	gViewerWindow->mWindow->copyTextToClipboard(utf8str_to_wstring(buffer));
+}
+
+
+static void send_freeze(const LLUUID& avatar_id, bool freeze)
+{
+	U32 flags = 0x0;
+	if (!freeze)
+	{
+		// unfreeze
+		flags |= 0x1;
+	}
+
+	LLMessageSystem* msg = gMessageSystem;
+	LLViewerObject* avatar = gObjectList.findObject(avatar_id);
+
+	if (avatar)
+	{
+		msg->newMessage("FreezeUser");
+		msg->nextBlock("AgentData");
+		msg->addUUID("AgentID", gAgent.getID());
+		msg->addUUID("SessionID", gAgent.getSessionID());
+		msg->nextBlock("Data");
+		msg->addUUID("TargetID", avatar_id );
+		msg->addU32("Flags", flags );
+		msg->sendReliable( avatar->getRegion()->getHost() );
+	}
+}
+
+static void send_eject(const LLUUID& avatar_id, bool ban)
+{	
+	LLMessageSystem* msg = gMessageSystem;
+	LLViewerObject* avatar = gObjectList.findObject(avatar_id);
+
+	if (avatar)
+	{
+		U32 flags = 0x0;
+		if ( ban )
+		{
+			// eject and add to ban list
+			flags |= 0x1;
+		}
+
+		msg->newMessage("EjectUser");
+		msg->nextBlock("AgentData");
+		msg->addUUID("AgentID", gAgent.getID() );
+		msg->addUUID("SessionID", gAgent.getSessionID() );
+		msg->nextBlock("Data");
+		msg->addUUID("TargetID", avatar_id );
+		msg->addU32("Flags", flags );
+		msg->sendReliable( avatar->getRegion()->getHost() );
+	}
+}
+
+static void send_estate_message(
+	const char* request,
+	const LLUUID &target)
+{
+
+	LLMessageSystem* msg = gMessageSystem;
+	LLUUID invoice;
+
+	// This seems to provide an ID so that the sim can say which request it's
+	// replying to. I think this can be ignored for now.
+	invoice.generate();
+
+	llinfos << "Sending estate request '" << request << "'" << llendl;
+	msg->newMessage("EstateOwnerMessage");
+	msg->nextBlockFast(_PREHASH_AgentData);
+	msg->addUUIDFast(_PREHASH_AgentID, gAgent.getID());
+	msg->addUUIDFast(_PREHASH_SessionID, gAgent.getSessionID());
+	msg->addUUIDFast(_PREHASH_TransactionID, LLUUID::null); //not used
+	msg->nextBlock("MethodData");
+	msg->addString("Method", request);
+	msg->addUUID("Invoice", invoice);
+
+	// Agent id
+	msg->nextBlock("ParamList");
+	msg->addString("Parameter", gAgent.getID().asString().c_str());
+
+	// Target
+	msg->nextBlock("ParamList");
+	msg->addString("Parameter", target.asString().c_str());
+
+	msg->sendReliable(gAgent.getRegion()->getHost());
+}
+
+static void send_estate_ban(const LLUUID& agent)
+{
+	LLUUID invoice;
+	U32 flags = ESTATE_ACCESS_BANNED_AGENT_ADD;
+
+	invoice.generate();
+
+	LLMessageSystem* msg = gMessageSystem;
+	msg->newMessage("EstateOwnerMessage");
+	msg->nextBlockFast(_PREHASH_AgentData);
+	msg->addUUIDFast(_PREHASH_AgentID, gAgent.getID());
+	msg->addUUIDFast(_PREHASH_SessionID, gAgent.getSessionID());
+	msg->addUUIDFast(_PREHASH_TransactionID, LLUUID::null); //not used
+
+	msg->nextBlock("MethodData");
+	msg->addString("Method", "estateaccessdelta");
+	msg->addUUID("Invoice", invoice);
+
+	char buf[MAX_STRING];		/* Flawfinder: ignore*/
+	gAgent.getID().toString(buf);
+	msg->nextBlock("ParamList");
+	msg->addString("Parameter", buf);
+
+	snprintf(buf, MAX_STRING, "%u", flags);			/* Flawfinder: ignore */
+	msg->nextBlock("ParamList");
+	msg->addString("Parameter", buf);
+
+	agent.toString(buf);
+	msg->nextBlock("ParamList");
+	msg->addString("Parameter", buf);
+
+	gAgent.sendReliableMessage();
+}
+
+static void cmd_freeze(const LLUUID& avatar, const std::string &name)      { send_freeze(avatar, true); }
+static void cmd_unfreeze(const LLUUID& avatar, const std::string &name)    { send_freeze(avatar, false); }
+static void cmd_eject(const LLUUID& avatar, const std::string &name)       { send_eject(avatar, false); }
+static void cmd_ban(const LLUUID& avatar, const std::string &name)         { send_eject(avatar, true); }
+static void cmd_profile(const LLUUID& avatar, const std::string &name)     { LLFloaterAvatarInfo::showFromDirectory(avatar); }
+static void cmd_mute(const LLUUID&avatar, const std::string &name)         { LLMuteList::getInstance()->add(LLMute(avatar, name, LLMute::AGENT)); }
+static void cmd_unmute(const LLUUID&avatar, const std::string &name)       { LLMuteList::getInstance()->remove(LLMute(avatar, name, LLMute::AGENT)); }
+static void cmd_estate_eject(const LLUUID &avatar, const std::string &name){ send_estate_message("teleporthomeuser", avatar); }
+static void cmd_estate_ban(const LLUUID &avatar, const std::string &name)
+{
+	send_estate_message("teleporthomeuser", avatar); // Kick first, just to be sure
+	send_estate_ban(avatar);
+}
+
+void LLFloaterAvatarList::doCommand(void (*func)(const LLUUID &avatar, const std::string &name))
+{
+	LLDynamicArray<LLUUID> ids = mAvatarList->getSelectedIDs();
+
+	for(LLDynamicArray<LLUUID>::iterator itr = ids.begin(); itr != ids.end(); ++itr)
+	{
+		LLUUID avid = *itr;
+		LLAvatarListEntry *ent = getAvatarEntry(avid);
+		if ( ent != NULL )
+		{
+			llinfos << "Executing command on " << ent->getName() << llendl;
+			func(avid, ent->getName());
+		}
+	}
+}
+
+std::string LLFloaterAvatarList::getSelectedNames(const std::string& separator)
+{
+	std::string ret = "";
+	
+	LLDynamicArray<LLUUID> ids = mAvatarList->getSelectedIDs();
+	for(LLDynamicArray<LLUUID>::iterator itr = ids.begin(); itr != ids.end(); ++itr)
+	{
+		LLUUID avid = *itr;
+		LLAvatarListEntry *ent = getAvatarEntry(avid);
+		if ( ent != NULL )
+		{
+			if (!ret.empty()) ret += separator;
+			ret += ent->getName();
+		}
+	}
+
+	return ret;
+}
+
+//static 
+void LLFloaterAvatarList::callbackFreeze(S32 option, void *userdata) { 
+	LLFloaterAvatarList *avlist = (LLFloaterAvatarList*)userdata;
+
+	if ( option == 0 )
+	{
+		avlist->doCommand(cmd_freeze);
+	}
+	else if ( option == 1 )
+	{
+		avlist->doCommand(cmd_unfreeze);
+	}
+}
+
+//static 
+void LLFloaterAvatarList::callbackEject(S32 option, void *userdata) {
+	LLFloaterAvatarList *avlist = (LLFloaterAvatarList*)userdata;
+ 
+	if ( option == 0 )
+	{
+		avlist->doCommand(cmd_eject);
+	}
+	else if ( option == 1 )
+	{
+		avlist->doCommand(cmd_ban);
+	}
+}
+
+//static 
+void LLFloaterAvatarList::callbackMute(S32 option, void *userdata) {
+	LLFloaterAvatarList *avlist = (LLFloaterAvatarList*)userdata;
+
+	if ( option == 0 )
+	{
+		avlist->doCommand(cmd_mute);
+	} 
+	else if ( option == 1 )
+	{
+		avlist->doCommand(cmd_unmute);
+	}
+}
+
+//static 
+void LLFloaterAvatarList::callbackEjectFromEstate(S32 option, void *userdata) {
+	LLFloaterAvatarList *avlist = (LLFloaterAvatarList*)userdata;
+
+	if ( option == 0 )
+	{
+		avlist->doCommand(cmd_estate_eject);
+	} 
+	else if ( option == 1 )
+	{
+		avlist->doCommand(cmd_estate_ban);
+	}
+}
+
+//static
+void LLFloaterAvatarList::onClickFreeze(void *userdata)
+{
+	//LLStringUtil::format_map_t args;
+	//args["[NAMES]"] = ((LLFloaterAvatarList*)userdata)->getSelectedNames();
+	//gViewerWindow->alertXml("AvatarListFreezeAvatars", args, callbackFreeze, userdata);
+}
+
+//static
+void LLFloaterAvatarList::onClickEject(void *userdata)
+{
+	//LLStringUtil::format_map_t args;
+	//args["[NAMES]"] = ((LLFloaterAvatarList*)userdata)->getSelectedNames();
+	//gViewerWindow->alertXml("AvatarListEjectAvatars", args, callbackEject, userdata);
+}
+
+//static
+void LLFloaterAvatarList::onClickMute(void *userdata)
+{
+	//LLStringUtil::format_map_t args;
+	//args["[NAMES]"] = ((LLFloaterAvatarList*)userdata)->getSelectedNames();
+	//gViewerWindow->alertXml("AvatarListMuteAvatars", args, callbackMute, userdata);
+}
+
+//static
+void LLFloaterAvatarList::onClickEjectFromEstate(void *userdata)
+{
+	//LLStringUtil::format_map_t args;
+	//args["[NAMES]"] = ((LLFloaterAvatarList*)userdata)->getSelectedNames();
+	//gViewerWindow->alertXml("AvatarListEjectAvatarsFromEstate", args, callbackEjectFromEstate, userdata);
+}
+
+
+
+//static
+void LLFloaterAvatarList::onClickAR(void *userdata)
+{
+	LLFloaterAvatarList *avlist = (LLFloaterAvatarList*)userdata;
+	LLDynamicArray<LLUUID> ids = avlist->mAvatarList->getSelectedIDs();
+
+	for(LLDynamicArray<LLUUID>::iterator itr = ids.begin(); itr != ids.end(); ++itr)
+	{
+		LLUUID avid = *itr;
+		llinfos << "Adding " << avid << " to AR queue" << llendl;
+		avlist->mARQueue.push( avid );
+	}
+}
+
+// static
+void LLFloaterAvatarList::onClickProfile(void* userdata)
+{
+	LLFloaterAvatarList *avlist = (LLFloaterAvatarList*)userdata;
+	avlist->doCommand(cmd_profile);
+}
+
+//static
+void LLFloaterAvatarList::onClickTeleport(void* userdata)
+{
+	LLFloaterAvatarList *avlist = (LLFloaterAvatarList*)userdata;
+ 	LLScrollListItem *item =   avlist->mAvatarList->getFirstSelected();
+
+	if ( item )
+	{
+		LLUUID agent_id = item->getUUID();
+		LLAvatarListEntry *ent = avlist->getAvatarEntry(agent_id);
+		
+		if ( ent )
+		{
+			llinfos << "Trying to teleport to " << ent->getName() << " at " << ent->getPosition() << llendl;
+			gAgent.teleportViaLocation( ent->getPosition() );
+		}
+	}
+}
+
+
+void LLFloaterAvatarList::renderDebugBeacons()
+{
+	LLFastTimer t(LLFastTimer::FTM_TEMP1);
+	std::map<LLUUID, LLAvatarListEntry>::iterator iter;
+	for(iter = mAvatars.begin(); iter != mAvatars.end(); ++iter)
+	{
+		LLAvatarListEntry entry = iter->second;
+		if ( entry.isDead() )
+		{ // remove HUD Object if it exists
+			if ( mHudObjectMap.count(entry.getID()) )
+			{
+				mHudObjectMap[entry.getID()]->markDead();
+				mHudObjectMap.erase(entry.getID());
+			}
+			continue;
+		}
+
+		std::string name = entry.getName();
+		LLVector3d avpos = entry.getPosition();
+		LLVector3d mypos = gAgent.getPositionGlobal();
+		LLVector3d delta = avpos - mypos;
+		F32 distance = (F32)delta.magVec();
+		
+		std::string info = llformat( "%s %.02fm", name.c_str(), distance );
+		LLVector3 agentpos = gAgent.getPosAgentFromGlobal( avpos );
+
+		// roll our own HUD text since the debug beacons are rendered too late (after HUD update)
+		if (mHudObjectMap.count(entry.getID()) == 0)
+		{
+			mHudObjectMap[entry.getID()] = LLHUDObject::addHUDObject(LLHUDObject::LL_HUD_TEXT);
+		}
+		LLHUDText* hud_textp = (LLHUDText *)mHudObjectMap[entry.getID()].get(); // :-/
+		
+		hud_textp->setZCompare(FALSE);
+		hud_textp->setString(utf8str_to_wstring(info));
+		hud_textp->setColor(LLColor4::white);
+		hud_textp->setPositionAgent(agentpos);
+		hud_textp->setUseBubble(TRUE);
+		hud_textp->setMass(10.f);
+		hud_textp->setDoFade(FALSE);
+		//std::string posinfo = llformat("%f %f %f", agentpos[0], agentpos[1], agentpos[2]);
+		//hud_textp->setLabel(posinfo);
+
+		gObjectList.addDebugBeacon( agentpos, "", LLColor4(0.0f, 0.0f, 1.f, 0.5f), LLColor4::white, gSavedSettings.getS32("DebugBeaconLineWidth") );
+	}	
+}
+
+bool LLFloaterAvatarList::sRenderAvatarBeacons = true;
+
diff --git a/indra/newview/llfloateravatarlist.h b/indra/newview/llfloateravatarlist.h
new file mode 100644
index 0000000..78df867
--- /dev/null
+++ b/indra/newview/llfloateravatarlist.h
@@ -0,0 +1,868 @@
+//
+// C++ Interface: llfloateravatarlist
+//
+// Description: 
+//
+//
+// Author: Dale Glass <dale@daleglass.net>, (C) 2007
+//
+// Copyright: See COPYING file that comes with this distribution
+//
+//
+#include "llfloater.h"
+#include "llfloaterreporter.h"
+#include "lluuid.h"
+#include "lltimer.h"
+#include "llchat.h"
+#include "llappviewer.h"
+#include "llscrolllistctrl.h"
+#include "llhudobject.h"
+
+#include <time.h>
+#include <map>
+
+class LLFloaterAvatarList;
+
+/**
+ * @brief Account type
+ */
+enum ACCOUNT_TYPE
+{
+	ACCOUNT_RESIDENT,         /** Normal resident */
+	ACCOUNT_TRIAL,            /** Trial account */
+	ACCOUNT_CHARTER_MEMBER,   /** Lifetime account obtained during beta */
+	ACCOUNT_EMPLOYEE,         /** Linden Lab employee */
+	ACCOUNT_CUSTOM            /** Custom account title specified. Seems to apply to Philip Linden */
+};
+
+/**
+ * @brief Payment data
+ */
+enum PAYMENT_TYPE
+{
+	PAYMENT_NONE,             /** No payment data on file */
+	PAYMENT_ON_FILE,          /** Payment data filled, but not used */
+	PAYMENT_USED,             /** Payment data used */
+	PAYMENT_LINDEN            /** Payment info doesn't apply (Linden, etc) */
+};
+
+
+/**
+ * @brief Activity
+ *
+ * This enum is ordered by priority, higher values have higher priority.
+ * Since we only have one column to show activity, priority decides what
+ * to show in case of conflict.
+ */
+enum ACTIVITY_TYPE
+{
+	ACTIVITY_NONE,           /** Avatar not doing anything */ 
+	ACTIVITY_MOVING,         /** Changing position */
+	ACTIVITY_GESTURING,	 /** Playing a gesture */
+	ACTIVITY_SOUND,          /** Playing a sound */
+	ACTIVITY_REZZING,        /** Rezzing objects */
+	ACTIVITY_PARTICLES,      /** Creating particles */
+	ACTIVITY_TYPING,         /** Typing */
+	ACTIVITY_NEW,            /** Avatar just appeared */
+	ACTIVITY_DEAD            /** Avatar isn't around anymore, and will be removed soon from the list */
+};
+
+enum DATA_STATUS
+{
+	DATA_UNKNOWN,
+	DATA_REQUESTING,
+	DATA_ERROR,
+	DATA_RETRIEVED
+};
+
+/**
+ * @brief How to color the user list
+ */
+enum e_coloring_type
+{
+	CT_NONE,
+	CT_DISTANCE,
+	CT_AGE,
+	CT_SCORE,
+	CT_PAYMENT,
+	CT_ENTERED
+};
+
+/**
+ * @brief Template class for a piece of data that must be retrieved
+ *
+ * This class handles the storage, retries and delays required to obtain a piece
+ * of data..
+ */
+template <class T> 
+class LLAvatarListDatum
+{
+public:
+	LLAvatarListDatum()
+	{
+		mMaxPending = 32;
+
+		mRetryDelay = 0.0f;
+		mRequestDelay = 1.0f;
+		mFirstRequestTimeout = 16.0f;
+		mMaxRequestTimeout = 8192.0f;
+
+		mRequestTimer.start();
+		mRequestDelayTimer.start();
+		mStatus = DATA_UNKNOWN;
+		
+	}
+
+	/**
+	 * @brief Determines whether a data re-request is needed
+	 * @returns TRUE if a re-request is needed
+	 *
+	 * This function takes the decision based on whether the data has
+	 * been already retrieved, the last data request was long enough ago,
+	 * and the request rate being low enough.
+	 *
+	 * A FALSE return value doesn't mean that everything is OK, only that
+	 * a retry shouldn't be made at this time.
+	 */
+	BOOL retryNeeded()
+	{
+		switch(mStatus)
+		{
+			case DATA_UNKNOWN:
+			case DATA_REQUESTING:
+			case DATA_ERROR:
+				// Don't request too many at once
+				if ( mPending >= mMaxPending )
+				{
+					return FALSE;
+				}
+
+				// Don't re-request if the requests would be made too fast
+				if ( mRequestDelayTimer.getElapsedTimeF32() < mRequestDelay )
+				{
+					return FALSE;
+				}
+
+				// Re-request if retry timeout was reached
+				return ( mRequestTimer.getElapsedTimeF32() > mRetryDelay );
+			case DATA_RETRIEVED:
+				return FALSE;
+		}
+
+		return FALSE;
+	}
+
+	/**
+	 * @brief Notifies the object that a request was started
+	 */
+	void requestStarted()
+	{
+
+		if ( mStatus != DATA_REQUESTING )
+		{
+			mPending++;
+			//llinfos << "Pe
+		}
+
+		mStatus = DATA_REQUESTING;
+
+		if ( mRetryDelay == 0 )
+		{
+			mRetryDelay = mFirstRequestTimeout;
+		}
+		else
+		{
+			if ( mRetryDelay < mMaxRequestTimeout )
+			{
+				mRetryDelay *= 2;
+			}
+		}
+
+		mRequestTimer.start();
+		mRequestDelayTimer.start();
+	}
+
+	/**
+	 * @brief retryNeeded and requestStarted combined
+	 * @returns TRUE if a re-request is needed
+	 */
+	BOOL requestIfNeeded()
+	{
+		BOOL ret = retryNeeded();
+		if ( ret )
+		{
+			requestStarted();
+		}
+
+		return ret;
+	}
+
+	/**
+	 * @brief Returns the request status
+	 */
+	DATA_STATUS getStatus()
+	{
+		if ( mStatus == DATA_REQUESTING 
+		     && mRequestTimer.getElapsedTimeF32() > mRetryDelay )
+		{
+			mStatus = DATA_ERROR;
+
+			// Consider this request failed, so the slot is free.
+			mPending--;
+		}
+
+		return mStatus;
+	}
+
+	T& getValue()
+	{
+		return mValue;
+	}
+
+	void setValue(T val)
+	{
+		if ( mStatus != DATA_RETRIEVED )
+		{
+			mPending--;
+		}
+
+		mValue = val;
+		mStatus = DATA_RETRIEVED;
+	}
+
+	void setRequestDelay(F32 delay)
+	{
+		mRequestDelay = delay;
+	}
+
+	void setMaxPending(U32 count)
+	{
+		mMaxPending = count;
+	}
+private:
+	friend class LLFloaterAvatarList;
+	T mValue;
+
+	DATA_STATUS mStatus;
+
+	
+	/**
+	 * @brief How long to wait before trying to re-request the data
+	 */
+	F32 mRetryDelay;
+
+	/**
+	 * @brief How long to wait on the first attempt to get data
+	 */
+	F32 mFirstRequestTimeout;
+
+	/**
+	 * @brief Maximum delay between retries
+	 *
+	 * On failure, timeout gets doubled until it reaches this value
+	 */
+	F32 mMaxRequestTimeout;
+
+	/**
+	 * @brief Timer for the current request
+	 */
+	LLTimer mRequestTimer;
+
+
+
+	/**
+	 * @brief Timer used to separate requests, to avoid flooding the server
+	 */
+	static LLTimer mRequestDelayTimer;
+
+	/**
+	 * @brief Amount of pending requests
+	 */
+	static U32 mPending;
+
+
+	/**
+	 * @brief Time between requests of the same type
+	 */
+	F32 mRequestDelay;
+
+	/**
+	 * @brief Maximum amount of pending requests
+	 */
+	U32 mMaxPending;
+};
+
+template <class T> LLTimer LLAvatarListDatum<T>::mRequestDelayTimer;
+template <class T> U32 LLAvatarListDatum<T>::mPending = 0;
+
+//template <class T> F32 LLAvatarListDatum<T>::mRequestDelay;
+
+
+
+/**
+ * @brief A TrustNet score
+ */
+struct LLAvListTrustNetScore
+{
+	F32 Score;
+	std::string Type;
+
+	LLAvListTrustNetScore(std::string type = "<uninitialized>", F32 score = 0.0f);
+};
+
+/**
+ * @brief Avatar payment information
+ */
+struct LLAvatarInfo
+{
+	PAYMENT_TYPE Payment;
+	ACCOUNT_TYPE Account;
+	struct tm    BirthDate;
+
+	LLAvatarInfo();
+	LLAvatarInfo(PAYMENT_TYPE payment, ACCOUNT_TYPE account, struct tm birth);
+	S32 getAge();
+};
+
+/**
+ * @brief Misc data about the avatar
+ * This class holds replies from third party databases. There's no fixed format,
+ * and interpretation is left to the end user.
+ */
+struct LLMiscDBInfo
+{
+	std::string data;
+
+	LLMiscDBInfo(std::string d)
+	{
+		data = d;
+	}
+
+	LLMiscDBInfo()
+	{
+		data = "";
+	}
+};
+
+
+/**
+ * @brief This class is used to hold data about avatars.
+ * We cache data about avatars to avoid repeating requests in this class.
+ * Instances are kept in a map<LLAvatarListEntry>. We keep track of the
+ * frame where the avatar was last seen. Avatars that are old enough are
+ * not added to the visible list, but still kept around to cache the account
+ * info data (like the birth date and the payment data)
+ */
+class LLAvatarListEntry {
+public:
+
+
+	/**
+	 * @brief Initializes a list entry
+	 * @param id Avatar's key
+	 * @param name Avatar's name
+	 * @param position Avatar's current position
+	 * @param isLinden TRUE if the avatar is a Linden
+	 * @param isCoarse TRUE if the avatar is only in the coarse location list
+	 * @param regionname if the region is not the same as the current agent region, else empty string
+	 */
+	LLAvatarListEntry(const LLUUID& id = LLUUID::null, const std::string &name = "", const LLVector3d &position = LLVector3d::zero, BOOL isLinden = FALSE, BOOL isCoarse = FALSE, std::string regionname = std::string() ) :
+		mID(id), mName(name), mPosition(position), mMarked(FALSE), mFocused(FALSE), mIsLinden(isLinden), mIsCoarse(isCoarse), mRegionName(regionname), mActivityType(ACTIVITY_NEW), mAccountTitle(""),
+		mUpdateTimer(), mActivityTimer(), mFrame(0)
+	{
+		mTrustNetScore.setRequestDelay(0.1f);
+		mTrustNetScore.setMaxPending(8);
+		mFrame = gFrameCount;
+		mEnteredTimer.start();
+	}
+
+	/**
+	 * Update world position.
+	 * Affects age.
+	 */	
+	void setPosition(LLVector3d position);
+
+	LLVector3d getPosition();
+
+	/**
+	 * @brief Returns the age of this entry in frames
+	 *
+	 * This is only used for determining whether the avatar is still around.
+	 * @see getEntryAgeSeconds
+	 */
+	U32 getEntryAgeFrames();
+
+	/**
+	 * @brief Returns the age of this entry in seconds
+	 */
+	F32 getEntryAgeSeconds();
+
+	/**
+	 * @brief Returns time when avatar entered the list
+	 */
+	F32 getEntryEnteredSeconds();
+
+	/**
+	 * @brief Returns the name of the avatar
+	 */
+	std::string getName();
+
+	void setName(std::string name);
+
+	LLUUID getID();
+
+	void setID(LLUUID id);
+
+	/**
+	 * @brief Whether the avatar is a Linden
+	 */
+	BOOL getIsLinden();
+
+	/**
+	 * @brief whether the avatar entry was taken from the coarse location update
+	 */
+	BOOL getIsCoarse() { return mIsCoarse; }
+
+	/**
+	 * @brief returns the agents region name or "" if same as main agent
+	 */
+	std::string &getRegionName() { return mRegionName; }
+
+	/**
+	 * @brief returns true if agent is on same region
+	 */
+	BOOL getIsSameRegion() { return mRegionName.empty(); }
+
+	/**
+	 * @brief returns reference to the HUDObject-pointer for this avatar if any
+	 */
+	LLPointer<LLHUDObject> &getHudObject() { return mHudObject; }
+
+	/**
+	 * @brief Sets a custom title for the account
+	 * @note Changes account type to ACCOUNT_CUSTOM
+	 */
+	void setAccountCustomTitle(std::string &title);
+
+	/**
+	 * @brief Gets the custom title for the account
+	 */
+	std::string getAccountCustomTitle();
+
+	/**
+	 * @brief Sets the activity type for this avatar
+	 *
+	 * Has no effect if the specified type is lower priority than the
+	 * current one.
+	 */
+	void setActivity(ACTIVITY_TYPE activity);
+
+	/**
+	 * @brief Returns the activity type
+	 */
+	ACTIVITY_TYPE getActivity();
+
+	/**
+	 * @brief Sets the 'focus' status on this entry (camera focused on this avatar)
+	 */
+	void setFocus(BOOL value) { mFocused = value; }
+
+	BOOL isFocused() { return mFocused; }
+
+
+	BOOL isMarked();
+
+	/**
+	 * @brief Returns whether the item is dead and shouldn't appear in the list
+	 * @returns TRUE if dead
+	 */
+	BOOL isDead();
+
+	void toggleMark();
+private:
+	friend class LLFloaterAvatarList;
+
+	LLUUID mID;
+	std::string mName;
+	LLVector3d mPosition;
+	BOOL mMarked;
+	BOOL mFocused;
+	BOOL mIsLinden;
+	BOOL mIsCoarse;
+	std::string mRegionName;
+	LLPointer<LLHUDObject> mHudObject; /* holds the text on screen, if we don't keep this it won't reach a stable position on-screen but gets recreated for each update */
+
+
+	ACTIVITY_TYPE mActivityType;
+
+	std::string mAccountTitle;
+
+	LLAvatarListDatum<LLAvListTrustNetScore> mTrustNetScore;
+	LLAvatarListDatum<LLAvatarInfo>   mAvatarInfo;
+	LLAvatarListDatum<LLMiscDBInfo> mMiscInfo;
+
+	/**
+	 * @brief Timer to keep track of whether avatars are still there
+	 */
+	LLTimer mUpdateTimer;
+
+	/**
+	 * @brief Timer for avatar activities
+	 */
+	LLTimer mActivityTimer;
+
+	/**
+	 * @brief Last frame when this avatar was updated
+	 */
+	U32 mFrame;
+	
+	/**
+	 * @brief Time when avatar entered the list
+	 */
+	LLTimer mEnteredTimer;
+};
+
+
+/**
+ * @brief Avatar List
+ * Implements an avatar scanner in the client.
+ *
+ * This is my first attempt to modify the SL source. This code is intended
+ * to have a dual purpose: doing the task, and providing an example of how
+ * to do it. For that reason, it's going to be commented as exhaustively
+ * as possible.
+ *
+ * Since I'm very new to C++ any suggestions on coding, style, etc are very
+ * welcome.
+ */
+class LLFloaterAvatarList : public LLFloater
+{
+public:
+	/**
+	 * @brief Creates and initializes the LLFloaterAvatarList
+	 * Here the interface is created, and callbacks are initialized.
+	 */
+	LLFloaterAvatarList();
+	~LLFloaterAvatarList();
+
+	void show();
+
+	/**
+	 * @brief Hide when user closes the list.
+	 */
+	virtual void onClose(bool app_quitting) { setVisible(FALSE); }
+
+	/**
+	 * @brief Toggles interface visibility
+	 * There is only one instance of the avatar scanner at any time.
+	 */
+	static void toggle(void*);
+
+	/**
+	 * @brief Returns floater visibility status
+	 */
+	static BOOL visible(void*);
+
+	/**
+	 * @brief Updates the internal avatar list with the currently present avatars.
+	 */
+	void updateAvatarList();
+
+	/**
+	 * @brief Refresh avatar list (display)
+	 */
+	void refreshAvatarList();
+
+	/**
+	 * @brief Process the reply to a request for avatar properties
+	 */
+	static void processAvatarPropertiesReply(LLMessageSystem *msg, void**);
+
+	/**
+	 * @brief Returns TRUE if the avatar is in the list of known avatars
+	 * @returns TRUE if the avatar is in the list
+	 */
+	BOOL avatarIsInList(LLUUID avatar);
+
+	/**
+	 * @brief Returns the entry for an avatar, if preset
+	 * @returns Pointer to avatar entry, NULL if not found.
+	 */
+	LLAvatarListEntry* getAvatarEntry(LLUUID avatar);
+
+	/**
+	 * @brief Requests a TrustNet score from the Adapter
+	 * @param avatar Avatar for which to request the score
+	 * @param name Avatar's name
+	 * @param type Score type ("behavior", etc)
+	 */
+	void requestTrustNetScore(LLUUID avatar, const std::string name, const std::string type);
+
+	/**
+	 * @brief Requests information about the avatar from the database
+	 * @param avatar Avatar about whom we need information
+	 * @param name Avatar's name
+	 */
+	void requestMiscInfo(LLUUID avatar, const std::string name);
+
+	/**
+	 * @brief Handles IM messages to process the ones that are replies to database requests
+	 * @param from_id Key of the avatar sending the message
+	 * @param message Content
+	 * @returns TRUE if the message was handled. This will suppress further processing in llviewermessage.cpp
+	 */
+	static BOOL handleIM(LLUUID from_id, const std::string message);
+
+	/**
+	 * @brief Process a reply from the TrustNet Adapter
+	 * This handles replies from the TrustNet adapter, such as score results.
+	 */
+	static void processTrustNetReply(char *reply);
+
+	/**
+	 * @brief Returns a string with the selected names in the list
+	 */
+	std::string getSelectedNames(const std::string& separator = ", ");
+
+	/** @brief render a debug beacon for the coarse avatars */
+	void renderDebugBeacons();
+
+	/** @brief if avatar beacons shall be rendered */
+	static bool getRenderAvatarBeacons(void *data) { return sRenderAvatarBeacons; }
+
+	/** @brief set if avatar beacons shall be rendered */
+	static void toggleRenderAvatarBeacons(void *data) { sRenderAvatarBeacons = !sRenderAvatarBeacons; }
+
+	/** @brief set if avatar beacons shall be rendered */
+	static void setRenderAvatarBeacons(bool do_render ) { sRenderAvatarBeacons = do_render; }
+
+private:
+	// when a line editor loses keyboard focus, it is committed.
+	// commit callbacks are named onCommitWidgetName by convention.
+	//void onCommitBaz(LLUICtrl* ctrl, void *userdata);
+	
+	enum AVATARS_COLUMN_ORDER
+	{
+		LIST_AVATAR_ICON,
+		LIST_AVATAR_NAME,
+		LIST_DISTANCE,
+		LIST_AGE,
+		/*LIST_SCORE,*/
+		LIST_PAYMENT,
+		LIST_ACTIVITY,
+		LIST_ENTERED,
+	};
+
+	typedef void (*avlist_command_t)(const LLUUID &avatar, const std::string &name);
+
+	void speakText(S32 channel, EChatType type, std::string text);
+
+	/**
+	 * @brief Removes focus status from all avatars in list
+	 */
+	void removeFocusFromAll();
+
+	/**
+	 * @brief Focus camera on previous avatar
+	 * @param marked_only Whether to choose only marked avatars
+	 */
+	void focusOnPrev(BOOL marked_only);
+
+	/**
+	 * @brief Focus camera on next avatar
+	 * @param marked_only Whether to choose only marked avatars
+	 */
+	void focusOnNext(BOOL marked_only);
+
+	/**
+	 * @brief Updates the internal avatar list from the coarse location list if not already present
+	 */
+	void updateFromCoarse();
+
+	/**
+	 * @brief Purge hud object map from entries no longer in the list
+	 */
+	void purgeAvatarHUDMap();
+
+	/**
+	 * @brief Handler for the "refresh" button click.
+	 * I am unsure whether this is actually necessary at the time.
+	 *
+	 * LL: By convention, button callbacks are named onClickButtonLabel
+	 * @param userdata Pointer to user data (LLFloaterAvatarList instance)
+	 */
+	//static void onClickRefresh(void* userdata);
+
+	static void onClickProfile(void *userdata);
+	static void onClickIM(void *userdata);
+	static void onClickTrack(void *userdata);
+	static void onClickMark(void *userdata);
+
+	static void onClickGohomerMark(void *userdata);
+	static void onClickGohomerWarn(void *userdata);
+	static void onClickGohomerEject(void *userdata);
+	static void onClickGohomerSendAway(void *userdata);
+	static void onClickGohomerSendHome(void *userdata);
+	static void onClickGohomerSendHomeByKey(void *userdata);
+
+	static void onClickGohomerOff(void *userdata);
+
+
+	static void onClickPrevInList(void *userdata);
+	static void onClickNextInList(void *userdata);
+	static void onClickPrevMarked(void *userdata);
+	static void onClickNextMarked(void *userdata);
+	static void onClickGetKey(void *userdata);
+
+	static void onClickTrustNetRate(void *userdata);
+	static void onClickTrustNetExplain(void *userdata);
+	static void onClickTrustNetWebsite(void *userdata);
+	static void onClickTrustNetGetPassword(void *userdata);
+	static void onClickTrustNetRenew(void *userdata);
+
+	static void onDoubleClick(void *userdata);
+
+	static void onClickFreeze(void *userdata);
+	static void onClickEject(void *userdata);
+//	static void onClickBan(void *userdata);
+//	static void onClickUnban(void *userdata);
+	static void onClickMute(void *userdata);
+//	static void onClickUnmute(void *userdata);
+	static void onClickAR(void *userdata);
+	static void onClickTeleport(void *userdata);
+	static void onClickEjectFromEstate(void *userdata);
+
+	static void callbackFreeze(S32 option, void *userdata);
+//	static void callbackUnfreeze(S32 option, void *userdata);
+	static void callbackEject(S32 option, void *userdata);
+//	static void callbackBan(S32 option, void *userdata);
+	static void callbackMute(S32 option, void *userdata);
+//	static void callbackUnmute(void *userdata);
+	static void callbackAR(void *userdata);
+	static void callbackEjectFromEstate(S32 option, void *userdata);
+
+	void doCommand(avlist_command_t cmd);
+
+	/**
+	 * @brief Cleanup avatar list, removing dead entries from it.
+	 * This lets dead entries remain for some time. This makes it possible
+	 * to keep people passing by in the list long enough that it's possible
+	 * to do something to them.
+	 */
+	void expireAvatarList();
+
+	/**
+	 * @brief Perform a Luskwood Gohomer command on the selected users
+	 * @param cmd Command (for example "gowarn")
+	 */
+	void luskwoodCommand(std::string cmd);
+
+	/**
+	 * @brief Handle the results of a gohomer confirmation dialog
+	 * @param option Option selected (0=ok, 1=cancel)
+	 * @param data this
+	 */
+	static void handleLuskwoodDialog(S32 option, void* data);
+
+	/**
+	 * @brief Handle the results of a gohomer turn off dialog
+	 * @param option Option selected (0=ok, 1=cancel)
+	 * @param data this
+	 */
+	static void handleLuskwoodGohomerOffDialog(S32 option, void* data);
+
+	/**
+	 * @brief Process the AR queue
+	 * This generates AR reports for the queued avatars
+	 */
+	void processARQueue();
+		
+private:
+	/**
+	 * @brief Pointer to the avatar scroll list
+	 */
+	LLScrollListCtrl*			mAvatarList;
+	std::map<LLUUID, LLAvatarListEntry>	mAvatars;
+
+	/**
+	 * @brief Queue of abuse reports
+	 */
+	std::queue<LLUUID> mARQueue;
+
+	/**
+	 * @brief List of AR screens opened
+	 * We don't open them on creation to capture a clean screenshot. They're
+	 * opened only after finishing the process.
+	 */
+	std::queue<LLFloaterReporter*> mARReporterQueue;
+
+	/**
+	 * @brief Last time during which an AR was submitted
+	 * Used to give the camera some time to move between avatars. Perhaps this way
+	 * of doing things isn't ideal, though.
+	 */
+	S32 mARLastFrame;
+	
+	
+	/**
+	 * @brief Request information about the specified avatar
+	 * @param avid Avatar id to request info about
+	 */
+	void sendAvatarPropertiesRequest(LLUUID avid);
+
+	void checkTrackingStatus();
+
+	/**
+	 * @brief Returns the color for the specified avatar entry
+	 * @param ent Avatar entry
+	 * @param distance Distance from the user
+	 */
+	//LLColor4 getAvatarColor(LLAvatarListEntry *ent, F32 distance);
+	LLColor4 getAvatarColor(LLAvatarListEntry *ent, F32 distance, e_coloring_type type);
+
+	/**
+	 * @brief Replace variables in string
+	 * @param str String to replace variables in
+	 * @param avatar Value for $KEY
+	 * @param name Value for $NAME
+	 */
+	static void replaceVars(std::string &str, LLUUID avatar, const std::string& name);
+
+	// tracking data
+	BOOL mTracking;             // tracking?
+	BOOL mTrackByLocation;      // TRUE if tracking by known position, FALSE for tracking a friend
+	LLUUID mTrackedAvatar;     // who we're tracking
+
+	/**
+	 * @brief Used to delay avatar data requests
+	 */
+	LLTimer mDataRequestTimer;
+
+	/**
+	 * @brief Used to delay trustnet requests
+	 */
+	LLTimer mTrustNetTimer;
+
+	/**
+	 * @brief Luskwood command to execute
+	 */
+	std::string mLuskwoodCommand;
+
+	/**
+	 * @brief Avatar the camera is focused on
+	 */
+	LLUUID mFocusedAvatar;
+
+	/** @brief holds state of avatar beacon render setup */
+	static bool sRenderAvatarBeacons;
+
+
+	std::map< LLUUID, LLPointer<LLHUDObject> > mHudObjectMap;
+};
+
+/**
+ * Pointer to global LLFloaterAvatarList instance.
+ * This is initialized in llviewerwindow.cpp
+ * @see llviewerwindow.cpp
+ */
+extern LLFloaterAvatarList* gFloaterAvatarList;
diff --git a/indra/newview/llfloaterpreference.cpp b/indra/newview/llfloaterpreference.cpp
index 17a59cc..fddddb3 100644
--- a/indra/newview/llfloaterpreference.cpp
+++ b/indra/newview/llfloaterpreference.cpp
@@ -61,6 +61,7 @@
 #include "llpanelLCD.h"
 #include "llpanelmsgs.h"
 #include "llpanelweb.h"
+#include "llpaneldatabase.h"
 #include "llpanelskins.h"
 #include "llprefschat.h"
 #include "llprefsvoice.h"
@@ -192,6 +193,10 @@ LLPreferenceCore::LLPreferenceCore(LLTabContainer* tab_container, LLButton * def
 	mTabContainer->addTabPanel(mSkinsPanel, mSkinsPanel->getLabel(), FALSE, onTabChanged, mTabContainer);
 	mSkinsPanel->setDefaultBtn(default_btn);
 
+	mDBPanel = new LLPanelDatabase();
+	mTabContainer->addTabPanel(mDBPanel, mDBPanel->getLabel(), FALSE, onTabChanged, mTabContainer);
+	mDBPanel->setDefaultBtn(default_btn);
+
 	if (!mTabContainer->selectTab(gSavedSettings.getS32("LastPrefTab")))
 	{
 		mTabContainer->selectFirstTab();
@@ -272,6 +277,7 @@ void LLPreferenceCore::apply()
 	LLFloaterHardwareSettings::instance()->apply();
 
 	mWebPanel->apply();
+	mDBPanel->apply();
 #if LL_LCD_COMPILE
 	// only add this option if we actually have a logitech keyboard / speaker set
 	if (gLcdScreen->Enabled())
@@ -300,6 +306,7 @@ void LLPreferenceCore::cancel()
 	LLFloaterHardwareSettings::instance()->cancel();
 
 	mWebPanel->cancel();
+	mDBPanel->cancel();
 #if LL_LCD_COMPILE
 	// only add this option if we actually have a logitech keyboard / speaker set
 	if (gLcdScreen->Enabled())
diff --git a/indra/newview/llfloaterpreference.h b/indra/newview/llfloaterpreference.h
index f48696f..4ab27c7 100644
--- a/indra/newview/llfloaterpreference.h
+++ b/indra/newview/llfloaterpreference.h
@@ -50,6 +50,7 @@ class LLPanelAudioPrefs;
 class LLPanelDebug;
 class LLPanelNetwork;
 class LLPanelWeb;
+class LLPanelDatabase;
 class LLMessageSystem;
 class LLPrefsChat;
 class LLPrefsVoice;
@@ -92,6 +93,7 @@ private:
 	LLPanelWeb				*mWebPanel;
 	LLPanelMsgs				*mMsgPanel;
 	LLPanelLCD				*mLCDPanel;
+	LLPanelDatabase				*mDBPanel;
 };
 
 // Floater to control preferences (display, audio, bandwidth, general.
diff --git a/indra/newview/llfloaterreporter.cpp b/indra/newview/llfloaterreporter.cpp
index 412494e..2138c1d 100644
--- a/indra/newview/llfloaterreporter.cpp
+++ b/indra/newview/llfloaterreporter.cpp
@@ -540,7 +540,7 @@ void LLFloaterReporter::showFromMenu(EReportType report_type)
 
 
 // static
-void LLFloaterReporter::showFromObject(const LLUUID& object_id)
+LLFloaterReporter* LLFloaterReporter::showFromObject(const LLUUID& object_id, bool show)
 {
 	LLFloaterReporter* f = createNewAbuseReporter();
 	f->center();
@@ -557,7 +557,16 @@ void LLFloaterReporter::showFromObject(const LLUUID& object_id)
 	// Need to deselect on close
 	f->mDeselectOnClose = TRUE;
 
-	f->open();		/* Flawfinder: ignore */
+	if ( show )
+	{
+		f->open();		/* Flawfinder: ignore */
+	}
+	else
+	{
+		gDialogVisible = FALSE;
+	}
+
+	return f;
 }
 
 
diff --git a/indra/newview/llfloaterreporter.h b/indra/newview/llfloaterreporter.h
index 86bc605..165dfc4 100644
--- a/indra/newview/llfloaterreporter.h
+++ b/indra/newview/llfloaterreporter.h
@@ -93,7 +93,7 @@ public:
 	// Enables all buttons
 	static void showFromMenu(EReportType report_type);
 
-	static void showFromObject(const LLUUID& object_id);
+	static LLFloaterReporter* showFromObject(const LLUUID& object_id, bool show = true);
 
 	static void onClickSend			(void *userdata);
 	static void onClickCancel		(void *userdata);
diff --git a/indra/newview/llpaneldatabase.cpp b/indra/newview/llpaneldatabase.cpp
new file mode 100644
index 0000000..f510130
--- /dev/null
+++ b/indra/newview/llpaneldatabase.cpp
@@ -0,0 +1,149 @@
+/** 
+ * @file llpaneldatabase.cpp
+ * @brief Database preferences panel
+ * @author Dale Glass
+ *
+ * Copyright (c) 2003-2007, Linden Research, Inc.
+ * 
+ * The source code in this file ("Source Code") is provided by Linden Lab
+ * to you under the terms of the GNU General Public License, version 2.0
+ * ("GPL"), unless you have obtained a separate licensing agreement
+ * ("Other License"), formally executed by you and Linden Lab.  Terms of
+ * the GPL can be found in doc/GPL-license.txt in this distribution, or
+ * online at http://secondlife.com/developers/opensource/gplv2
+ * 
+ * There are special exceptions to the terms and conditions of the GPL as
+ * it is applied to this Source Code. View the full text of the exception
+ * in the file doc/FLOSS-exception.txt in this software distribution, or
+ * online at http://secondlife.com/developers/opensource/flossexception
+ * 
+ * By copying, modifying or distributing this software, you acknowledge
+ * that you have read and understood your obligations described above,
+ * and agree to abide by those obligations.
+ * 
+ * ALL LINDEN LAB SOURCE CODE IS PROVIDED "AS IS." LINDEN LAB MAKES NO
+ * WARRANTIES, EXPRESS, IMPLIED OR OTHERWISE, REGARDING ITS ACCURACY,
+ * COMPLETENESS OR PERFORMANCE.
+ */
+
+#include "llviewerprecompiledheaders.h"
+
+#include "llpaneldatabase.h"
+
+#include "llscrolllistctrl.h"
+#include "llviewerwindow.h"
+#include "llviewercontrol.h"
+#include "lluictrlfactory.h"
+#include "llfloateravatarpicker.h"
+#include "llagentdata.h"
+#include "llnotify.h"
+
+//-----------------------------------------------------------------------------
+LLPanelDatabase::LLPanelDatabase() :
+	LLPanel("Messages Panel")
+{
+	LLUICtrlFactory::getInstance()->buildPanel(this, "panel_preferences_database.xml");
+	childSetAction("change_avatar_btn", onClickChangeAvatar, this);
+};
+
+//-----------------------------------------------------------------------------
+// postBuild()
+//-----------------------------------------------------------------------------
+
+void LLPanelDatabase::refresh() 
+{
+	llinfos << "Loading settings" << llendl;
+	//mAvatarName      = gSavedPerAccountSettings.getString("DBAvatarName");
+	//mAvatarKey.set(gSavedPerAccountSettings.getString("DBAvatarKey"));
+	//mURL             = gSavedSettings.getString("DBURL");;
+	//mUsername        = gSavedSettings.getString("DBURLUsername");;
+	//mPassword        = gSavedSettings.getString("DBURLPassword");;
+	//mSendPattern     = gSavedSettings.getString("DBSendPattern");;
+	//mPositivePattern = gSavedSettings.getString("DBPositivePattern");;
+	//mNegativePattern = gSavedSettings.getString("DBNegativePattern");;
+	//mDeniedPattern   = gSavedSettings.getString("DBDeniedPattern");;
+
+}
+
+BOOL LLPanelDatabase::postBuild()
+{
+	refresh();
+
+	llinfos << "Setting settings in window" << llendl;
+	childSetText("db_avatar"       ,mAvatarName );
+	childSetText("db_url"          ,mURL );
+	childSetText("db_url_username" ,mUsername );
+	childSetText("db_url_password" ,mPassword );
+	childSetText("send_pattern"    ,mSendPattern );
+	childSetText("positive_pattern",mPositivePattern );
+	childSetText("negative_pattern",mNegativePattern );
+	childSetText("denied_pattern"  ,mDeniedPattern );
+
+	return TRUE;
+}
+
+
+void LLPanelDatabase::draw()
+{
+	LLPanel::draw();
+}
+
+void LLPanelDatabase::apply()
+{
+	//llinfos << "Saving settings" << llendl;
+
+	//gSavedPerAccountSettings.setString("DBAvatarName", childGetText("db_avatar").c_str());
+	//gSavedPerAccountSettings.setString("DBAvatarKey", mAvatarKey.asString());
+	//gSavedSettings.setString("DBURL", childGetText("db_url").c_str());
+	//gSavedSettings.setString("DBURLUsername", childGetText("db_url_username").c_str());
+	//gSavedSettings.setString("DBURLPassword", childGetText("db_url_password").c_str());
+
+	//gSavedSettings.setString("DBSendPattern", childGetText("send_pattern").c_str());
+	//gSavedSettings.setString("DBPositivePattern", childGetText("positive_pattern").c_str());
+	//gSavedSettings.setString("DBNegativePattern", childGetText("negative_pattern").c_str());
+	//gSavedSettings.setString("DBDeniedPattern", childGetText("denied_pattern").c_str());	
+
+
+}
+
+void LLPanelDatabase::cancel()
+{
+	
+}
+
+//static
+void LLPanelDatabase::onClickChangeAvatar(void *userdata)
+{
+	LLFloaterAvatarPicker::show(onPickAvatar, userdata, FALSE, TRUE);
+}
+
+//static
+void LLPanelDatabase::onPickAvatar(const std::vector<std::string>& names,
+                                   const std::vector<LLUUID>& ids,
+                                   void* user_data)
+{
+	if (names.empty()) return;
+	if (ids.empty()) return;
+
+	LLPanelDatabase *self = (LLPanelDatabase*)user_data;
+
+#ifndef LL_DEBUG
+	// TODO: LL_DEBUG isn't the right one, what is it?
+	//
+	// Using yourself as the database avatar should work, and be useful
+	// for debugging, but it's not something a normal user should be able
+	// to do.
+	
+//	if(ids[0] == gAgentID)
+//	{
+//		LLNotifyBox::showXml("AddSelfDatabase");
+//		return;
+//	}
+#endif
+
+	self->childSetText("db_avatar", names[0]);
+	self->mAvatarName = names[0];
+	self->mAvatarKey = ids[0];
+}
+
+
diff --git a/indra/newview/llpaneldatabase.h b/indra/newview/llpaneldatabase.h
new file mode 100644
index 0000000..e08a453
--- /dev/null
+++ b/indra/newview/llpaneldatabase.h
@@ -0,0 +1,65 @@
+/** 
+ * @file llprefschat.h
+ * @brief Database preferences panel
+ *
+ * Copyright (c) 2003-2007, Linden Research, Inc.
+ * 
+ * The source code in this file ("Source Code") is provided by Linden Lab
+ * to you under the terms of the GNU General Public License, version 2.0
+ * ("GPL"), unless you have obtained a separate licensing agreement
+ * ("Other License"), formally executed by you and Linden Lab.  Terms of
+ * the GPL can be found in doc/GPL-license.txt in this distribution, or
+ * online at http://secondlife.com/developers/opensource/gplv2
+ * 
+ * There are special exceptions to the terms and conditions of the GPL as
+ * it is applied to this Source Code. View the full text of the exception
+ * in the file doc/FLOSS-exception.txt in this software distribution, or
+ * online at http://secondlife.com/developers/opensource/flossexception
+ * 
+ * By copying, modifying or distributing this software, you acknowledge
+ * that you have read and understood your obligations described above,
+ * and agree to abide by those obligations.
+ * 
+ * ALL LINDEN LAB SOURCE CODE IS PROVIDED "AS IS." LINDEN LAB MAKES NO
+ * WARRANTIES, EXPRESS, IMPLIED OR OTHERWISE, REGARDING ITS ACCURACY,
+ * COMPLETENESS OR PERFORMANCE.
+ */
+
+#ifndef LLPREFSDB_H
+#define LLPREFSDB_H
+
+#include "llpanel.h"
+
+class LLPanelDatabase : public LLPanel
+{
+public:
+	LLPanelDatabase();
+	virtual ~LLPanelDatabase() {};
+
+	virtual BOOL postBuild();
+	virtual void draw();
+	virtual void refresh();
+
+	void apply();
+	void cancel();
+
+	static void onClickChangeAvatar(void *userdata);
+	static void onPickAvatar(const std::vector<std::string>& names,
+                                 const std::vector<LLUUID>& ids,
+                                 void* user_data);
+
+protected:
+	std::string mAvatarName;
+	LLUUID   mAvatarKey;
+	std::string mURL;
+	std::string mUsername;
+	std::string mPassword;
+	std::string mSendPattern;
+	std::string mPositivePattern;
+	std::string mNegativePattern;
+	std::string mDeniedPattern;
+
+};
+
+
+#endif // LL_PREFSDB_H
diff --git a/indra/newview/llstartup.cpp b/indra/newview/llstartup.cpp
index 64f84fe..3a20faa 100644
--- a/indra/newview/llstartup.cpp
+++ b/indra/newview/llstartup.cpp
@@ -3095,7 +3095,7 @@ void register_viewer_callbacks(LLMessageSystem* msg)
 	msg->setHandlerFunc("ParcelDwellReply",
 		LLViewerParcelMgr::processParcelDwellReply);
 
-	msg->setHandlerFunc("AvatarPropertiesReply",
+	msg->addHandlerFunc("AvatarPropertiesReply",
 						LLPanelAvatar::processAvatarPropertiesReply);
 	msg->setHandlerFunc("AvatarInterestsReply",
 						LLPanelAvatar::processAvatarInterestsReply);
diff --git a/indra/newview/lltoolbar.cpp b/indra/newview/lltoolbar.cpp
index 33edb3e..dde9955 100644
--- a/indra/newview/lltoolbar.cpp
+++ b/indra/newview/lltoolbar.cpp
@@ -50,6 +50,7 @@
 #include "llvoavatar.h"
 #include "lltooldraganddrop.h"
 #include "llinventoryview.h"
+#include "llfloateravatarlist.h"
 #include "llfloaterchatterbox.h"
 #include "llfloaterfriends.h"
 #include "llfloatersnapshot.h"
@@ -152,6 +153,9 @@ BOOL LLToolBar::postBuild()
 	childSetAction("inventory_btn", onClickInventory, this);
 	childSetControlName("inventory_btn", "ShowInventory");
 
+	childSetAction("avatar_list_btn", onClickAvatarList, this);
+	childSetControlName("inventory_btn", "ShowAvatarList");
+
 	for (child_list_const_iter_t child_iter = getChildList()->begin();
 		 child_iter != getChildList()->end(); ++child_iter)
 	{
@@ -519,3 +523,8 @@ void LLToolBar::onClickInventory(void*)
 	handle_inventory(NULL);
 }
 
+// static
+void LLToolBar::onClickAvatarList(void*)
+{
+	LLFloaterAvatarList::toggle(NULL);
+}
diff --git a/indra/newview/lltoolbar.h b/indra/newview/lltoolbar.h
index 094d016..59d0246 100644
--- a/indra/newview/lltoolbar.h
+++ b/indra/newview/lltoolbar.h
@@ -82,6 +82,7 @@ public:
 	static void onClickRadar(void* data);
 	static void onClickMap(void* data);
 	static void onClickInventory(void* data);
+	static void onClickAvatarList(void* data);
 
 	static F32 sInventoryAutoOpenTime;
 
diff --git a/indra/newview/llviewermenu.cpp b/indra/newview/llviewermenu.cpp
index 0a53466..5aac195 100644
--- a/indra/newview/llviewermenu.cpp
+++ b/indra/newview/llviewermenu.cpp
@@ -208,6 +208,7 @@
 #include "pipeline.h"
 #include "llappviewer.h"
 #include "roles_constants.h"
+#include "llfloateravatarlist.h"
 #include "llviewerjoystick.h"
 #include "llwlanimator.h"
 #include "llwlparammanager.h"
@@ -5194,6 +5195,10 @@ class LLShowFloater : public view_listener_t
 		{
 			LLFloaterAbout::show(NULL);
 		}
+		else if (floater_name == "avatar list")
+		{
+			LLFloaterAvatarList::toggle(NULL);
+		}
 		else if (floater_name == "active speakers")
 		{
 			LLFloaterActiveSpeakers::toggleInstance(LLSD());
@@ -7407,6 +7412,15 @@ static void addMenu(view_listener_t *menu, const std::string& name)
 	menu->registerListener(gMenuHolder, name);
 }
 
+class LLViewAvatarList : public view_listener_t
+{
+	bool handleEvent(LLPointer<LLEvent> event, const LLSD& userdata)
+	{
+		llinfos << "LLViewAvatarList::handleEvent()" << llendl;
+		return true;
+	}
+};
+
 void initialize_menus()
 {
 	// A parameterized event handler used as ctrl-8/9/0 zoom controls below.
diff --git a/indra/newview/llviewermessage.cpp b/indra/newview/llviewermessage.cpp
index b20695c..4e08e17 100644
--- a/indra/newview/llviewermessage.cpp
+++ b/indra/newview/llviewermessage.cpp
@@ -135,6 +135,9 @@
 #include "llviewerdisplay.h"
 #include "llkeythrottle.h"
 
+#include "llpanelavatar.h"
+#include "llfloateravatarlist.h"
+
 #include <boost/tokenizer.hpp>
 
 #if LL_WINDOWS // For Windows specific error handler
diff --git a/indra/newview/llviewerobject.h b/indra/newview/llviewerobject.h
index 16a3b98..c709c7c 100644
--- a/indra/newview/llviewerobject.h
+++ b/indra/newview/llviewerobject.h
@@ -601,8 +601,9 @@ protected:
 	TPACKETID		mLatestRecvPacketID;			// Latest time stamp on message from simulator
 	// extra data sent from the sim...currently only used for tree species info
 	U8* mData;
-
+public:
 	LLPointer<LLViewerPartSourceScript>		mPartSourcep;	// Particle source associated with this object.
+protected:
 	LLAudioSourceVO* mAudioSourcep;
 	F32				mAudioGain;
 	
diff --git a/indra/newview/llviewerwindow.cpp b/indra/newview/llviewerwindow.cpp
index cb7dd57..a6aa413 100644
--- a/indra/newview/llviewerwindow.cpp
+++ b/indra/newview/llviewerwindow.cpp
@@ -106,6 +106,7 @@
 #include "llfloatersnapshot.h"
 #include "llfloatertools.h"
 #include "llfloaterworldmap.h"
+#include "llfloateravatarlist.h"
 #include "llfocusmgr.h"
 #include "llframestatview.h"
 #include "llgesturemgr.h"
@@ -1913,9 +1914,14 @@ void LLViewerWindow::initWorldUI()
 		gMorphView->setVisible(FALSE);
 
 		// *Note: this is where gFloaterMute used to be initialized.
-
+		gFloaterAvatarList = NULL;
 		LLWorldMapView::initClass();
 
+		gFloaterAvatarList = new LLFloaterAvatarList();
+		gFloaterAvatarList->setVisible(FALSE);
+
+		LLWorldMapView::initClass();
+		
 		adjust_rect_centered_partial_zoom("FloaterWorldMapRect2", full_window);
 
 		gFloaterWorldMap = new LLFloaterWorldMap();
diff --git a/indra/newview/llwebbrowserctrl.h b/indra/newview/llwebbrowserctrl.h
index 0f46aa1..0c9d64f 100644
--- a/indra/newview/llwebbrowserctrl.h
+++ b/indra/newview/llwebbrowserctrl.h
@@ -33,6 +33,8 @@
 #ifndef LL_LLWEBBROWSERCTRL_H
 #define LL_LLWEBBROWSERCTRL_H
 
+#include "lluictrlfactory.h"
+
 ////////////////////////////////////////////////////////////////////////////////
 // data class that is passed with an event
 class LLWebBrowserCtrlEvent
diff --git a/indra/newview/pipeline.cpp b/indra/newview/pipeline.cpp
index 8dec9b9..97c384a 100644
--- a/indra/newview/pipeline.cpp
+++ b/indra/newview/pipeline.cpp
@@ -79,6 +79,7 @@
 #include "llviewerimagelist.h"
 #include "llviewerobject.h"
 #include "llviewerobjectlist.h"
+#include "llviewerpartsource.h"
 #include "llviewerparcelmgr.h"
 #include "llviewerregion.h" // for audio debugging.
 #include "llviewerwindow.h" // For getSpinAxis
@@ -93,6 +94,7 @@
 #include "llvopartgroup.h"
 #include "llworld.h"
 #include "llcubemap.h"
+#include "llfloateravatarlist.h"
 #include "lldebugmessagebox.h"
 #include "llviewershadermgr.h"
 #include "llviewerjoystick.h"
@@ -2176,6 +2178,27 @@ void renderSoundHighlights(LLDrawable* drawablep)
 	}
 }
 
+/**
+ * @brief Add particle sources to avatar list
+ * This tells the avatar list floater who is emitting particles
+ */
+void addParticleSourcesToList(LLDrawable *drawablep)
+{
+	if ( NULL != gFloaterAvatarList )
+	{
+		LLViewerObject *vobj = drawablep->getVObj();
+		if (vobj && vobj->isParticleSource())
+		{
+			LLUUID id = vobj->mPartSourcep->getOwnerUUID();
+			LLAvatarListEntry *ent = gFloaterAvatarList->getAvatarEntry(id);
+			if ( NULL != ent )
+			{
+				ent->setActivity(ACTIVITY_PARTICLES);
+			}
+		}
+	}
+}
+
 void LLPipeline::postSort(LLCamera& camera)
 {
 	LLMemType mt(LLMemType::MTYPE_PIPELINE);
@@ -2289,7 +2312,9 @@ void LLPipeline::postSort(LLCamera& camera)
 
 		std::sort(sCull->beginAlphaGroups(), sCull->endAlphaGroups(), LLSpatialGroup::CompareDepthGreater());
 	}
-	
+
+	forAllVisibleDrawables(addParticleSourcesToList);
+
 	// only render if the flag is set. The flag is only set if we are in edit mode or the toggle is set in the menus
 	if (gSavedSettings.getBOOL("BeaconAlwaysOn") && !sShadowRender)
 	{
@@ -2338,6 +2363,23 @@ void LLPipeline::postSort(LLCamera& camera)
 		}
 	}
 
+	// Avatar list support
+	if ( gFloaterAvatarList && gAudiop )
+	{
+		LLAudioEngine::source_map::iterator iter;
+		for (iter = gAudiop->mAllSources.begin(); iter != gAudiop->mAllSources.end(); ++iter)
+		{
+			LLAudioSource *sourcep = iter->second;
+			LLUUID uuid = sourcep->getOwnerID();
+			LLAvatarListEntry *ent = gFloaterAvatarList->getAvatarEntry(uuid);
+
+			if ( ent )
+			{
+				ent->setActivity(ACTIVITY_SOUND);
+			}
+		}
+	}
+
 	// If managing your telehub, draw beacons at telehub and currently selected spawnpoint.
 	if (LLFloaterTelehub::renderBeacons())
 	{
diff --git a/indra/newview/skins/default/xui/en-us/alerts.xml b/indra/newview/skins/default/xui/en-us/alerts.xml
index 2c3c306..0a3746e 100644
--- a/indra/newview/skins/default/xui/en-us/alerts.xml
+++ b/indra/newview/skins/default/xui/en-us/alerts.xml
@@ -1,4 +1,5107 @@
 <?xml version="1.0" encoding="utf-8" standalone="yes" ?>
 <alerts>
+	<global name="skipnexttime">
+		Don&apos;t show me this again
+	</global>
+	<global name="alwayschoose">
+		Always choose this option
+	</global>
+	<alert modal="true" name="MissingAlert">
+		<message name="message">
+			[ALERT_NAME] is missing from alerts.xml!
+		</message>
+		<option name="OK">
+			OK
+		</option>
+	</alert>
+	<alert modal="true" name="FloaterNotFound">
+		<message name="message">
+			Floater error: Could not find the following controls:
+ 
+[CONTROLS]
+		</message>
+		<option name="OK">
+			OK
+		</option>
+	</alert>	
+	<alert modal="true" name="TutorialNotFound">
+		<message name="message">
+			No tutorial is currently available.
+		</message>
+		<option name="OK">
+			OK
+		</option>
+	</alert>
+	<alert modal="true" name="GenericAlert">
+		<message name="message">
+			[MESSAGE]
+		</message>
+	</alert>
+	<alert modal="true" name="GenericAlertYesCancel">
+		<message name="message">
+			[MESSAGE]
+		</message>
+		<option name="Yes">
+			Yes
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="GenericServerAlert">
+		<message name="message">
+			[MESSAGE]
+		</message>
+	</alert>
+	<alert modal="true" name="ConnectTimeout">
+		<message name="message">
+			Unable to connect to [SECOND_LIFE].
+The system may be down.
+
+Please try again in a few minutes, or click Help
+for advice and a link to the system status web page.
+		</message>
+		<option name="OK">
+			OK
+		</option>
+		<option name="Help">
+			Help
+		</option>
+	</alert>
+	<alert modal="true" name="WearableSave">
+		<message name="message">
+			Save changes to current clothing/body part?
+		</message>
+		<option name="Save">
+			Save
+		</option>
+		<option name="Don&apos;tSave">
+			Don&apos;t Save
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="CompileQueueSaveText">
+		<message name="message">
+			There was a problem uploading the text for a script due to the following reason: [REASON]. Please try again later.
+		</message>
+	</alert>
+	<alert modal="true" name="CompileQueueSaveBytecode">
+		<message name="message">
+			There was a problem uploading the compiled script due to the following reason: [REASON]. Please try again later.
+		</message>
+	</alert>
+	<alert modal="true" name="WriteAnimationFail">
+		<message name="message">
+			There was a problem writing animation data.  Please try again later.
+		</message>
+	</alert>
+	<alert modal="true" name="UploadAuctionSnapshotFail">
+		<message name="message">
+			There was a problem uploading the auction snapshot due to the following reason: [REASON]
+		</message>
+	</alert>
+	<alert modal="true" name="UnableToViewContentsMoreThanOne">
+		<message name="message">
+			Unable to view the contents of more than one item at a time.
+Please select only one object and try again.
+		</message>
+	</alert>
+	<alert modal="true" name="MustSupplyVoteProposal">
+		<message name="message">
+			You must supply a proposal for the vote.
+Enter a brief description of the group&apos;s purpose.
+		</message>
+	</alert>
+	<alert modal="true" name="InsufficientFunds">
+		<message name="message">
+			Insufficient funds.
+		</message>
+	</alert>
+	<alert modal="true" name="CharacterSnapshotSaved">
+		<message name="message">
+			A snapshot of your character has been saved.
+Visit the Webpage Studio exhibit to see it.
+		</message>
+	</alert>
+	<alert modal="true" name="SaveClothingBodyChanges">
+		<message name="message">
+			Save all changes to clothing/body parts?
+		</message>
+		<option name="SaveAll">
+			Save All
+		</option>
+		<option name="Don&apos;tSave">
+			Don&apos;t Save
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="GrantModifyRights">
+		<message name="message">
+			Granting modify rights to another resident allows them to change,
+delete or take ANY objects you may have in-world. Be VERY careful
+when handing out this permission.
+Do you want to grant modify rights for [FIRST_NAME] [LAST_NAME]?
+		</message>
+		<option name="Yes">
+			Yes
+		</option>
+		<option name="No">
+			No
+		</option>
+	</alert>
+	<alert modal="true" name="GrantModifyRightsMultiple">
+		<message name="message">
+			Granting modify rights to another resident allows them to change 
+ANY objects you may have in-world. Be VERY careful when handing 
+out this permission.
+Do you want to grant modify rights for the selected Residents?
+		</message>
+		<option name="Yes">
+			Yes
+		</option>
+		<option name="No">
+			No
+		</option>
+	</alert>
+	<alert modal="true" name="RevokeModifyRights">
+		<message name="message">
+			Do you want to revoke modify rights for [FIRST_NAME] [LAST_NAME]?
+		</message>
+		<option name="Yes">
+			Yes
+		</option>
+		<option name="No">
+			No
+		</option>
+	</alert>
+	<alert modal="true" name="RevokeModifyRightsMultiple">
+		<message name="message">
+			Do you want to revoke modify rights for the selected Residents?
+		</message>
+		<option name="Yes">
+			Yes
+		</option>
+		<option name="No">
+			No
+		</option>
+	</alert>
+	<alert modal="true" name="RemoveFriend">
+		<message name="message">
+			Do you want to remove [FIRST] [LAST] from your list of friends?
+		</message>
+		<option name="Remove">
+			Remove
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="GroupCreateSuccess">
+		<message name="message">
+			Group created successfully.
+		</message>
+	</alert>
+	<alert modal="true" name="UnableToCreateGroup">
+		<message name="message">
+			Unable to create group.
+[MESSAGE]
+		</message>
+		<option name="OK">
+			OK
+		</option>
+	</alert>
+	<alert modal="true" name="PanelGroupApply">
+		<message name="message">
+			[NEEDS_APPLY_MESSAGE]
+[WANT_APPLY_MESSAGE]
+		</message>
+		<option name="ApplyChanges">
+			Apply Changes
+		</option>
+		<option name="IgnoreChanges">
+			Ignore Changes
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="CreateGroupCanAfford">
+		<message name="message">
+			Creating a group costs L$[COST].
+To maintain the group for more than three days,
+you must reach a total of two or more members.
+ 
+Create group?
+		</message>
+		<option name="Create">
+			Create
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="CreateGroupCannotAfford">
+		<message name="message">
+			Creating a group costs L$[COST].
+You do not have enough L$ to create this group.
+		</message>
+	</alert>
+	<alert modal="true" name="GroupNameTooShort">
+		<message name="message">
+			Group names must be at least four letters long.
+		</message>
+	</alert>
+	<alert modal="true" name="GroupNameUsesReservedWord">
+		<message name="message">
+			The group name uses a censored word. Please
+choose a different name.
+		</message>
+	</alert>
+	<alert modal="true" name="MustSpecifyGroupNoticeSubject">
+		<message name="message">
+			You must specify a subject to send a group notice.
+		</message>
+		<option name="OK">
+			OK
+		</option>
+	</alert>
+	<alert modal="true" name="MustSupplyGroupCharter">
+		<message name="message">
+			You must supply a charter for the group.
+Enter a brief description of the group&apos;s purpose.
+		</message>
+	</alert>
+	<alert modal="true" name="AddGroupOwnerWarning">
+		<message name="message">
+			You are about to add group members to the role of [ROLE_NAME].
+Members cannot be removed from that role.
+The members must resign from the role themselves.
+Are you sure you want to continue?
+		</message>
+		<ignore name="ignore">
+			When adding group members to the owner role
+		</ignore>
+		<option name="Yes">
+			Yes
+		</option>
+		<option name="No">
+			No
+		</option>
+	</alert>
+	<alert modal="true" name="AssignDangerousActionWarning">
+		<message name="message">
+			You are about to add the Ability &apos;[ACTION_NAME]&apos; to the 
+Role &apos;[ROLE_NAME]&apos;.
+ 
+ *WARNING*
+ Any Member in a Role with this Ability can assign themselves--
+ and any other member--to Roles that have more powers than they
+ currently have, potentially elevating themselves to
+ near-Owner power. Be sure you know what you&apos;re doing before
+ assigning this Ability.
+ 
+Add this Ability to &apos;[ROLE_NAME]&apos;?
+		</message>
+		<option name="Yes">
+			Yes
+		</option>
+		<option default="true" name="No">
+			No
+		</option>
+	</alert>
+	<alert modal="true" name="AssignDangerousAbilityWarning">
+		<message name="message">
+			You are about to add the Ability &apos;[ACTION_NAME]&apos; to the 
+Role &apos;[ROLE_NAME]&apos;.
+ 
+ *WARNING*
+ Any Member in a Role with this Ability can assign themselves--
+ and any other member--all Abilities, elevating themselves
+ to near-Owner power.
+ 
+Add this Ability to &apos;[ROLE_NAME]&apos;?
+		</message>
+		<option name="Yes">
+			Yes
+		</option>
+		<option default="true" name="No">
+			No
+		</option>
+	</alert>
+	<alert modal="true" name="ClickPublishHelpGroup">
+		<message name="message">
+			Selecting the &quot;Publish on the Web&quot; option allows us to publish
+the group name, insignia, charter, titles, and founder on the
+[SECOND_LIFE] website. You are responsible for indicating if any
+of the above content is considered inappropriate for a minor
+according to the Community Standards.
+		</message>
+	</alert>
+	<alert modal="true" name="ClickPublishHelpLand">
+		<message name="message">
+			Selecting the &quot;Publish in Search&quot; 
+Checking this box will show:
+- this parcel in search results
+- this parcel&apos;s public objects
+- this parcel in web search
+		</message>
+	</alert>
+	<alert modal="true" name="ClickPublishHelpLandDisabled">
+		<message name="message">
+			You can&apos;t make this parcel show in search because it is located in a
+region that forbids this.
+		</message>
+	</alert>
+	<alert modal="true" name="ClickPublishHelpPostcard">
+		<message name="message">
+			Selecting the &quot;Publish on the Web&quot; option allows us to publish
+the photographer&apos;s [SECOND_LIFE] name, subject line, location, message and
+snapshot on the [SECOND_LIFE] website. You are responsible for indicating if any
+of the above content for each snapshot is considered inappropriate for a minor 
+according to the Community Standards.
+		</message>
+	</alert>
+	<alert modal="true" name="ClickPublishHelpAvatar">
+		<message name="message">
+Selecting &quot;Show in Search&quot; will show:
+- my profile in search results
+- a link to my profile in public group pages
+		</message>
+	</alert>
+	<alert modal="true" name="ClickPartnerHelpAvatar">
+		<message name="message">
+			You can propose to another Resident or dissolve an existing partnership through the [SECOND_LIFE] website.
+
+Go to the Second Life web site for more information on partnering?
+		</message>
+		<option name="GotoPage">
+			Go to Page
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="ClickWebProfileHelpAvatar">
+		<message name="message">
+			If this Resident has set a web profile URL then you can:
+ * Click &apos;Load&apos; to see the page in this Web tab.
+ * Click Load &gt; &apos;In external browser&apos; to view the page in your default web browser.
+ * Click Load &gt; &apos;Home URL&apos; to return to this Resident's web profile if you've navigated away.
+ 
+When viewing your own profile, you can enter any URL as your web profile and click OK to set it.
+Other residents can visit the URL you set when they look at your profile.
+		</message>
+	</alert>
+	<alert modal="true" name="ClickWebProfileNoWebHelpAvatar">
+		<message name="message">
+			If this resident has set a web profile URL then you can:
+ * Click Open to view the page in your default web browser.
+ 
+When viewing your own profile, you can enter any URL as your web profile and click OK to set it.
+Other residents can visit the URL you set when they look at your profile.
+		</message>
+	</alert>
+	<alert modal="true" name="ReputationMinGreaterThanMax">
+		<message name="message">
+			Reputation minimum is greater than maximum.
+Either lower the minimum or raise the maximum.
+		</message>
+	</alert>
+	<alert modal="true" name="MoneyMinGreaterThanMax">
+		<message name="message">
+			Money minimum is greater than maximum.
+Either lower the minimum or raise the maximum.
+		</message>
+	</alert>
+	<alert modal="true" name="OfficerTitleTooLong">
+		<message name="message">
+			Officer titles can be at most 20 characters long.
+Please choose a shorter title.
+		</message>
+	</alert>
+	<alert modal="true" name="MemberTitleTooLong">
+		<message name="message">
+			Member titles can be at most 20 characters long.
+Please choose a shorter title.
+		</message>
+	</alert>
+	<alert modal="true" name="RunningLocally">
+		<message name="message">
+			Running locally...
+Gets you no data.
+		</message>
+		<option name="OK">
+			OK
+		</option>
+	</alert>
+	<alert modal="true" name="EjectNoMemberSelected">
+		<message name="message">
+			No member selected to eject.
+		</message>
+		<option name="OK">
+			OK
+		</option>
+	</alert>
+	<alert modal="true" name="ConfirmEject">
+		<message name="message">
+			This will eject [MEMBER] from the group.
+Do you wish to proceed?
+		</message>
+		<option name="Eject">
+			Eject
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="JoinGroupCanAfford">
+		<message name="message">
+			Joining this group costs L$[COST].
+Do you wish to proceed?
+		</message>
+		<option name="Join">
+			Join
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="JoinGroupCannotAfford">
+		<message name="message">
+			Joining this group costs L$[COST].
+You do not have enough L$ to join this group.
+		</message>
+	</alert>
+	<alert modal="true" name="LandBuyPass">
+		<message name="message">
+			For L$[COST] you can enter this land (&apos;[PARCEL_NAME]&apos;)
+for [TIME] hours.  Buy a pass?
+		</message>
+		<option name="OK">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="CannotStartAuctionAlreadyForSale">
+		<message name="message">
+			You cannot start an auction on a parcel which is
+already set for sale. Disable the land sale if you
+are sure you want to start an auction.
+		</message>
+	</alert>
+	<alert modal="true" name="SalePriceRestriction">
+		<message name="message">
+			Sale price must be set to more than L$0 if selling to anyone.
+Please select an individual to sell to if selling for L$0.
+		</message>
+	</alert>
+	<alert modal="true" name="ConfirmLandSaleChange">
+		<message name="message">
+			The selected [LAND_SIZE] m2 land is being set for sale.
+Your selling price will be L$[SALE_PRICE] and will be authorized for sale to [NAME].
+		</message>
+		<option name="Continue">
+			OK
+		</option>
+		<option default="true" name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert caution="true" modal="true" name="ConfirmLandSaleToAnyoneChange">
+		<message name="message">
+			ATTENTION: Clicking &apos;sell to anyone&apos; makes your land available to the entire Second Life community, even those not in this region.
+
+The selected [LAND_SIZE] m2 land is being set for sale.
+Your selling price will be L$[SALE_PRICE] and will be authorized for sale to [NAME].
+		</message>
+		<option name="Continue">
+			OK
+		</option>
+		<option default="true" name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="ReturnObjectsDeededToGroup">
+		<message name="message">
+			Are you sure you want to return all objects shared with
+the group &apos;[NAME]&apos; on this parcel of land
+back to their previous owner&apos;s inventory?
+ 
+*WARNING* This will delete the non-transferable objects
+deeded to the group!
+ 
+Objects: [N]
+		</message>
+		<option name="Return">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="ReturnObjectsOwnedByUser">
+		<message name="message">
+			Are you sure you want to return all objects owned by the
+Resident &apos;[NAME]&apos; on this parcel of land
+back to their inventory?
+ 
+Objects: [N]
+		</message>
+		<option name="Return">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="ReturnObjectsOwnedBySelf">
+		<message name="message">
+			Are you sure you want to return all objects
+owned by you on this parcel of land back to
+your inventory?
+ 
+Objects: [N]
+		</message>
+		<option name="Return">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="ReturnObjectsNotOwnedBySelf">
+		<message name="message">
+			Are you sure you want to return all objects NOT owned
+by you on this parcel of land back to their owner&apos;s inventory?
+Transferable objects deeded to a group will be
+returned to their previous owners.
+ 
+*WARNING* This will delete the non-transferable objects
+deeded to the group!
+ 
+Objects: [N]
+		</message>
+		<option name="Return">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="ReturnObjectsNotOwnedByUser">
+		<message name="message">
+			Are you sure you want to return all objects NOT owned
+by [NAME] on this parcel of land back to their owner&apos;s inventory?
+Transferable objects deeded to a group will be
+returned to their previous owners.
+ 
+*WARNING* This will delete the non-transferable objects
+deeded to the group!
+ 
+Objects: [N]
+		</message>
+		<option name="Return">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="ReturnAllTopObjects">
+		<message name="message">
+			Are you sure you want to return all listed objects back to their owner&apos;s inventory?
+		</message>
+		<option name="Return">
+			OK
+		</option>
+		<option default="true" name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="DisableAllTopObjects">
+		<message name="message">
+			Are you sure you want to disable all objects in this region?
+		</message>
+		<option name="Disable">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="ReturnObjectsNotOwnedByGroup">
+		<message name="message">
+			Return the objects on this parcel of land
+that are NOT shared with the group [NAME]
+back to their owners?
+ 
+Objects: [N]
+		</message>
+		<option name="Return">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="UnableToDisableOutsideScripts">
+		<message name="message">
+			Can not disable scripts.
+This entire region is damage enabled.
+Scripts must be allowed to run for weapons to work.
+		</message>
+	</alert>
+	<alert modal="true" name="MustBeInParcel">
+		<message name="message">
+			You must be standing inside the land parcel
+to set its Landing Point.
+		</message>
+	</alert>
+	<alert modal="true" name="PromptRecipientEmail">
+		<message name="message">
+			Please enter a valid email address for the recipient(s).
+		</message>
+	</alert>
+	<alert modal="true" name="PromptSelfEmail">
+		<message name="message">
+			Please enter your email address.
+		</message>
+	</alert>
+	<alert modal="true" name="PromptMissingSubjMsg">
+		<message name="message">
+			Email snapshot with the default subject or message?
+		</message>
+		<option name="OK">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="ErrorProcessingSnapshot">
+		<message name="message">
+			Error processing snapshot data
+		</message>
+	</alert>
+	<alert modal="true" name="ErrorEncodingSnapshot">
+		<message name="message">
+			Error encoding snapshot.
+		</message>
+	</alert>
+	<alert modal="true" name="ErrorUploadingPostcard">
+		<message name="message">
+			There was a problem sending a snapshot due to the following reason: [REASON]
+		</message>
+	</alert>
+	<alert modal="true" name="ErrorUploadingReportScreenshot">
+		<message name="message">
+			There was a problem uploading a report screenshot due to the following reason: [REASON]
+		</message>
+	</alert>
+	<alert modal="true" name="MustAgreeToLogIn">
+		<message name="message">
+			You must agree to the Terms of Service to continue logging into [SECOND_LIFE].
+		</message>
+	</alert>
+	<alert modal="true" name="CouldNotPutOnOutfit">
+		<message name="message">
+			Could not put on outfit.
+The outfit folder contains no clothing, body parts, or attachments.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotWearTrash">
+		<message name="message">
+			You can not wear clothes or body parts that are in the trash
+		</message>
+	</alert>
+	<alert modal="true" name="CannotWearInfoNotComplete">
+		<message name="message">
+			You can not wear that item because it has not yet loaded. Please try again in a minute.
+		</message>
+	</alert>
+	<alert modal="true" name="MustHaveAccountToLogIn">
+		<message name="message">
+Oops! Something was left blank.
+You need to enter both the First and Last name of your avatar.
+
+You need an account to enter [SECOND_LIFE]. Would you like to create one now?
+		</message>
+		<option name="OK">
+			Create a new account
+		</option>
+		<option name="Cancel">
+			Try again
+		</option>
+	</alert>
+	<alert modal="true" name="AddClassified">
+		<message name="message">
+			Classified ads appear in the &apos;Classified&apos; section of the
+Search directory and on www.secondlife.com for one week.
+Fill out your ad, then click &apos;Publish...&apos; to add it to the
+directory.
+You&apos;ll be asked for a price to pay when clicking Publish.
+Paying more makes your ad appear higher in the list, and
+also appear higher when people search for keywords.
+		</message>
+		<option name="OK">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+		<ignore name="ignore">
+			When adding a new Classified
+		</ignore>
+	</alert>
+	<alert modal="true" name="DeleteClassified">
+		<message name="message">
+			Delete classified &apos;[NAME]&apos;?
+There is no reimbursement for fees paid.
+		</message>
+		<option name="Delete">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="ClassifiedSave">
+		<message name="message">
+			Save changes to classified [NAME]?
+		</message>
+		<option name="Save">
+			Save
+		</option>
+		<option name="Don&apos;tSave">
+			Don&apos;t Save
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="DeleteAvatarPick">
+		<message name="message">
+			Delete pick [PICK]?
+		</message>
+		<option name="Delete">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="DisplayChangeRestart">
+		<message name="message">
+			Some of the display changes that you have made
+require [SECOND_LIFE] to shut down immediately,
+which will cause you to lose any work in progress.
+
+Apply those changes and quit?
+		</message>
+		<option name="ApplyandQuit">
+			Apply and Quit
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="PromptGoToEventsPage">
+		<message name="message">
+			Go to the [SECOND_LIFE] events web page?
+		</message>
+		<option name="GotoPage">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="MustSelectCandidate">
+		<message name="message">
+			You must select a candidate to vote.
+		</message>
+	</alert>
+	<alert modal="true" name="SelectItemToView">
+		<message name="message">
+			Please select a proposal to view.
+		</message>
+	</alert>
+	<alert modal="true" name="SelectProposalToView">
+		<message name="message">
+			Please select a proposal to view.
+		</message>
+	</alert>
+	<alert modal="true" name="SelectHistoryItemToView">
+		<message name="message">
+			Please select a history item to view.
+		</message>
+	</alert>
+	<alert modal="true" name="ResetShowNextTimeDialogs">
+		<message name="message">
+			Would you like to re-enable all these popups, which you previously indicated &apos;Don&apos;t show me again&apos;?
+		</message>
+		<option name="OK">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="SkipShowNextTimeDialogs">
+		<message name="message">
+			Would you like to disable all popups which can be skipped?
+		</message>
+		<option name="OK">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="CacheWillClear">
+		<message name="message">
+			Cache will be cleared after you restart [SECOND_LIFE].
+		</message>
+	</alert>
+	<alert modal="true" name="CacheWillBeMoved">
+		<message name="message">
+			Cache will be moved after you restart [SECOND_LIFE].
+Note: This will clear the cache.
+		</message>
+	</alert>
+	<alert modal="true" name="ChangeConnectionPort">
+		<message name="message">
+			Port settings take effect after you restart [SECOND_LIFE].
+		</message>
+	</alert>
+  <alert modal="true" name="ChangeSkin">
+    <message name="message">
+      The new skin will appear after you restart [SECOND_LIFE].
+    </message>
+  </alert>
+  <alert modal="true" name="GoToAuctionPage">
+		<message name="message">
+			Go to the [SECOND_LIFE] web page to see auction details
+or make a bid?
+		</message>
+		<option name="GotoPage">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="SaveChanges">
+		<message name="message">
+			Save Changes?
+		</message>
+		<option name="Save">
+			Save
+		</option>
+		<option name="Don&apos;tSave">
+			Don&apos;t Save
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="GestureSaveFailedTooManySteps">
+		<message name="message">
+			Gesture save failed.
+This gesture has too many steps.
+Try removing some steps, then save again.
+		</message>
+	</alert>
+	<alert modal="true" name="GestureSaveFailedTryAgain">
+		<message name="message">
+			Gesture save failed.  Please try again in a minute.
+		</message>
+	</alert>
+	<alert modal="true" name="GestureSaveFailedObjectNotFound">
+		<message name="message">
+			Could not save gesture because the object or the associated object inventory could not be found.
+The object may be out of range or may have been deleted.
+		</message>
+	</alert>
+	<alert modal="true" name="GestureSaveFailedReason">
+		<message name="message">
+			There was a problem saving a gesture due to the following reason: [REASON].  Please try resaving the gesture later.
+		</message>
+	</alert>
+	<alert modal="true" name="SaveNotecardFailObjectNotFound">
+		<message name="message">
+			Could not save notecard because the object or the associated object inventory could not be found.
+The object may be out of range or may have been deleted.
+		</message>
+	</alert>
+	<alert modal="true" name="SaveNotecardFailReason">
+		<message name="message">
+			There was a problem saving a notecard due to the following reason: [REASON].  Please try re-saving the notecard later.
+		</message>
+	</alert>
+	<alert modal="true" name="ScriptCannotUndo">
+		<message name="message">
+			Could not undo all changes in your version of the script.
+Would you like to load the server&apos;s last saved version?
+(**Warning** This operation cannot be undone.)
+		</message>
+		<option name="Yes">
+			OK
+		</option>
+		<option name="No">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="SaveScriptFailReason">
+		<message name="message">
+			There was a problem saving a script due to the following reason: [REASON].  Please try re-saving the script later.
+		</message>
+	</alert>
+	<alert modal="true" name="SaveScriptFailObjectNotFound">
+		<message name="message">
+			Could not save the script because the object it is in could not be found.
+The object may be out of range or may have been deleted.
+		</message>
+	</alert>
+	<alert modal="true" name="SaveBytecodeFailReason">
+		<message name="message">
+			There was a problem saving a compiled script due to the following reason: [REASON].  Please try re-saving the script later.
+		</message>
+	</alert>
+	<alert modal="true" name="CouldNotStartStopScript">
+		<message name="message">
+			Could not start or stop the script because the object it is on could not be found.
+The object may be out of range or may have been deleted.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotDownloadFile">
+		<message name="message">
+			Unable to download file
+		</message>
+	</alert>
+	<alert modal="true" name="CannotWriteEncode">
+		<message name="message">
+			Unable to encode file [[FILE]]
+		</message>
+	</alert>
+	<alert modal="true" name="CannotWriteFile">
+		<message name="message">
+			Unable to write file [[FILE]]
+		</message>
+	</alert>
+	<alert modal="true" name="CannotLoadWearable">
+		<message name="message">
+			Unable to load wearable.
+		</message>
+	</alert>
+	<alert modal="true" name="ConfirmDeleteComplicated">
+		<message name="message">
+			At least one selected object is locked, not copyable, or owned by someone else.
+Are you sure you want to delete these items?
+		</message>
+		<option name="Yes">
+			Yes
+		</option>
+		<option name="No">
+			No
+		</option>
+	</alert>
+	<alert modal="true" name="DisplaySettingsSafe">
+		<message name="message">
+			Display settings have been set to safe levels
+because you have specified the -safe option.
+		</message>
+	</alert>
+	<alert modal="true" name="UnsupportedGLRequirements">
+		<message name="message">
+			You do not appear to have the proper hardware requirements for Second Life. Second Life requires an OpenGL graphics card that has multitexture support. If this is the case, you may want to make sure that you have the latest drivers for your graphics card, and service packs and patches for your operating system.
+
+If you continue to have problems, please visit: http://www.secondlife.com/support
+		</message>
+	</alert>
+	<alert modal="true" name="UnsupportedHardware">
+		<message name="message">
+			Warning: Your system does not meet Second Life&apos;s minimum system requirements. If you continue using Second Life, you may experience poor performance. Unfortunately, we cannot provide technical support for unsupported system configurations. 
+
+MINSPECS
+Do you wish to visit [_URL] for more information?
+		</message>
+		<ignore name="ignore">
+			When detecting unsupported hardware
+		</ignore>
+		<option name="Yes">
+			Yes
+		</option>
+		<option name="No">
+			No
+		</option>
+		<url option="0">
+			http://www.secondlife.com/corporate/sysreqs.php
+		</url>
+	</alert>
+	<alert modal="true" name="UnsupportedGPU">
+		<message name="message">
+			- Your graphics card does not meet the minimum requirements.
+		</message>
+	</alert>
+	<alert modal="true" name="UnsupportedCPU">
+		<message name="message">
+			- Your CPU speed does not meet the minimum requirements.
+		</message>
+	</alert>
+	<alert modal="true" name="UnsupportedCPUAmount">
+		<message name="message">
+			796
+		</message>
+	</alert>
+	<alert modal="true" name="UnsupportedRAM">
+		<message name="message">
+			- Your system memory does not meet the minimum requirements.
+		</message>
+	</alert>
+	<alert modal="true" name="UnsupportedRAMAmount">
+		<message name="message">
+			510
+		</message>
+	</alert>
+
+	<alert modal="true" name="UnknownGPU">
+		<message name="message">
+Your system contains a graphics card that is unknown to us at this time.  
+This is often the case with new hardware we haven't had a chance to 
+test.  Second Life will most likely run properly, but you may need to 
+adjust your graphics settings to something more appropriate.
+(Edit menu > Preferences > Graphics).
+		</message>
+		<ignore name="ignore">
+			When detecting an unknown graphics card
+		</ignore>
+	</alert>
+
+	<alert modal="true" name="DisplaySettingsRecommended">
+		<message name="message">
+			Display settings have been set to recommended levels
+based on your system configuration.
+		</message>
+		<option name="OK">
+			OK
+		</option>
+	</alert>
+	<alert modal="true" name="DisplaySettingsNoShaders">
+		<message name="message">
+			[SECOND_LIFE] crashed while initializing graphics drivers.
+Graphics Quality will be set to low to avoid some common driver errors.
+This will disable some graphics features.
+We recommend updating your graphics card drivers.
+Graphics Quality can be raised in Preferences &gt; Graphics.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotRequestDomain">
+		<message name="message">
+			Unable to connect to server.
+Could not request domain name: [HOST]
+		</message>
+	</alert>
+	<alert modal="true" name="CannotFindDomain">
+		<message name="message">
+			Unable to find the server domain name.
+This could be the result of a lost network connection
+or a server problem.
+Please try again in a few minutes, or click Help
+for advice and a link to the system status web page.
+		</message>
+		<option name="OK">
+			OK
+		</option>
+		<option name="Help">
+			Help
+		</option>
+	</alert>
+	<alert modal="true" name="PromptSelectServer">
+		<message name="message">
+			Please select a server.
+Unable to connect to [SERVER]
+		</message>
+	</alert>
+	<alert modal="true" name="CannotConnectDNSError">
+		<message name="message">
+			Unable to connect to [SECOND_LIFE].
+DNS could not resolve the host name.
+
+Please verify that you can connect to the www.secondlife.com
+web site.  If you can, but continue to receive this error,
+please go to www.secondlife.com/support and report this problem.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotConnectSecurityError">
+		<message name="message">
+			Unable to establish a secure connection to the login server.
+Often this means that your computer&apos;s clock is set incorrectly.
+
+Please ensure the time and date are set correctly.
+If you continue to receive this error, please go
+to www.secondlife.com/support
+and report the problem.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotConnectVerificationError">
+		<message name="message">
+			Unable to connect to [SECOND_LIFE].
+The login server couldn&apos;t verify itself via SSL.
+
+If you continue to receive this error, please go
+to www.secondlife.com/support
+and report the problem.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotConnectUnknownErrorWindows">
+		<message name="message">
+			Unable to connect to [SECOND_LIFE].
+Despite our best efforts, something unexpected has gone wrong.
+
+Please go to www.secondlife.com/support
+and report the problem.  If possible, include your SecondLife.log
+file from: C:\Documents and Settings\(name)\Application Data\SecondLife\logs
+Thank you.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotConnectUnknownErrorDarwin">
+		<message name="message">
+			Unable to connect to [SECOND_LIFE].
+Despite our best efforts, something unexpected has gone wrong.
+
+Please go to www.secondlife.com/support
+and report the problem.  If possible, include your SecondLife.log
+file from: ~/Library/Application Support/SecondLife/logs
+Thank you.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotResolveLoginToken">
+		<message name="message">
+			There was a problem resolving your login
+authentication token. Please try logging in again. 
+
+If you continue to receive this error,
+please go to www.secondlife.com/support.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotConnectNoMessage">
+		<message name="message">
+			Unknown problem trying to connect.
+
+Please try again in a few minutes, or click Help
+for advice and a link to the system status web page.
+		</message>
+		<option name="OK">
+			OK
+		</option>
+		<option name="Help">
+			Help
+		</option>
+	</alert>
+	<alert modal="true" name="CannotConnectNoReplyFromLogin">
+		<message name="message">
+			Unable to connect.  No login ack from simulator.
+ 
+Please try again in a few minutes, or click Help
+for advice and a link to the system status web page.
+		</message>
+		<option name="OK">
+			OK
+		</option>
+		<option name="Help">
+			Help
+		</option>
+	</alert>
+	<alert modal="true" name="CannotConnectLoginTimeout">
+		<message name="message">
+			Login timed out waiting for your location in-world.  Please try again.
+		</message>
+	</alert>
+	<alert modal="true" name="FirstRunDialog">
+		<message name="message">
+			[SECOND_LIFE] installation is complete.
+
+If this is your first time using [SECOND_LIFE], you will need to create
+an account before you can log on.
+Return to www.secondlife.com to create a new account?
+		</message>
+		<option name="NewAccount...">
+			New Account...
+		</option>
+		<option name="Continue">
+			Continue
+		</option>
+	</alert>
+	<alert modal="true" name="ClothingStillDownloading">
+		<message name="message">
+			Your avatar is still downloading.
+You can use [SECOND_LIFE] normally, and other Residents
+will see you correctly.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotResolveDomain">
+		<message name="message">
+			Unable to connect to server.
+Could not resolve domain name: [DOMAIN]
+
+Please check your network connection.
+		</message>
+	</alert>
+	<alert modal="true" name="WelcomeToSecondLife">
+		<message name="message">
+			Welcome to [SECOND_LIFE]! 
+
+Use arrow keys to walk.
+Please choose the male or female avatar. 
+You can change your mind later.
+		</message>
+		<option name="Male">
+			Male
+		</option>
+		<option name="Female">
+			Female
+		</option>
+	</alert>
+	<alert modal="true" name="WelcomeToSecondLifeSimple">
+		<message name="message">
+			Welcome to [SECOND_LIFE]!
+
+Use arrow keys to walk.
+Please choose the male or female avatar.
+		</message>
+		<option name="Male">
+			Male
+		</option>
+		<option name="Female">
+			Female
+		</option>
+	</alert>
+	<alert modal="true" name="RegionNoTerraforming">
+		<message name="message">
+			The region [REGION] does not allow terraforming.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotCopyWarning">
+		<message name="message">
+			You do not have permission to copy
+this item and will lose it from your
+inventory if you give it away. Do you
+really want to offer this item?
+		</message>
+		<option name="Yes">
+			Yes
+		</option>
+		<option name="No">
+			No
+		</option>
+	</alert>
+	<alert modal="true" name="CannotGiveItem">
+		<message name="message">
+			Unable to give inventory item.
+		</message>
+	</alert>
+	<alert modal="true" name="TransactionCancelled">
+		<message name="message">
+			Transaction cancelled.
+		</message>
+	</alert>
+	<alert modal="true" name="TooManyItems">
+		<message name="message">
+			Cannot give more than 42 items in a single inventory transfer.
+		</message>
+	</alert>
+	<alert modal="true" name="NoItems">
+		<message name="message">
+			You do not have permission to transfer the selected items.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotCopyCountItems">
+		<message name="message">
+			You do not have permission to copy [COUNT] of
+the selected items. You will lose these items
+from your inventory.
+Do you really want to give these items?
+		</message>
+		<option name="Yes">
+			Yes
+		</option>
+		<option name="No">
+			No
+		</option>
+	</alert>
+	<alert modal="true" name="CannotGiveCategory">
+		<message name="message">
+			You do not have permission to transfer
+the selected folder.
+		</message>
+	</alert>
+	<alert modal="true" name="FreezeAvatar">
+		<message name="message">
+			Freeze this avatar?
+He or she will temporarily be unable to move,
+chat, or interact with the world.
+		</message>
+		<option name="Freeze">
+			Freeze
+		</option>
+		<option name="Unfreeze">
+			Unfreeze
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="FreezeAvatarFullname">
+		<message name="message">
+			Freeze [AVATAR_NAME]?
+He or she will temporarily be unable to move,
+chat, or interact with the world.
+		</message>
+		<option name="Freeze">
+			Freeze
+		</option>
+		<option name="Unfreeze">
+			Unfreeze
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="AvatarListFreezeAvatars">
+		<message name="message">
+			Freeze these avatars?
+			[NAMES]
+			They will temporarily be unable to move,
+			chat, or interact with the world.
+		</message>
+		<option name="Freeze">
+			Freeze
+		</option>
+		<option name="Unfreeze">
+			Unfreeze
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>	
+	<alert modal="true" name="EjectAvatar">
+		<message name="message">
+			Eject this avatar from your land?
+		</message>
+		<option name="Eject">
+			Eject
+		</option>
+		<option name="EjectandBan">
+			Eject and Ban
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="EjectAvatarFullname">
+		<message name="message">
+			Eject [AVATAR_NAME] from your land?
+		</message>
+		<option name="Eject">
+			Eject
+		</option>
+		<option name="EjectandBan">
+			Eject and Ban
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="AvatarListEjectAvatars">
+		<message name="message">
+			Eject these avatars from your land?
+			[NAMES]
+		</message>
+		<option name="Eject">
+			Eject
+		</option>
+		<option name="EjectandBan">
+			Eject and Ban
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="AvatarListEjectAvatarsFromEstate">
+		<message name="message">
+			Eject these avatars from this estate?
+			[NAMES]
+		</message>
+		<option name="Eject">
+			Eject
+		</option>
+		<option name="EjectandBan">
+			Eject and Ban
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	
+	<alert modal="true" name="AvatarListMuteAvatars">
+		<message name="message">
+			Mute these avatars?
+			[NAMES]
+		</message>
+		<option name="Mute">
+			Mute
+		</option>
+		<option name="Unmute">
+			Unmute
+		</option>		
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>	
+    <alert modal="true" name="EjectAvatarNoBan">
+        <message name="message">
+            Eject this avatar from your land?
+        </message>
+        <option name="Eject">
+            Eject
+        </option>
+        <option name="Cancel">
+            Cancel
+        </option>
+    </alert>
+    <alert modal="true" name="EjectAvatarFullnameNoBan">
+        <message name="message">
+            Eject [AVATAR_NAME] from your land?
+        </message>
+        <option name="Eject">
+            Eject
+        </option>
+        <option name="Cancel">
+            Cancel
+        </option>
+    </alert>
+    <alert modal="true" name="InvalidUUID">
+		<message name="message">
+			Not a valid UUID.
+		</message>
+	</alert>
+	<alert modal="true" name="AcquireErrorTooManyObjects">
+		<message name="message">
+			ACQUIRE ERROR: Too many objects selected.
+		</message>
+	</alert>
+	<alert modal="true" name="AcquireErrorObjectSpan">
+		<message name="message">
+			ACQUIRE ERROR: Objects span more than one region.
+Please move all objects to be acquired onto the
+same region.
+		</message>
+	</alert>
+	<alert modal="true" name="TakeLockedOrNotOwnedBy">
+		<message name="message">
+			At least one object is locked or not owned by you.
+If an object is not owned by you and you take it, 
+next owner permissions will be applied to it and
+possibly restrict your ability to modify or copy it.
+
+Are you sure you want to take these items?
+		</message>
+		<option name="Yes">
+			OK
+		</option>
+		<option default="true" name="No">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="PromptGoToCurrencyPage">
+		<message name="message">
+			[EXTRA]
+
+Go to [URL] for information on purchasing currency?
+		</message>
+		<option name="GotoPage">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="UnableToLinkObjects">
+		<message name="message">
+			Unable to link these [COUNT] objects.
+You can link a maximum of [MAX] objects.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotLinkIncompleteSet">
+		<message name="message">
+			You can only link complete sets of objects, and must
+select more than one object.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotLinkModify">
+		<message name="message">
+			Unable to link because you don&apos;t have modify permission
+on all the objects.  
+
+Please make sure none are locked, and that you own all of them.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotLinkDifferentOwners">
+		<message name="message">
+			Unable to link because not all of the objects have the
+same owner. 
+
+Please make sure you own all of the selected objects.
+		</message>
+	</alert>
+	<alert modal="true" name="NoFileExtension">
+		<message name="message">
+			No file extension for the file: &apos;[FILE]&apos;
+
+Please make sure the file has a correct file extension.
+		</message>
+	</alert>
+	<alert modal="true" name="InvalidFileExtension">
+		<message name="message">
+			Invalid file extension [EXTENSION]
+Expected [VALIDS]
+		</message>
+		<option name="OK">
+			OK
+		</option>
+	</alert>
+	<alert modal="true" name="CannotUploadSoundFile">
+		<message name="message">
+			Couldn&apos;t open uploaded sound file for reading:
+[FILE]
+		</message>
+	</alert>
+	<alert modal="true" name="SoundFileNotRIFF">
+		<message name="message">
+			File does not appear to be a RIFF WAVE file: 
+[FILE]
+		</message>
+	</alert>
+	<alert modal="true" name="SoundFileNotPCM">
+		<message name="message">
+			File does not appear to be a PCM WAVE audio file: 
+[FILE]
+		</message>
+	</alert>
+	<alert modal="true" name="SoundFileInvalidChannelCount">
+		<message name="message">
+			File has invalid number of channels (must be mono or stereo): 
+[FILE]
+		</message>
+	</alert>
+	<alert modal="true" name="SoundFileInvalidSampleRate">
+		<message name="message">
+			File does not appear to be a supported sample rate (must be 44.1k): 
+[FILE]
+		</message>
+	</alert>
+	<alert modal="true" name="SoundFileInvalidWordSize">
+		<message name="message">
+			File does not appear to be a supported word size (must be 8 or 16 bit): 
+[FILE]
+		</message>
+	</alert>
+	<alert modal="true" name="SoundFileInvalidHeader">
+		<message name="message">
+			Could not find &apos;data&apos; chunk in WAV header: 
+[FILE]
+		</message>
+	</alert>
+	<alert modal="true" name="SoundFileInvalidTooLong">
+		<message name="message">
+			Audio file is too long (10 second maximum): 
+[FILE]
+		</message>
+	</alert>
+	<alert modal="true" name="ProblemWithFile">
+		<message name="message">
+			Problem with file [FILE]:
+ 
+[ERROR]
+		</message>
+	</alert>
+	<alert modal="true" name="CannotOpenTemporarySoundFile">
+		<message name="message">
+			Couldn&apos;t open temporary compressed sound file for writing: [FILE]
+		</message>
+	</alert>
+	<alert modal="true" name="UnknownVorbisEncodeFailure">
+		<message name="message">
+			Unknown Vorbis encode failure on: [FILE]
+		</message>
+	</alert>
+	<alert modal="true" name="CorruptResourceFile">
+		<message name="message">
+			Corrupt resource file: [FILE]
+		</message>
+	</alert>
+	<alert modal="true" name="UnknownResourceFileVersion">
+		<message name="message">
+			Unknown Linden resource file version in file: [FILE]
+		</message>
+	</alert>
+	<alert modal="true" name="UnableToCreateOutputFile">
+		<message name="message">
+			Unable to create output file: [FILE]
+		</message>
+	</alert>
+	<alert modal="true" name="DoNotSupportBulkAnimationUpload">
+		<message name="message">
+			We do not currently support bulk upload of animation files.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotAccessOutputFile">
+		<message name="message">
+			Unable to access output file: [FILE]
+		</message>
+	</alert>
+	<alert modal="true" name="InsufficientFundsToUploadFile">
+		<message name="message">
+			Not enough L$ to upload file: the price is L$[COST], your balance is L$[BALANCE]
+		</message>
+	</alert>
+	<alert modal="true" name="InsufficientFundsToFinishUpload">
+		<message name="message">
+			Not enough L$ to finish uploading [FILE]: the price is L$[COST], your balance is L$[BALANCE]
+		</message>
+	</alert>
+	<alert modal="true" name="CannotUploadReason">
+		<message name="message">
+			Unable to upload [FILE] due to the following reason: [REASON]
+Please try again later.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotCreateLandmarkNotOwner">
+		<message name="message">
+			You cannot create a landmark here because
+the owner of the land doesn&apos;t allow it.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotRecompileSelectObjectsNoScripts">
+		<message name="message">
+			Not able to perform &apos;recompilation&apos;.
+Select an object with a script.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotRecompileSelectObjectsNoPermission">
+		<message name="message">
+			Not able to perform &apos;recompilation&apos;.
+
+Select objects with scripts that you
+have permission to modify.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotResetSelectObjectsNoScripts">
+		<message name="message">
+			Not able to perform &apos;reset&apos;.
+
+Select objects with scripts.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotResetSelectObjectsNoPermission">
+		<message name="message">
+			Not able to perform &apos;reset&apos;.
+
+Select objects with scripts that you
+have permission to modify.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotSetRunningSelectObjectsNoScripts">
+		<message name="message">
+			Not able to set any scripts to &apos;running&apos;.
+
+Select objects with scripts.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotSetRunningSelectObjectsNoPermission">
+		<message name="message">
+			Not able to set any scripts to &apos;running&apos;.
+
+Select objects with scripts that you
+have permission to modify.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotSetRunningNotSelectObjectsNoScripts">
+		<message name="message">
+			Unable to set any scripts to &apos;not running&apos;.
+
+Select objects with scripts.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotSetRunningNotSelectObjectsNoPermission">
+		<message name="message">
+			Unable to set any scripts to &apos;not running&apos;.
+
+Select objects with scripts that you
+have permission to modify.
+		</message>
+	</alert>
+	<alert modal="true" name="NoFrontmostFloater">
+		<message name="message">
+			No frontmost floater to save.
+		</message>
+	</alert>
+	<alert modal="true" name="SeachFilteredOnShortWords">
+		<message name="message">
+Your search query was modified and the 
+words that were too short were removed.
+
+Searched for: [FINALQUERY]
+		</message>
+	</alert>
+	<alert modal="true" name="SeachFilteredOnShortWordsEmpty">
+		<message name="message">
+Your search terms were too short
+so no search was performed.
+		</message>
+	</alert>
+	<alert modal="true" name="ColladaExportFailedUnknownServerError">
+		<message name="message">
+			Collada export failed: Unknown server error.
+		</message>
+	</alert>
+	<alert modal="true" name="ColladaExportFailedInvalidPermissions">
+		<message name="message">
+			Collada export failed: Invalid permissions or object locked!
+		</message>
+	</alert>
+	<alert modal="true" name="ColladaExportFailedUnknownError">
+		<message name="message">
+			Collada export failed: Unknown error.
+		</message>
+	</alert>
+	<alert modal="true" name="ObjectImportFailedTransfer">
+		<message name="message">
+			Object import failed. Couldn&apos;t transfer file.
+		</message>
+	</alert>
+	<alert modal="true" name="ObjectImportFailedBadFormat">
+		<message name="message">
+			Object import failed. File is not in acceptable SLObject format.
+		</message>
+	</alert>
+	<alert modal="true" name="ObjectImportFailedUnknownError">
+		<message name="message">
+			Object import failed. Unknown error.
+		</message>
+	</alert>
+	<alert modal="true" name="CouldNotTeleportReason">
+		<message name="message">
+			Could not teleport.
+[REASON]
+		</message>
+	</alert>
+	<alert modal="true" name="CannotSetLandOwnerNothingSelected">
+		<message name="message">
+			Unable to set land owner:
+No parcel selected.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotSetLandOwnerMultipleRegions">
+		<message name="message">
+			Unable to force land ownership because selection spans multiple
+regions. Please select a smaller area and try again.
+		</message>
+	</alert>
+	<alert modal="true" name="ForceOwnerAuctionWarning">
+		<message name="message">
+			This parcel is up for auction. Forcing ownership will
+cancel the auction and potentially make some residents
+unhappy if bidding has begun. Force ownership?
+		</message>
+		<option name="Force">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="CannotContentifyNothingSelected">
+		<message name="message">
+			Unable to contentify:
+No parcel selected.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotContentifyNoRegion">
+		<message name="message">
+			Unable to contentify:
+No region selected.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotReleaseLandNothingSelected">
+		<message name="message">
+			Unable to abandon land:
+No parcel selected.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotReleaseLandNoRegion">
+		<message name="message">
+			Unable to abandon land:
+Cannot find region.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotBuyLandNothingSelected">
+		<message name="message">
+			Unable to buy land:
+No parcel selected.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotBuyLandNoRegion">
+		<message name="message">
+			Unable to buy land:
+Cannot find the region this land is in.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotCloseFloaterBuyLand">
+		<message name="message">
+			You cannot close the Buy Land window until Second Life
+estimates the price of this transaction.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotDeedLandNothingSelected">
+		<message name="message">
+			Unable to deed land:
+No parcel selected.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotDeedLandNoGroup">
+		<message name="message">
+			Unable to deed land:
+No Group selected.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotDeedLandNoRegion">
+		<message name="message">
+			Unable to deed land:
+Cannot find the region this land is in.
+Please use Tools -&gt; Report Bug to report this.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotDeedLandMultipleSelected">
+		<message name="message">
+			Unable to deed land:
+Multiple parcels selected.
+
+Try selecting a single parcel.
+		</message>
+	</alert>
+	<alert modal="true" name="RegionNotFound">
+		<message name="message">
+			Region Not Found
+		</message>
+	</alert>
+	<alert modal="true" name="ParcelCanPlayMedia">
+		<message name="message">
+			This location can play streaming media. 
+Streaming media requires a fast Internet connection.
+ 
+Play streaming media when available?
+(You can change this option later under 
+Preferences &gt; Audio &amp; Video.)
+		</message>
+		<option name="PlayMedia">
+			Play Media
+		</option>
+		<option name="Disable">
+			Disable
+		</option>
+	</alert>
+	<alert modal="true" name="CannotDeedLandWaitingForServer">
+		<message name="message">
+			Unable to deed land:
+Waiting for server to report ownership.
+
+Please try again.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotDeedLandNoTransfer">
+		<message name="message">
+			Unable to deed land:
+The region [REGION] does not allow transfer of land.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotReleaseLandWatingForServer">
+		<message name="message">
+			Unable to abandon land:
+Waiting for server to update parcel information.
+
+Try again in a few seconds.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotReleaseLandSelected">
+		<message name="message">
+			Unable to abandon land:
+You do not own all the parcels selected.
+
+Please select a single parcel.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotReleaseLandDontOwn">
+		<message name="message">
+			Unable to abandon land:
+You don&apos;t have permission to release this parcel.
+Parcels you own appear in green.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotReleaseLandRegionNotFound">
+		<message name="message">
+			Unable to abandon land:
+Cannot find the region this land is in.
+
+Please use Tools -&gt; Report Bug to report this.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotReleaseLandNoTransfer">
+		<message name="message">
+			Unable to abandon land:
+The region [REGION] does not allow transfer of land.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotReleaseLandPartialSelection">
+		<message name="message">
+			Unable to abandon land:
+You must select an entire parcel to release it.
+
+Select an entire parcel, or divide your parcel first.
+		</message>
+	</alert>
+	<alert modal="true" name="ReleaseLandWarning">
+		<message name="message">
+			You are about to release [AREA] m2 of land.
+Releasing this parcel will remove it from your land
+holdings, but will not grant any L$.
+
+Release this land?
+		</message>
+		<option name="Release">
+			OK
+		</option>
+		<option default="true" name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="CannotDivideLandNothingSelected">
+		<message name="message">
+			Unable to divide land:
+
+No parcels selected.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotDivideLandPartialSelection">
+		<message name="message">
+			Unable to divide land:
+
+You have an entire parcel selected.
+Try selecting a part of the parcel.
+		</message>
+	</alert>
+	<alert modal="true" name="LandDivideWarning">
+		<message name="message">
+			Dividing this land will split this parcel into two
+and each parcel can have its own settings. Some settings
+will be reset to defaults after the operation.
+ 
+Divide land?
+		</message>
+		<option name="Divide">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="CannotDivideLandNoRegion">
+		<message name="message">
+			Unable to divide land:
+Cannot find the region this land is in.
+
+Please use Tools -&gt; Report Bug to report this.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotJoinLandNoRegion">
+		<message name="message">
+			Unable to join land:
+Cannot find the region this land is in.
+
+Please use Tools -&gt; Report Bug to report this.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotJoinLandNothingSelected">
+		<message name="message">
+			Unable to join land:
+No parcels selected.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotJoinLandEntireParcelSelected">
+		<message name="message">
+			Unable to join land:
+You only have one parcel selected.
+
+Select land across both parcels.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotJoinLandSelection">
+		<message name="message">
+			Unable to join land:
+You must select more than one parcel.
+
+Select land across both parcels.
+		</message>
+	</alert>
+	<alert modal="true" name="JoinLandWarning">
+		<message name="message">
+			Joining this land will create one large parcel 
+out of all parcels intersecting the selected rectangle. 
+You will need to reset the name and options of the 
+new parcel.
+ 
+Join land?
+		</message>
+		<option name="Join">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="ConfirmNotecardSave">
+		<message name="message">
+			This notecard needs to be saved before the item can be copied or viewed. Save notecard?
+		</message>
+		<option default="true" name="Save">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="ConfirmLandmarkCopy">
+		<message name="message">
+			Copy this landmark to your inventory?
+		</message>
+		<option name="Copy">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="ConfirmItemCopy">
+		<message name="message">
+			Copy this item to your inventory?
+		</message>
+		<option name="Copy">
+			Copy
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="ResolutionSwitchFail">
+		<message name="message">
+			Failed to switch resolution to [RESX] by [RESY]
+		</message>
+	</alert>
+	<alert modal="true" name="ErrorUndefinedGrasses">
+		<message name="message">
+			Error: Undefined grasses: [SPECIES]
+		</message>
+	</alert>
+	<alert modal="true" name="ErrorUndefinedTrees">
+		<message name="message">
+			Error: Undefined trees: [SPECIES]
+		</message>
+	</alert>
+	<alert modal="true" name="CannotSaveWearableOutOfSpace">
+		<message name="message">
+			Unable to save &apos;[NAME]&apos; to wearable file.  You will need
+to free up some space on your computer and
+save the wearable again.
+		</message>
+	</alert>
+	<alert modal="true" name="CannotSaveToAssetStore">
+		<message name="message">
+			Unable to save [NAME] to central asset store.
+This is usually a temporary failure. Please
+customize and save the wearable again in a
+few minutes. 
+
+If this problem persists, please
+click on the &apos;Tools | Report Bug&apos; pull down menu
+and provide details about your network setup.
+		</message>
+	</alert>
+	<alert modal="true" name="AppEarlyExit">
+		<message name="message">
+			[MESSAGE]
+ 
+We are unable to recover from this problem. 
+
+Please uninstall and reinstall before trying again. If this
+problem persists, check the Tech Support FAQ at:
+www.secondlife.com/support.
+		</message>
+		<option name="Quit">
+			Quit
+		</option>
+	</alert>
+	<alert modal="true" name="YouHaveBeenLoggedOut">
+		<message name="message">
+You have been logged out of [SECOND_LIFE]:
+            [MESSAGE]
+You can still look at existing IM and chat by clicking 'View IM &amp; Chat'. Otherwise, click 'Quit' to exit [SECOND_LIFE] immediately.
+    </message>
+    <option name="Continue">
+			View IM &amp; Chat
+		</option>
+		<option name="Quit">
+			Quit
+		</option>
+	</alert>
+	<alert modal="true" name="OnlyOfficerCanBuyLand">
+		<message name="message">
+			Unable to buy land for the group:
+You do not have permission to buy land for your active group.
+		</message>
+	</alert>
+	<alert modal="true" name="AddFriend" title="Add Friend">
+		<message name="message">
+Friends can give permissions to track each
+other on the map and receive online status updates.
+
+Offer friendship to [NAME]?
+		</message>
+		<option name="Offer">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="AddFriendWithMessage" title="Add Friend">
+		<message name="message">
+Friends can give permissions to track each
+other on the map and receive online status updates.
+
+Offer friendship to [NAME]?
+		</message>
+		<editline name="editline">
+			Would you be my friend?
+		</editline>
+		<option name="Offer">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="RemoveFromFriends">
+		<message name="message">
+			Do you want to remove [FIRST_NAME] [LAST_NAME] from your Friends List?
+		</message>
+		<option name="Remove">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="RemoveMultipleFromFriends">
+		<message name="message">
+			Do you want to remove multiple friends from your Friends list?
+		</message>
+		<option name="Remove">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="GodDeleteAllScriptedPublicObjectsByUser">
+		<message name="message">
+			Are you sure you want to delete all scripted objects owned by
+** [AVATAR_NAME] **
+on all others land in this sim?
+		</message>
+		<option name="DELETE!!">
+			OK
+		</option>
+		<option default="true" name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="GodDeleteAllScriptedObjectsByUser">
+		<message name="message">
+			Are you sure you want to DELETE ALL scripted objects owned by
+** [AVATAR_NAME] **
+on ALL LAND in this sim?
+		</message>
+		<option name="!!DELETEALL!!">
+			OK
+		</option>
+		<option default="true" name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="GodDeleteAllObjectsByUser">
+		<message name="message">
+			Are you sure you want to DELETE ALL objects (scripted or not)
+owned by
+** [AVATAR_NAME] **
+on ALL LAND in this sim?
+		</message>
+		<option name="!!DELETEALL!!">
+			OK
+		</option>
+		<option default="true" name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="PublishGroupInfoToWeb">
+		<message name="message">
+			Selecting the &quot;Publish on the Web&quot; option allows us to publish
+the group name, insignia, charter, titles, and founder on the 
+[SECOND_LIFE] website. You are responsible for indicating if any
+of the above content is considered Mature according to the
+Community Standards.
+		</message>
+	</alert>
+	<alert modal="true" name="BlankClassifiedName">
+		<message name="message">
+			You must specify a name for your classified.
+		</message>
+	</alert>
+	<alert modal="true" name="MinClassifiedPrice">
+		<message name="message">
+			Price to pay for listing must be at least L$[MIN_PRICE].
+ 
+Please enter a higher price.
+		</message>
+	</alert>
+	<alert modal="true" name="CantLoadVertexShaders">
+		<message name="message">
+			Unable to load Vertex Shaders.
+		</message>
+	</alert>
+	<alert modal="true" name="ConfirmObjectDeleteLock">
+		<message name="message">
+			At least one of the items you have selected is locked.
+
+Are you sure you want to delete these items?
+		</message>
+		<option name="Yes">
+			OK
+		</option>
+		<option name="No">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="ConfirmObjectDeleteNoCopy">
+		<message name="message">
+			At least one of the items you have selected is not copyable.
+
+Are you sure you want to delete these items?
+		</message>
+		<option name="Yes">
+			OK
+		</option>
+		<option name="No">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="ConfirmObjectDeleteNoOwn">
+		<message name="message">
+			You do not own least one of the items you have selected .
+
+Are you sure you want to delete these items?
+		</message>
+		<option name="Yes">
+			OK
+		</option>
+		<option name="No">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="ConfirmObjectDeleteLockNoCopy">
+		<message name="message">
+			At least one object is locked.
+At least one object is not copyable.
+
+Are you sure you want to delete these items?
+		</message>
+		<option name="Yes">
+			OK
+		</option>
+		<option name="No">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="ConfirmObjectDeleteLockNoOwn">
+		<message name="message">
+			At least one object is locked.
+You do not own least one object.
+
+Are you sure you want to delete these items?
+		</message>
+		<option name="Yes">
+			OK
+		</option>
+		<option name="No">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="ConfirmObjectDeleteNoCopyNoOwn">
+		<message name="message">
+			At least one object is not copyable.
+You do not own least one object.
+
+Are you sure you want to delete these items?
+		</message>
+		<option name="Yes">
+			OK
+		</option>
+		<option name="No">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="ConfirmObjectDeleteLockNoCopyNoOwn">
+		<message name="message">
+			At least one object is locked.
+At least one object is not copyable.
+You do not own least one object.
+
+Are you sure you want to delete these items?
+		</message>
+		<option name="Yes">
+			OK
+		</option>
+		<option name="No">
+			cancel
+		</option>
+	</alert>
+	<alert modal="true" name="ConfirmObjectTakeLock">
+		<message name="message">
+			At least one object is locked.
+
+Are you sure you want to take these items?
+		</message>
+		<option name="Yes">
+			OK
+		</option>
+		<option default="true" name="No">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="ConfirmObjectTakeNoOwn">
+		<message name="message">
+			You do not own all of the objects you are taking.
+If you continue, next owner permissions will be
+applied and possibly restrict your
+ability to modify or copy them.
+
+Are you sure you want to take these items?
+		</message>
+		<option name="Yes">
+			OK
+		</option>
+		<option default="true" name="No">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="ConfirmObjectTakeLockNoOwn">
+		<message name="message">
+			At least one object is locked.
+You do not own all of the objects you are taking.
+If you continue, next owner permissions will be
+applied and possibly restrict your
+ability to modify or copy them.
+However, you can take the current selection.
+
+Are you sure you want to take these items?
+		</message>
+		<option name="Yes">
+			OK
+		</option>
+		<option default="true" name="No">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="CantBuyLandAcrossMultipleRegions">
+		<message name="message">
+			Unable to buy land because selection spans multiple regions.
+
+Please select a smaller area and try again.
+		</message>
+	</alert>
+	<alert modal="true" name="DeedLandToGroup">
+		<message name="message">
+			By deeding this parcel, the group will be required
+to have and maintain sufficient land use credits.
+The purchase price of the land is not refunded to
+the owner. If a deeded parcel is sold, the sale
+price will be divided evenly among group members.
+
+Deed this [AREA] m2 of land to the group
+&apos;[GROUP_NAME]&apos;?
+		</message>
+		<option name="Deed">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="DeedLandToGroupWithContribution">
+		<message name="message">
+			By deeding this parcel, the group will be required
+to have and maintain sufficient land use credits.
+The deed will include a simultaneous land
+contribution to the group from &apos;[FIRST_NAME] [LAST_NAME]&apos;.
+The purchase price of the land is not refunded to
+the owner. If a deeded parcel is sold, the sale
+price will be divided evenly among group members.
+ 
+Deed this [AREA] m2 of land to the group
+&apos;[GROUP_NAME]&apos;?
+		</message>
+		<option name="Deed">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="DisplaySetToSafe">
+		<message name="message">
+			Display settings have been set to safe levels
+because you have specified the -safe option.
+		</message>
+	</alert>
+	<alert modal="true" name="DisplaySetToRecommended">
+		<message name="message">
+			Display settings have been set to recommended levels
+based on your system configuration.
+		</message>
+	</alert>
+	<alert modal="true" name="UnableToConnect">
+		<message name="message">
+			Unable to connect to server.
+Could not request domain name: [HOST_NAME]
+		</message>
+	</alert>
+	<alert modal="true" name="CanNotFindServer">
+		<message name="message">
+			Unable to find the server domain name.
+This could be the result of a lost network connection
+or a server problem.
+
+Please try again in a few minutes, or click Help
+for advice and a link to the system status web page.
+		</message>
+		<option name="OK">
+			OK
+		</option>
+		<option name="Help">
+			Help
+		</option>
+	</alert>
+	<alert modal="true" name="PleaseSelectServer">
+		<message name="message">
+			Please select a server.
+Unable to connect to [IP_ADDRESS]
+		</message>
+	</alert>
+	<alert modal="true" name="SystemMayBeDown">
+		<message name="message">
+			Unable to connect to [SECOND_LIFE]
+The system may be down.
+
+Please try again in a few minutes, or click Help
+for advice and a link to the system status web page.
+		</message>
+		<option name="OK">
+			OK
+		</option>
+		<option name="Help">
+			Help
+		</option>
+	</alert>
+	<alert modal="true" name="ErrorMessage">
+		<message name="message">
+			[ERROR_MESSAGE]
+		</message>
+	</alert>
+	<alert modal="true" name="QuickTimeOutOfDate">
+		<ignore name="ignore">
+			When QuickTime is disabled because it is out of date
+		</ignore>
+		<message name="message">
+			Streaming video has been disabled because the version of 
+QuickTime installed on your system is out of date. 
+
+Visit http://www.apple.com/quicktime/ and download an update.
+		</message>
+	</alert>
+	<alert modal="true" name="AvatarMoved">
+		<message name="message">
+			Your [TYPE] location is not currently available. [HELP] 
+You have been moved into a nearby region.
+		</message>
+	</alert>
+	<alert modal="true" name="ClothingLoading">
+		<message name="message">
+			Your clothing is still downloading. 
+You can use [SECOND_LIFE] normally and other users will see you correctly.
+		</message>
+		<ignore name="ignore">
+			When clothing is taking a long time to download
+		</ignore>
+	</alert>
+	<alert modal="true" name="FirstRun">
+		<message name="message">
+			[SECOND_LIFE] installation is complete.
+
+If this is your first time using [SECOND_LIFE], you will need to create
+an account before you can log on.
+Return to www.secondlife.com to create a new account?
+		</message>
+		<option name="NewAccount...">
+			New Account...
+		</option>
+		<option name="Continue">
+			Continue
+		</option>
+	</alert>
+	<alert modal="true" name="SetByHostFail">
+		<message name="message">
+			Unable to connect to server.
+Could not resolve domain name: [HOST_NAME]
+
+Please check your network connection.
+		</message>
+	</alert>
+	<alert modal="true" name="LoginPacketNeverReceived">
+		<message name="message">
+			We&apos;re having trouble connecting. There may be a problem with your internet connection or the Second Life servers.
+
+You can either check your internet connection and try again in a few minutes, click Help to connect to our support site, or click Teleport to attempt to teleport home.
+		</message>
+		<option name="OK">
+			OK
+		</option>
+		<option name="Help">
+			Help
+		</option>
+		<option name="Teleport">
+			Teleport
+		</option>
+	</alert>
+	<alert modal="true" name="WelcomeNoClothes">
+		<message name="message">
+			Your character will appear in a moment.
+
+Use arrow keys to walk.
+Press the F1 key at any time for help or
+to learn more about [SECOND_LIFE].
+		</message>
+	</alert>
+	<alert modal="true" name="WelcomeChooseSex" nodefault="true">
+		<message name="message">
+			Your character will appear in a moment.
+
+Use arrow keys to walk.
+Press the F1 key at any time for help or
+to learn more about [SECOND_LIFE].
+Please choose the male or female avatar.
+You can change your mind later.
+		</message>
+		<option name="Male">
+			Male
+		</option>
+		<option name="Female">
+			Female
+		</option>
+	</alert>
+	<alert modal="true" name="NotEnoughCurrency">
+		<message name="message">
+			[NAME] L$ [PRICE] You don&apos;t have enough L$ to do that.
+		</message>
+	</alert>
+	<alert modal="true" name="GrantedModifyRights">
+		<message name="message">
+			You have been granted the privilege to modify [FIRST_NAME] [LAST_NAME]&apos;s objects.
+		</message>
+	</alert>
+	<alert modal="true" name="RevokedModifyRights">
+		<message name="message">
+			Your privilege to modify [FIRST_NAME] [LAST_NAME]&apos;s objects has been revoked
+		</message>
+	</alert>
+	<alert modal="true" name="FlushMapVisibilityCaches">
+		<message name="message">
+			This will flush the map caches on this region.
+This is really only useful for debugging. 
+(In production, wait 5 minutes, then everyone&apos;s map will 
+update after they relog.)
+		</message>
+		<option name="OK">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="OnlyCopyContentsOfSingleItem">
+		<message name="message">
+			Unable to copy the contents of more than one item at a time.
+Please select only one object and try again.
+		</message>
+		<option name="OK">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="KickUsersFromRegion">
+		<message name="message">
+			Teleport all Residents in this region home?
+		</message>
+		<option name="OK">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="EstateObjectReturn">
+		<message name="message">
+			Are you sure you want to return objects owned by
+[USER_NAME] ?
+		</message>
+		<option name="Return">
+			OK
+		</option>
+		<option default="true" name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="InvalidTerrainBitDepth">
+		<message name="message">
+			Couldn&apos;t set region textures: 
+Terrain texture [TEXTURE_NUM] has an invalid bit depth of [TEXTURE_BIT_DEPTH].
+
+Replace texture [TEXTURE_NUM] with a 24-bit 512x512 or smaller image
+then click &quot;Apply&quot; again.
+		</message>
+	</alert>
+	<alert modal="true" name="InvalidTerrainSize">
+		<message name="message">
+			Couldn&apos;t set region textures: 
+Terrain texture [TEXTURE_NUM] is too large at [TEXTURE_SIZE_X]x[TEXTURE_SIZE_Y]. 
+
+Replace texture [TEXTURE_NUM] with a 24-bit 512x512 or smaller image
+then click &quot;Apply&quot; again.
+		</message>
+	</alert>
+	<alert modal="true" name="RawUploadStarted">
+		<message name="message">
+			Upload started. It may take up to two minutes, 
+depending on your connection speed.
+		</message>
+	</alert>
+	<alert modal="true" name="ConfirmBakeTerrain">
+		<message name="message">
+			Do you really want to bake the current terrain, 
+make it the center for terrain raise/lower limits 
+and the default for the &apos;Revert&apos; tool?
+		</message>
+		<option name="Bake">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="MaxAllowedAgentOnRegion">
+		<message name="message">
+			You can only have [MAX_AGENTS] Allowed Residents.
+		</message>
+	</alert>
+	<alert modal="true" name="MaxBannedAgentsOnRegion">
+		<message name="message">
+			You can only have [MAX_BANNED] Banned Residents.
+		</message>
+	</alert>
+	<alert modal="true" name="MaxAgentOnRegionBatch">
+		<message name="message">
+			Failure while attempting to add [NUM_ADDED] agents:
+Exceeds the [MAX_AGENTS] [LIST_TYPE] limit by [NUM_EXCESS].
+		</message>
+	</alert>
+
+	<alert modal="true" name="MaxAllowedGroupsOnRegion">
+		<message name="message">
+			You can only have [MAX_GROUPS] Allowed Groups.
+		</message>
+		<option name="Bake">
+			Bake
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="MaxManagersOnRegion">
+		<message name="message">
+			You can only have [MAX_MANAGER] Estate Managers.
+		</message>
+	</alert>
+	<alert modal="true" name="OwnerCanNotBeDenied">
+		<message name="message">
+			Can&apos;t add estate owner to estate &apos;Banned Resident&apos; list.
+		</message>
+	</alert>
+	<alert modal="true" name="CanNotChangeAppearanceUntilLoaded">
+		<message name="message">
+			Can&apos;t change appearance until clothing and shape are loaded.
+		</message>
+	</alert>
+	<alert modal="true" name="ClassifiedMustBeAlphanumeric">
+		<message name="message">
+			The name of your classified must start with a letter 
+from A to Z or a number.  No punctuation is allowed.
+		</message>
+	</alert>
+	<alert modal="true" name="CantSetBuyObject">
+		<message name="message">
+			Can&apos;t set Buy Object, because the object is not for sale. 
+Please set the object for sale and try again.
+		</message>
+	</alert>
+	<alert modal="true" name="FinishedRawDownload">
+		<message name="message">
+			Finished download of raw terrain file to: 
+[DOWNLOAD_PATH].
+		</message>
+	</alert>
+	<alert modal="true" name="DownloadWindowsMandatory">
+		<message name="message">
+			A new version of [SECOND_LIFE] is available.
+[MESSAGE]
+You must download this update to use [SECOND_LIFE].
+		</message>
+		<option name="Download">
+			Download
+		</option>
+		<option name="Quit">
+			Quit
+		</option>
+	</alert>
+	<alert modal="true" name="DownloadWindows">
+		<message name="message">
+			An updated version of [SECOND_LIFE] is available.
+[MESSAGE]
+This update is not required, but we suggest you install it to improve performance and stability.
+		</message>
+		<option name="Download">
+			Download
+		</option>
+		<option default="true" name="Continue">
+			Continue
+		</option>
+	</alert>
+	<alert modal="true" name="DownloadWindowsReleaseForDownload">
+		<message name="message">
+			An updated version of [SECOND_LIFE] is available.
+[MESSAGE]
+This update is not required, but we suggest you install it to improve performance and stability.
+		</message>
+		<option name="Download">
+			Download
+		</option>
+		<option name="Continue">
+			Continue
+		</option>
+	</alert>
+	<alert modal="true" name="DownloadMacMandatory">
+		<message name="message">
+			A new version of [SECOND_LIFE] is available.
+[MESSAGE]
+You must download this update to use [SECOND_LIFE].
+
+Download to your Applications folder?
+		</message>
+		<option name="Download">
+			Download
+		</option>
+		<option name="Quit">
+			Quit
+		</option>
+	</alert>
+	<alert modal="true" name="DownloadMac">
+		<message name="message">
+			An updated version of [SECOND_LIFE] is available.
+[MESSAGE]
+This update is not required, but we suggest you install it to improve performance and stability.
+ 
+Download to your Applications folder?
+		</message>
+		<option name="Download">
+			Download
+		</option>
+		<option default="true" name="Continue">
+			Continue
+		</option>
+	</alert>
+	<alert modal="true" name="DownloadMacReleaseForDownload">
+		<message name="message">
+			An updated version of [SECOND_LIFE] is available.
+[MESSAGE]
+This update is not required, but we suggest you install it to improve performance and stability.
+ 
+Download to your Applications folder?
+		</message>
+		<option name="Download">
+			Download
+		</option>
+		<option name="Continue">
+			Continue
+		</option>
+	</alert>
+	<alert modal="true" name="DeedObjectToGroup">
+		<message name="message">
+			Deeding this object will cause the group to:
+* Receive L$ paid into the object
+		</message>
+		<ignore name="ignore">
+			When deeding objects to groups
+		</ignore>
+		<option name="Deed">
+			Deed
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="WebLaunchExternalTarget">
+		<message name="message">
+			Open your system Web browser to view this content?
+		</message>
+		<ignore name="ignore">
+			When opening your system browser to view a Web page
+		</ignore>
+		<option name="Open">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="WebLaunchJoinNow">
+		<message name="message">
+			Go to www.secondlife.com to manage your account?
+		</message>
+		<ignore name="ignore">
+			When launching web browser to manage your account
+		</ignore>
+		<option name="OK">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="WebLaunchBugReport101">
+		<message name="message">
+			Visit the [SECOND_LIFE] Wiki and Learn how to Report Bugs Correctly.
+		</message>
+		<ignore name="ignore">
+			When launching web browser to view the Bug Reporting 101 Wiki
+		</ignore>
+		<option name="Gotopage">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="WebLaunchSecurityIssues">
+		<message name="message">
+			Visit the [SECOND_LIFE] Wiki for Details of How to Report a Security Issue.
+		</message>
+		<ignore name="ignore">
+			When launching web browser to view Security Issues Wiki
+		</ignore>
+		<option name="Gotopage">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="WebLaunchQAWiki">
+		<message name="message">
+			Visit the [SECOND_LIFE] QA Wiki.
+		</message>
+		<ignore name="ignore">
+			When launching web browser to view the QA Wiki
+		</ignore>
+		<option name="Gotopage">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="WebLaunchPublicIssue">
+		<message name="message">
+			Visit the [SECOND_LIFE] Public Issue Tracker, Where you can Report Bugs and other Issues.
+		</message>
+		<ignore name="ignore">
+			When launching web browser to view the Public Issue Tracker
+		</ignore>
+		<option name="Gotopage">
+			Go to page
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="WebLaunchPublicIssueHelp">
+		<message name="message">
+			Visit the [SECOND_LIFE] Wiki for info on how to use the Public Issue Tracker.
+		</message>
+		<ignore name="ignore">
+			When launching web browser to view Public Issue Tracker Wiki
+		</ignore>
+		<option name="Gotopage">
+			Go to page
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="WebLaunchForums">
+		<message name="message">
+			Search the [SECOND_LIFE] Knowledge Base for the latest tips and tricks.
+		</message>
+		<ignore name="ignore">
+			When launching web browser to view the knowledge base
+		</ignore>
+		<option name="Gotopage">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="WebLaunchSupport">
+		<message name="message">
+			Contact [SECOND_LIFE] Support.
+		</message>
+		<ignore name="ignore">
+			When launching web browser to contact support
+		</ignore>
+		<option name="Gotopage">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="WebLaunchSupportWiki">
+		<message name="message">
+			Go to the Official Linden Blog, for the Latest News and Information.
+		</message>
+		<ignore name="ignore">
+			When launching web browser to view the blog
+		</ignore>
+		<option name="Gotopage">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="WebLaunchLSLGuide">
+		<message name="message">
+			Go to the Scripting Guide for scripting help?
+		</message>
+		<ignore name="ignore">
+			When launching web browser to view the Scripting Guide
+		</ignore>
+		<option name="Gotopage">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="WebLaunchLSLWiki">
+		<message name="message">
+			Go to the LSL Portal for scripting help?
+		</message>
+		<ignore name="ignore">
+			When launching web browser to view the LSL Portal
+		</ignore>
+		<option name="Gotopage">
+			Go to page
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="ReturnToOwner">
+		<message name="message">
+			Are you sure you want to return the selected
+objects to their owners? Transferable deeded
+objects will be returned to their previous owners.
+
+*WARNING* No-transfer deeded objects will be deleted!
+		</message>
+		<ignore name="ignore">
+			When returning objects to their owners
+		</ignore>
+		<option name="Return">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert name="GroupLeaveConfirmOfficer">
+		<message name="message">
+			You are currently an officer of the group [GROUP].
+Leave Group?
+		</message>
+		<option name="Leave">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert name="GroupLeaveConfirmMember">
+		<message name="message">
+			You are currently a member of the group [GROUP].
+Leave Group?
+		</message>
+		<option name="Leave">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert name="ConfirmKick" unique="true">
+		<message name="message">
+			Do you REALLY want to kick all users off the grid?
+		</message>
+		<option name="Kick">
+			Kick All Users
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="MuteLinden">
+		<message name="message">
+			Sorry, you cannot mute a Linden.
+		</message>
+		<option name="OK">
+			OK
+		</option>
+	</alert>
+	<alert modal="true" name="MuteByNameFailed" title="Mute object by name failed">
+		<message name="message">
+			You already have muted this name.
+		</message>
+		<option name="OK">
+			OK
+		</option>
+	</alert>
+	<alert name="RemoveItemWarn">
+		<message name="message">
+			Though permitted, deleting contents may damage the
+object. Do you want to delete that item?
+		</message>
+		<option name="Yes">
+			OK
+		</option>
+		<option default="true" name="No">
+			Cancel
+		</option>
+	</alert>
+	<alert name="CantRateOwnedByGroup">
+		<message name="message">
+			Can&apos;t rate this object&apos;s owner, object is owned by a group.
+		</message>
+		<option name="OK">
+			OK
+		</option>
+	</alert>
+	<alert name="CantOfferCallingCard">
+		<message name="message">
+			Cannot offer a calling card at this time. Please try again in a moment.
+		</message>
+		<option name="OK">
+			OK
+		</option>
+	</alert>
+	<alert name="CantOfferFriendship">
+		<message name="message">
+			Cannot offer friendship at this time. Please try again in a moment.
+		</message>
+		<option name="OK">
+			OK
+		</option>
+	</alert>
+	<alert name="CantSetHome">
+		<message name="message">
+			Can&apos;t set home to here.
+		</message>
+		<option name="OK">
+			OK
+		</option>
+	</alert>
+	<alert name="BusyModeSet">
+		<message name="message">
+			Busy mode set.
+Chat and instant messages will be hidden. Instant
+messages will get your Busy mode response. All teleportation
+offers will be declined. All inventory offers will go to your
+Trash.
+		</message>
+		<ignore name="ignore">
+			When setting busy mode
+		</ignore>
+		<option name="OK">
+			OK
+		</option>
+	</alert>
+	<alert name="NoPVPDetected">
+		<message name="message">
+			No player vs. player (PvP) abuse detected
+		</message>
+		<option name="OK">
+			OK
+		</option>
+	</alert>
+	<alert name="NotecardAttachPermFail">
+		<message name="message">
+			Only items with unrestricted &apos;next owner&apos; permissions
+can be attached to notecards.
+		</message>
+		<option name="OK">
+			OK
+		</option>
+	</alert>
+	<alert name="JoinedTooManyGroupsMember">
+		<message name="message">
+			You are a member of too many groups to join
+another one. Please leave at least one group
+before joining this one, or decline the offer.
+To leave a group select the &apos;Groups..&apos; option
+from the &apos;Edit&apos; menu.
+[NAME] has invited you to join a group as a member.
+[INVITE]
+		</message>
+		<option name="Join">
+			Join
+		</option>
+		<option name="Decline">
+			Decline
+		</option>
+	</alert>
+	<alert name="JoinedTooManyGroupsOfficer">
+		<message name="message">
+			You are a member of too many groups to join
+another one. Please leave at least one group
+before joining this one, or decline the offer.
+To leave a group select the &apos;Groups..&apos; option
+from the &apos;Edit&apos; menu.
+[NAME] has invited you to join a group as an officer.
+[INVITE]
+		</message>
+		<option name="Join">
+			Join
+		</option>
+		<option name="Decline">
+			Decline
+		</option>
+	</alert>
+	<alert name="KickUser">
+		<message name="message">
+			Kick this user with what message?
+		</message>
+		<editline name="editline">
+			An administrator has logged you off.
+		</editline>
+		<option name="OK">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert name="KickAllUsers">
+		<message name="message">
+			Kick everyone currently on the grid with what message?
+		</message>
+		<editline name="editline">
+			An administrator has logged you off.
+		</editline>
+		<option name="OK">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert name="FreezeUser">
+		<message name="message">
+			Freeze this user with what message?
+		</message>
+		<editline name="editline">
+			You have been frozen. You cannot move or chat. An administrator will contact you via instant message (IM).
+		</editline>
+		<option name="OK">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert name="UnFreezeUser">
+		<message name="message">
+			Unfreeze this user with what message?
+		</message>
+		<editline name="editline">
+			You are no longer frozen.
+		</editline>
+		<option name="OK">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert name="ExpungeUser">
+		<message name="message">
+			Enter the agent id of a user to expunge
+		</message>
+		<editline />
+		<option name="OK">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="OfferTeleport">
+		<message name="message">
+			Offer a teleport to your location with the following message?
+		</message>
+		<editline name="editline">
+			Join me in [REGION]
+		</editline>
+		<option name="OK">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="OfferTeleportFromGod">
+		<message name="message">
+			God summon user to your location?
+		</message>
+		<editline name="editline">
+			Join me in [REGION]
+		</editline>
+		<option name="OK">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="TeleportFromLandmark">
+		<message name="message">
+			Are you sure you want to teleport?
+		</message>
+		<ignore name="ignore">
+			When teleporting from a landmark in inventory
+		</ignore>
+		<option name="Teleport">
+			Teleport
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert name="MessageEstate" title="Message everyone in your Estate">
+		<message name="message">
+			Type a short announcement which will be
+sent to everyone currently in your estate.
+		</message>
+		<editline name="editline" />
+		<option name="OK">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert name="ChangeLindenEstate" title="Change Linden Estate">
+		<message name="message">
+			You are about to change a Linden owned estate (mainland, 
+teen grid, orientation, etc.). 
+
+This is EXTREMELY DANGEROUS because it can fundamentally 
+affect the user experience.  On the mainland, it will change 
+thousands of regions and make the spaceserver hiccup.
+ 
+Proceed?
+		</message>
+		<option name="ChangeEstate">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert name="ChangeLindenAccess" title="Change Linden Estate Access">
+		<message name="message">
+			You are about to change the access list for a Linden owned 
+estate (mainland, teen grid, orientation, etc.). 
+
+This is DANGEROUS and should only be done to invoke the 
+hack allowing objects/L$ to be transfered in/out of 
+a grid. 
+It will change thousands of regions and make the 
+spaceserver hiccup.
+		</message>
+		<option name="ChangeEstate">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert name="EstateAllowedAgentAdd" title="Select estate">
+		<message name="message">
+			Add to allowed list for this estate only or for [ALL_ESTATES]?
+		</message>
+		<option name="ThisEstate">
+			This Estate
+		</option>
+		<option name="AllEstates">
+			All Estates
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert name="EstateAllowedAgentRemove" title="Select estate">
+		<message name="message">
+			Remove from allowed list for this estate only or for [ALL_ESTATES]?
+		</message>
+		<option name="ThisEstate">
+			This Estate
+		</option>
+		<option name="AllEstates">
+			All Estates
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert name="EstateAllowedGroupAdd" title="Select estate">
+		<message name="message">
+			Add to group allowed list for this estate only or for [ALL_ESTATES]?
+		</message>
+		<option name="ThisEstate">
+			This Estate
+		</option>
+		<option name="AllEstates">
+			All Estates
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert name="EstateAllowedGroupRemove" title="Select estate">
+		<message name="message">
+			Remove from group allowed list for this estate only or [ALL_ESTATES]?
+		</message>
+		<option name="ThisEstate">
+			This Estate
+		</option>
+		<option name="AllEstates">
+			All Estates
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert name="EstateBannedAgentAdd" title="Select estate">
+		<message name="message">
+			Deny access for this estate only or for [ALL_ESTATES]?
+		</message>
+		<option name="ThisEstate">
+			This Estate
+		</option>
+		<option name="AllEstates">
+			All Estates
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert name="EstateBannedAgentRemove" title="Select estate">
+		<message name="message">
+			Remove this Resident from the ban list for  access for this estate only or for [ALL_ESTATES]?
+		</message>
+		<option name="ThisEstate">
+			This Estate
+		</option>
+		<option name="AllEstates">
+			All Estates
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert name="EstateManagerAdd" title="Select estate">
+		<message name="message">
+			Add estate manager for this estate only or for [ALL_ESTATES]?
+		</message>
+		<option name="ThisEstate">
+			This Estate
+		</option>
+		<option name="AllEstates">
+			All Estates
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert name="EstateManagerRemove" title="Select estate">
+		<message name="message">
+			Remove estate manager for this estate only or for [ALL_ESTATES]?
+		</message>
+		<option name="ThisEstate">
+			This Estate
+		</option>
+		<option name="AllEstates">
+			All Estates
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert name="EstateCovenantChange" title="Select estate">
+		<message name="message">
+			Change Covenant Message for this estate only or for [ALL_ESTATES]?
+		</message>
+		<option name="ThisEstate">
+			This Estate
+		</option>
+		<option name="AllEstates">
+			All Estates
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert name="EstateKickUser" title="Confirm Kick">
+		<message name="message">
+			Kick [EVIL_USER] from this estate?
+		</message>
+		<option name="Kick">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="EstateChangeCovenant">
+		<message name="message">
+			Are you sure you want to change the Estate Covenant?
+		</message>
+		<option name="Change">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="ProblemImportingEstateCovenant">
+		<message name="message">
+			Problem importing estate covenant.
+		</message>
+		<option name="OK">
+			OK
+		</option>
+	</alert>
+	<alert modal="true" name="ProblemAddingEstateManager">
+		<message name="message">
+			Problems adding a new estate manager.  One or more estates may have a full manager list.
+		</message>
+	</alert>
+	<alert modal="true" name="ProblemAddingEstateGeneric">
+		<message name="message">
+			Problems adding to this estate list.  One or more estates may have a full list.
+		</message>
+	</alert>
+	<alert modal="true" name="UnableToLoadNotecard">
+		<message name="message">
+			Unable to load notecard&apos;s asset at this time.
+		</message>
+		<option name="OK">
+			OK
+		</option>
+	</alert>
+	<alert modal="true" name="NotAllowedToViewNotecard">
+		<message name="message">
+			Insufficient permissions to view notecard associated with asset ID requested.
+		</message>
+		<option name="OK">
+			OK
+		</option>
+	</alert>
+	<alert modal="true" name="MissingNotecardAssetID">
+		<message name="message">
+			Asset ID for notecard is missing from database.
+		</message>
+		<option name="OK">
+			OK
+		</option>
+	</alert>
+	<alert name="PublishClassified">
+		<message name="message">
+			Remember: Classified ad fees are non-refundable.
+
+Publish this classified now for L$[AMOUNT]?
+		</message>
+		<option name="Publish">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+  <alert name="SetClassifiedMature">
+    <message name="message">
+Does this classified contain Mature content?
+    </message>
+    <option name="Mature">
+      Yes
+    </option>
+    <option name="Not Mature">
+      No
+    </option>
+    <option name="Cancel">
+      Cancel
+    </option>
+  </alert>
+  <alert name="SetGroupMature">
+    <message name="message">
+Does this group contain Mature content?
+    </message>
+    <option name="Mature">
+      Yes
+    </option>
+    <option name="Not Mature">
+      No
+    </option>
+    <option name="Cancel">
+      Cancel
+    </option>
+  </alert>
+	<alert name="ConfirmRestart" title="Confirm restart">
+		<message name="message">
+			Do you really want to restart this region in 2 minutes?
+		</message>
+		<option name="Restart">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert name="MessageRegion" title="Message everyone in this region">
+		<message name="message">
+			Type a short announcement which will be
+sent to everyone in this region.
+		</message>
+		<editline name="editline" />
+		<option name="OK">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="HelpRegionBlockTerraform" title="Block Terraform">
+		<message name="message">
+			If this box is checked, land owners will not be able to terraform
+their land regardless of the per-parcel &apos;Edit Terrain&apos; setting.
+
+Default: off
+		</message>
+	</alert>
+	<alert modal="true" name="HelpRegionBlockFly" title="Block Fly">
+		<message name="message">
+			If this box is checked, people will not be able to fly in this region
+regardless of the per-parcel &apos;Fly&apos; setting.
+ 
+Default: off
+		</message>
+	</alert>
+	<alert modal="true" name="HelpRegionAllowDamage" title="Allow Damage">
+		<message name="message">
+			If this box is checked, the health system across all parcels
+regardless of individual parcel settings. If this box is left
+unchecked, individual parcel owners will still be able to 
+activate the health system on their parcels.
+ 
+Default: off
+		</message>
+	</alert>
+	<alert modal="true" name="HelpRegionAgentLimit" title="Agent Limit">
+		<message name="message">
+			Sets the maximum number of avatars allowed in this region.
+Performance may vary depending on the
+number avatars present.
+ 
+Default: 40
+		</message>
+	</alert>
+	<alert modal="true" name="HelpRegionObjectBonus" title="Object Bonus">
+		<message name="message">
+			The Object Bonus is a multiplier for primitives allowed on any given
+parcel. The range allowed is 1 to 10. Set at &apos;1&apos;, each 512m2 parcel
+is allowed 117 objects. Set at &apos;2&apos;, each 512m2 parcel is
+allowed 234, or twice as many, and so on. The max number of objects
+allowed per region remains 15,000 no matter what the
+Object Bonus is. Once set, be aware that lowering the Object Bonus may cause objects to be returned or deleted. 
+ 
+Default: 1.0
+		</message>
+	</alert>
+	<alert modal="true" name="HelpRegionMaturity" title="Maturity">
+		<message name="message">
+			Sets the maturity of the region, as shown at the top
+			of the screen and in pop-up tips on the map. This setting
+also affects search results - Residents can choose not to find
+content in Mature regions.
+ 
+It may take some time for this change to be reflected 
+on the map.
+ 
+Default: PG
+		</message>
+	</alert>
+	<alert modal="true" name="HelpRegionRestrictPushObject" title="Restrict Pushing">
+		<message name="message">
+			This checkbox sets the full region to restricted push permissions.
+When enabled, Residents may only be pushed by themselves
+or by the parcel&apos;s owner.
+(Push refers to the llPushObject() LSL function.)
+ 
+Default: Off
+		</message>
+	</alert>
+	<alert modal="true" name="HelpParcelChanges" title="Parcel Join/Subdivide">
+		<message name="message">
+			This checkbox sets whether or not parcels not owned by the estate owner
+can be joined or subdivided. 
+If this option is unchecked:
+ * Only estate owners or managers can join or subdivide parcels. 
+ * They may only join or subdivide parcels belonging to the owner, 
+       or to a group where they have the appropriate group powers.
+If this option is checked:
+ * All parcel owners can join or subdivide the parcels they own. 
+ * For group owned parcels, those with appropriate group powers
+       may join or subdivide parcels.
+ 
+Default: Checked
+		</message>
+	</alert>
+	<alert modal="true" name="HelpRegionSearch" title="Do Not Show In Search">
+		<message name="message">
+			Checking this box will block parcel owners from listing their parcels in search
+Default: Off
+		</message>
+	</alert>
+	<alert modal="true" name="HelpParcelSearch" title="Do Not Show In Search">
+		<message name="message">
+			Checking this box will show:
+- this parcel in search results
+- this parcel&apos;s public objects
+		</message>
+	</alert>
+	<alert modal="true" name="RegionMaturityChange" title="Changed Region Maturity">
+		<message name="message">
+			The maturity rating for this region has been updated. 
+It may take some time for the change to be 
+reflected on the map.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpRegionLandResell" title="Land Resale">
+		<message name="message">
+			Estate owners and managers can sell any land owned by the estate owner. 
+If this option is left unchecked, buyers cannot resell their land in this region. 
+If this option is checked, buyers can resell their land in this region. 
+ 
+Default: Disallow
+		</message>
+	</alert>
+	<alert modal="true" name="HelpEstateCovenantID" title="Covenant Asset ID">
+		<message name="message">
+			Sets the notecard asset ID for the Estate Covenant belonging to this
+estate. 
+ 
+Default: 00000000-0000-0000-0000-000000000000 or none
+		</message>
+	</alert>
+	<alert modal="true" name="HelpRegionDisableScripts" title="Disable Scripts">
+		<message name="message">
+			When sim performance is poor, a script may be to blame. Open the
+Statistics Bar (Ctrl-Shift-1). Look at the Simulator Physics FPS.
+If it is lower than 45,  open the Time panel located at the 
+bottom of the Stats Bar. If Script Time reads 25 ms or higher, click 
+the Get Top Scripts button. You will be given the name and location 
+of scripts that may be causing poor performance.
+ 
+Checking the Disable Scripts box and then pressing the Apply 
+button will temporarily disable all scripts in this region. You may 
+need to do this in order to travel to the location of a noted 
+&apos;top script&apos;. Once you have arrived at the location, investigate the 
+script to determine if it is causing the problem. You may want to 
+contact the owner of the script or delete or return the object. 
+Uncheck the Disable Script box and then Apply to reactivate 
+the scripts in the region.
+ 
+Default: off
+		</message>
+	</alert>
+	<alert modal="true" name="HelpRegionDisableCollisions" title="Disable Collisions">
+		<message name="message">
+			When sim performance is poor, physical objects may be to blame. 
+Open the Statistics Bar (Ctrl-Shift-1). Look at the Simulator 
+Physics FPS.  If it is lower than 45, open the Time panel 
+located at the bottom of the Stats Bar. If Sim Time (Physics) 
+reads 20 ms or higher, click the Get Top Colliders button. 
+You will be given the name and location of physical objects 
+that may be causing poor performance.
+ 
+Checking the Disable Collisions box and then pressing the Apply
+button will temporarily disable object-object collisions. You may 
+need to do this in order to travel to the location of a noted 
+&apos;top collider&apos;. Once you have arrived at the location, investigate the 
+object - is it constantly colliding with other objects? You may want to 
+contact the owner of the object or delete or return the object. 
+Uncheck the Disable Collisions box and then Apply to reactivate 
+collisions in the region.
+ 
+Default: off
+		</message>
+	</alert>
+	<alert modal="true" name="HelpRegionDisablePhysics" title="Disable Physics">
+		<message name="message">
+			Disable Physics is similar to Disable Collisions, except all 
+physics simulation is disabled.  This means that not only will 
+objects stop colliding, but avatars will be unable to move. 
+ 
+This should only be used when Disable Collisions does not 
+give back enough performance to the region to investigate 
+a physics problem or Top Collider.
+ 
+Be sure to re-enable physics when you are done, or avatars 
+will continue to be unable to move. 
+ 
+Default: off
+		</message>
+	</alert>
+	<alert modal="true" name="HelpRegionTopColliders" title="Top Colliders">
+		<message name="message">
+			Show a list of objects experiencing the greatest number 
+of potential object-object collisions.  These objects can 
+slow performance.  Select View &gt; Statistics Bar and 
+look under Simulator &gt; Time &gt; Sim Time (Physics) to see 
+if more than 20 ms is being spent in physics.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpRegionTopScripts" title="Top Scripts">
+		<message name="message">
+			Show a list of objects spending the most time running 
+LSL scripts.  These objects can slow performance. 
+Select View &gt; Statistics Bar and look under 
+Simulator &gt; Time &gt; Script Time to see if more than 
+25 ms is being spent in scripts.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpRegionRestart" title="Restart Region">
+		<message name="message">
+			Restart the server process running this region after a 
+two minute warning.  All Residents in the region will be 
+disconnected.  The region will save its data, and should 
+come back up within 90 seconds. 
+ 
+Restarting the region will not fix most performance 
+problems, and should usually be used only when directed.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpRegionWaterHeight" title="Water Height">
+		<message name="message">
+			This is the height in meters where water appears. If 
+this setting is anything other than 20 and you have 
+water that is adjacent to the edge of world or &apos;void&apos; 
+water, there will be a visible gap. 
+ 
+Default: 20
+		</message>
+	</alert>
+	<alert modal="true" name="HelpRegionTerrainRaise" title="Terrain Raise">
+		<message name="message">
+			This is the distance in meters that parcel owners can raise 
+their terrain above the &apos;baked&apos; terrain default 
+height. 
+ 
+Default: 4
+		</message>
+	</alert>
+	<alert modal="true" name="HelpRegionTerrainLower" title="Terrain Lower">
+		<message name="message">
+			This is the distance in meters that parcel owners can lower 
+their terrain below the &apos;baked&apos; terrain default 
+height. 
+ 
+Default: -4
+		</message>
+	</alert>
+	<alert modal="true" name="HelpRegionUploadRaw" title="Upload RAW Terrain">
+		<message name="message">
+			This button uploads a .RAW file to the region you are in. 
+The file must have the correct dimensions (RGB, 256x256) 
+and 13 channels.  The best way to create a 
+terrain file is to download the existing RAW file.  A good 
+first step is to modify the red channel (land height), 
+and upload it. 
+ 
+The upload can take up to 45 seconds. Note that uploading a 
+terrain file *will not* move the objects that are on the land, 
+only the terrain itself and the permissions associated with the 
+parcels.  This can result in objects going underground. 
+ 
+For more information on editing region height fields, consult F1 Help.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpRegionDownloadRaw" title="Download RAW Terrain">
+		<message name="message">
+			This button downloads a file containing the height field data, 
+parcel dimensions, parcel for sale status and some parcel permissions 
+for this region. When opening the file in a program such as 
+Photoshop you must specify the document&apos;s dimensions which 
+are: RGB, 256x256 with 13 channels. This terrain file cannot 
+be opened in any other way. 
+ 
+For more information on editing region height fields, consult F1 help.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpRegionUseEstateSun" title="Use Estate Sun">
+		<message name="message">
+			This checkbox makes the sun position in this region the 
+same as the sun position in the rest of the estate. 
+ 
+Default: on
+		</message>
+	</alert>
+	<alert modal="true" name="HelpRegionFixedSun" title="Fixed Sun">
+		<message name="message">
+			This checkbox sets the sun position to the position 
+in the Phase slider and stops the sun from moving. 
+ 
+Default: off
+		</message>
+	</alert>
+	<alert modal="true" name="HelpRegionBakeTerrain" title="Bake Terrain">
+		<message name="message">
+			This button saves the current shape of the terrain as the 
+new default for the region. Once baked, the land can revert 
+to the saved shape whenever you or others use the Edit Terrain
+&apos;Revert&apos; option. The baked terrain is also the middle 
+point for the terrain raise and lower limits.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpEstateEstateManager" title="Estate Managers">
+		<message name="message">
+			An estate manager is a Resident to whom you have delegated 
+control of region and estate settings.  An estate manager 
+can change any setting in these panels, except for uploading, 
+downloading, and baking terrain.  In particular, they can 
+allow or ban Residents from your estate.  
+ 
+Estate managers can only be added or removed by the owner 
+of the estate, not by each other.  Please only choose 
+Residents you trust as estate managers, as you will be 
+ultimately responsible for their actions.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpEstateUseGlobalTime" title="Use Global Time">
+		<message name="message">
+			This checkbox makes the sun in your estate follow 
+the same position as on the Linden-owned &apos;mainland&apos; 
+estates. 
+ 
+Default: on
+		</message>
+	</alert>
+	<alert modal="true" name="HelpEstateFixedSun" title="Fixed Sun">
+		<message name="message">
+			This checkbox sets the sun position to the position 
+in the Phase slider and stops the sun from moving.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpEstateExternallyVisible" title="Public Access">
+		<message name="message">
+			This checkbox sets whether Residents who are on other estates can enter this
+estate without being on an access list.
+ 
+Default: on
+		</message>
+	</alert>
+	<alert modal="true" name="HelpEstateAllowDirectTeleport" title="Allow Direct Teleport">
+		<message name="message">
+			When checked, allows Residents to directly teleport to any 
+point in your estate.  When unchecked, Residents teleport 
+to the nearest telehub. 
+ 
+Default: off
+		</message>
+	</alert>
+	<alert modal="true" name="HelpEstateAllowResident" title="Allow Access">
+		<message name="message">
+			Access to this estate will be limited to Residents 
+listed here and any groups below.  This setting is 
+only available when Public Access is 
+unchecked.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpEstateAllowGroup" title="Allow Group Access">
+		<message name="message">
+			Access to this estate will be limited to groups 
+listed here and any Residents above.  This setting is 
+only available when Public Access is 
+unchecked.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpEstateAbuseEmailAddress" title="Abuse Email Address">
+		<message name="message">
+			Setting this to a valid email address will cause 
+abuse reports on this estate to be sent to that address. 
+Setting it blank will cause abuse reports to be sent
+only to Linden Lab.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpEstateBanResident" title="Deny Access">
+		<message name="message">
+			Residents on this list are denied access to your estate, 
+regardless of any other settings.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpEstateVoiceChat" title="Allow Voice Chat">
+		<message name="message">
+			Parcels in this estate are allowed to have their own voice
+channels in which residents may hear and talk with others
+nearby.
+
+Default: off
+		</message>
+	</alert>
+	<alert modal="true" name="VoiceVersionMismatch" title="Voice Version Mismatch">
+		<message name="message">
+			This version of Second Life is not compatible with the Voice Chat feature in this region. In order for Voice Chat to function correctly you will need to update Second Life.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpEstateCovenant" title="Estate Covenant">
+		<message name="message">
+			Setting an estate covenant enables you to sell parcels 
+within that estate. If a covenant is not set, you cannot 
+sell the land. The notecard for your covenant can be empty 
+if you do not wish to apply any rules or advise buyers of 
+anything in relation to the land before they buy it. 
+ 
+A covenant can be used to communicate rules, guidelines, 
+cultural information or simply your own expectations to the 
+prospective buyer. This can include zoning, building regulations, 
+payment options or any other information you feel it is 
+important for the new owner to have seen and to have agreed 
+to before they purchase. 
+ 
+The buyer must agree to the covenant by ticking the check box 
+before they will be able to finish the purchase. Estate 
+covenants are always visible in the About Land dialog for 
+any parcels that have one set.
+		</message>
+	</alert>
+	<alert modal="true" name="BuyObjectOneOnly" title="Can&apos;t Buy Objects">
+		<message name="message">
+			Unable to buy more than one object at a time. 
+Please select only one object and try again.
+		</message>
+	</alert>
+	<alert modal="true" name="BuyObjectOneOwner" title="Can&apos;t Buy Objects">
+		<message name="message">
+			Cannot buy objects from different owners at the same time. 
+Please select only one object and try again.
+		</message>
+	</alert>
+	<alert modal="true" name="BuyContentsOneOnly" title="Can&apos;t Buy Contents">
+		<message name="message">
+			Unable to buy the contents of more than one object at a time. 
+Please select only one object and try again.
+		</message>
+	</alert>
+	<alert modal="true" name="BuyContentsOneOwner" title="Can&apos;t Buy Contents">
+		<message name="message">
+			Cannot buy objects from different owners at the same time. 
+Please select only one object and try again.
+		</message>
+	</alert>
+	<alert name="PermYes">
+		<message name="message">
+			Yes
+		</message>
+	</alert>
+	<alert name="PermNo">
+		<message name="message">
+			No
+		</message>
+	</alert>
+	<alert modal="true" name="BuyOriginal">
+		<message name="message">
+			Buy original object from [OWNER] for L$[PRICE]?
+You will become the owner of this object.
+You will be able to:
+ Modify: [MODIFYPERM]
+ Copy: [COPYPERM]
+ Resell or Give Away: [RESELLPERM]
+		</message>
+		<option name="Buy">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="BuyOriginalNoOwner">
+		<message name="message">
+			Buy original object for L$[PRICE]?
+You will become the owner of this object.
+You will be able to:
+ Modify: [MODIFYPERM]
+ Copy: [COPYPERM]
+ Resell or Give Away: [RESELLPERM]
+		</message>
+		<option name="Buy">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="BuyCopy">
+		<message name="message">
+			Buy a copy from [OWNER] for L$[PRICE]?
+The object will be copied to your inventory.
+You will be able to:
+ Modify: [MODIFYPERM]
+ Copy: [COPYPERM]
+ Resell or Give Away: [RESELLPERM]
+		</message>
+		<option name="Buy">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="BuyCopyNoOwner">
+		<message name="message">
+			Buy a copy for L$[PRICE]?
+The object will be copied to your inventory.
+You will be able to:
+ Modify: [MODIFYPERM]
+ Copy: [COPYPERM]
+ Resell or Give Away: [RESELLPERM]
+		</message>
+		<option name="Buy">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="BuyContents">
+		<message name="message">
+			Buy contents from [OWNER] for L$[PRICE]?
+They will be copied to your inventory.
+		</message>
+		<option name="Buy">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="BuyContentsNoOwner">
+		<message name="message">
+			Buy contents for L$[PRICE]?
+They will be copied to your inventory.
+		</message>
+		<option name="Buy">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="ConfirmPurchase" nodefault="true">
+		<message name="message">
+			This transaction will:
+[ACTION]
+ 
+Are you sure you want to proceed with this purchase?
+		</message>
+		<option name="Confirm">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="ConfirmPurchasePassword" nodefault="true">
+		<message name="message">
+			This transaction will:
+[ACTION]
+ 
+Are you sure you want to proceed with this purchase?
+Please re-enter your password and click OK.
+		</message>
+		<editline />
+		<option name="ConfirmPurchase">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert name="SetPickLocation">
+		<message name="message">
+			Note:
+You have updated the location
+of this pick but the other details
+will retain their original values.
+		</message>
+		<option name="OK">
+			OK
+		</option>
+	</alert>
+	<alert modal="true" name="MoveInventoryFromObject">
+		<message name="message">
+			You have selected &apos;no copy&apos; inventory items.
+These items will be moved to your inventory, not copied.
+ 
+Move the inventory item(s)?
+		</message>
+		<ignore name="ignore">
+			When moving no-copy inventory from objects
+		</ignore>
+		<option name="Move">
+			OK
+		</option>
+		<option name="Don&apos;tMove">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="MoveInventoryFromScriptedObject">
+		<message name="message">
+			You have selected &apos;no copy&apos; inventory items.  These items 
+will be moved to your inventory, not copied.
+Because this object is scripted, moving these items 
+to your inventory may cause the script to malfunction. 
+ 
+Move the inventory item(s)?
+		</message>
+		<ignore name="ignore">
+			When moving no-copy inventory from scripted objects
+		</ignore>
+		<option name="Move">
+			OK
+		</option>
+		<option name="Don&apos;tMove">
+			Cancel
+		</option>
+	</alert>
+	<alert name="ClickActionNotPayable">
+		<message name="message">
+			Warning: The Pay Object click action has been set, but it 
+will only work if a script is added with a money() event.
+		</message>
+		<ignore name="ignore">
+			When Setting &apos;Pay&apos; on objects without money() events
+		</ignore>
+	</alert>
+	<alert modal="true" name="OpenObjectCannotCopy">
+		<message name="message">
+			There are no items in this object that you are allowed to copy.
+		</message>
+	</alert>
+	<alert modal="true" name="WebLaunchAccountHistory">
+		<message name="message">
+			Go to the Second Life web site to see your account history?
+		</message>
+		<ignore name="ignore">
+			When loading account history web page
+		</ignore>
+		<option name="Gotopage">
+			Go to page
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="ClickOpenF1Help">
+		<message name="message">
+			Visit the Second Life Support Web site?
+		</message>
+		<ignore name="ignore">
+			When visiting the Second Life Support Website.
+		</ignore>
+		<option name="Gotopage">
+			Go
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="RetryFetchInventoryDescendents">
+		<message name="message">
+			Inventory fetch from server timed out.  Retry?
+		</message>
+		<ignore name="ignore">
+			Retry Fetch Inventory Descendents
+		</ignore>
+		<option name="Retry">
+			Retry
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="ConfirmQuit">
+		<message name="message">
+			Are you sure you want to quit?
+		</message>
+		<ignore name="ignore">
+			When Quitting Second Life.
+		</ignore>
+		<option name="Quit">
+			Quit
+		</option>
+		<option name="Continue">
+			Continue
+		</option>
+	</alert>
+	<alert modal="true" name="HelpReportAbuseEmailLL">
+		<message name="message">
+			Use this tool to report violations of the Terms of Service 
+and Community Standards. See:
+
+http://secondlife.com/corporate/tos.php 
+http://secondlife.com/corporate/cs.php
+
+All reported abuses of the Terms of Service and Community Standards 
+are investigated and resolved. You can view the incident 
+resolution on the Incident Report at:
+
+http://secondlife.com/support/incidentreport.php
+		</message>
+	</alert>
+	<alert modal="true" name="HelpReportAbuseEmailEO">
+		<message name="message">
+			IMPORTANT: This report will go to the owner of the 
+region you are currently in and not to Linden Lab.
+
+As a service to residents and visitors, the owner of 
+the region you are in has elected to receive and resolve 
+all reports originating in this region. Linden Lab will 
+not investigate reports you file from this location.
+
+The region owner will resolve reports based on the local 
+rules of this region as outlined in the estate Covenant. 
+(View covenants by going to the World menu and selecting 
+About Land.)
+
+The resolution of this report applies only to this Region; 
+Residents access to other areas of Second Life will not be 
+affected by the outcome of this report. Only Linden Lab can 
+restrict access to the entirety of Second Life.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpReportBug">
+		<message name="message">
+			Use this tool to *only* report technical features that do not perform
+as described or expected, please provide as much detail as possible,
+You may reply to the auto-response email to add more details to your
+report.
+
+All bug reports are investigated and assessed. No email response will be sent.
+
+If you are having a technical difficulty, please contact Support at: 
+
+http://secondlife.com/community/support.php
+
+Note: Incomplete reports will not be investigated
+		</message>
+	</alert>
+	<alert modal="true" name="HelpReportAbuseSelectCategory">
+		<message name="message">
+			Please select a category for this abuse report.
+Selecting a category helps us file and process abuse reports.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpReportBugSelectCategory">
+		<message name="message">
+			Please select a category for this bug.
+Selecting a category helps us file and process bug reports.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpReportAbuseAbuserNameEmpty">
+		<message name="message">
+			Please enter the name of the abuser.
+Entering an accurate value helps us file and process abuse reports.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpReportAbuseAbuserLocationEmpty">
+		<message name="message">
+			Please enter the location where the abuse took place.
+Entering an accurate value helps us file and process abuse reports.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpReportAbuseSummaryEmpty">
+		<message name="message">
+			Please enter a summary of the abuse that took place.
+Entering an accurate summary helps us file and process abuse reports.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpReportBugSummaryEmpty">
+		<message name="message">
+			Please enter a summary of the bug.
+Entering an accurate summary helps us file and process bug reports.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpReportAbuseDetailsEmpty">
+		<message name="message">
+			Please enter a detailed description of the abuse that took place.
+Be as specific as you can, including names and the details of the
+incident you are reporting.
+Entering an accurate description helps us file and process abuse reports.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpReportBugDetailsEmpty">
+		<message name="message">
+			Please enter a detailed description of the bug.
+Be as specific as you can, including steps to reproduce the bug
+if possible.
+Entering an accurate description helps us file and process bug reports.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpReportAbuseContainsCopyright">
+		<message name="message">
+			Dear Resident,
+ 
+You appear to be reporting intellectual property infringement. Please make sure you are reporting it correctly:
+
+(1) The Abuse Process. You may submit an abuse report if you believe a Resident is exploiting the Second Life permissions system, for example, by using CopyBot or similar copying tools, to infringe intellectual property rights. The Abuse Team investigates and issues appropriate disciplinary action for behavior that violates the Second Life Community Standards or Terms of Service. However, the Abuse Team does not handle and will not respond to requests to remove content from the Second Life world.
+
+(2) The DMCA or Content Removal Process. To request removal of content from Second Life, you MUST submit a valid notification of infringement as provided in our DMCA Policy at http://secondlife.com/corporate/dmca.php.
+
+If you still wish to continue with the abuse process, please close this window and finish submitting your report.  You may need to select the specific category 'CopyBot or Permissions Exploit'.
+
+Thank you,
+ 
+Linden Lab
+		</message>
+	</alert>
+	<alert modal="true" name="FailedRequirementsCheck">
+		<message name="message">
+			The following required components are missing from [FLOATER]:
+[COMPONENTS]
+		</message>
+	</alert>
+	<alert name="ReplaceAttachment" title="Replace Existing Attachment">
+		<message name="message">
+			There is already an object attached to this point on your body.
+Do you want to replace it with the selected object?
+		</message>
+		<ignore name="ignore" save_option="true">
+			When replacing existing attachments
+		</ignore>
+		<option ignore="Replace Automatically" name="Yes">
+			OK
+		</option>
+		<option ignore="Never Replace" name="No">
+			Cancel
+		</option>
+	</alert>
+	<alert name="BusyModePay" title="Busy Mode Warning">
+		<message name="message">
+			You are in Busy Mode, which means you will not
+receive any items offered in exchange for
+this payment.
+ 
+Would you like to leave Busy Mode before
+completing this transaction?
+		</message>
+		<ignore name="ignore" save_option="true">
+			When paying a person or object in busy mode
+		</ignore>
+		<option ignore="Always leave Busy Mode" name="Yes">
+			OK
+		</option>
+		<option ignore="Never leave Busy Mode" name="No">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="ConfirmEmptyTrash">
+		<message name="message">
+			Are you sure you want to permanently remove
+the contents of your Trash folder?
+		</message>
+		<ignore name="ignore">
+			When emptying your inventory trash folder
+		</ignore>
+		<option default="true" name="Yes">
+			OK
+		</option>
+		<option name="No">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="ConfirmClearBrowserCache">
+		<message name="message">
+			Are you sure you want to clear your browser cache?
+		</message>
+		<option default="true" name="Yes">
+			Yes
+		</option>
+		<option name="No">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="ConfirmClearCookies">
+		<message name="message">
+			Are you sure you want to clear your cookies?
+		</message>
+		<option default="true" name="Yes">
+			Yes
+		</option>
+		<option name="No">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="ConfirmClearMediaUrlList">
+		<message name="message">
+			Are you sure you want to clear your list of saved URLs?
+		</message>
+		<option default="true" name="Yes">
+			Yes
+		</option>
+		<option name="No">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="ConfirmEmptyLostAndFound">
+		<message name="message">
+			Are you sure you want to permanently remove
+the contents of your Lost And Found folder?
+		</message>
+		<ignore name="ignore">
+			When emptying your inventory Lost And Found folder
+		</ignore>
+		<option default="true" name="Yes">
+			Yes
+		</option>
+		<option name="No">
+			No
+		</option>
+	</alert>
+	<alert modal="true" name="CopySLURL">
+		<message name="message">
+			The following SLURL has been copied to your clipboard:
+ [SLURL] 
+
+Put it in a web page to give others easy access to this location or
+try it out yourself by pasting it into the address bar of your web browser.
+		</message>
+		<ignore name="ignore">
+			When copying a SLURL to your clipboard
+		</ignore>
+	</alert>
+	<alert modal="true" name="GraphicsPreferencesHelp">
+		<message name="message">
+			This panel controls window size and resolution and the quality of the client&apos;s graphics.  The Preferences > Graphics interface allows you to choose between four graphics levels: Low, Mid, High, and Ultra. You may also customize your graphics settings by checking the Custom checkbox and manipulating the following settings:
+
+Shaders: Enable or disable various types of pixel shaders. 
+
+Reflection Detail: Sets the types of objects that water can reflect.
+
+Avatar Rendering: Sets options that affect how the client renders avatars.
+
+Draw Distance: Affects how far out from your viewpoint objects will be rendered in the scene.
+
+Max Particle Count: Sets the maximum number of particles you are able to see on your screen at once.
+
+Post Process Quality: Sets the resolution with which Glow is rendered. 
+
+Mesh Detail: Sets the amount of detail or number of triangles used in rendering certain objects. A higher value takes longer to render, but makes these objects appear with more detail.
+
+Lighting Detail: Selects what types of lights you would like to render.
+
+Terrain Detail: Sets the amount of detail you would like to see for the terrain texture. 
+		</message>
+	</alert>
+	<alert modal="true" name="WLSavePresetAlert">
+		<message name="message">
+			Do you wish to overwrite the saved preset?
+		</message>
+		<option name="Save">
+			Yes
+		</option>
+		<option name="Cancel">
+			No
+		</option>
+	</alert>
+	<alert modal="true" name="WLDeletePresetAlert">
+		<message name="message">
+			Do you wish to delete [SKY]?
+		</message>
+		<option name="Delete">
+			Yes
+		</option>
+		<option name="Cancel">
+			No
+		</option>
+	</alert>
+	<alert modal="true" name="WLNoEditDefault">
+		<message name="message">
+			You cannot edit or delete a default preset.
+		</message>
+	</alert>
+	<alert modal="true" name="WLMissingSky">
+		<message name="message">
+			This day cycle file references a missing sky file: [SKY].
+		</message>
+	</alert>
+	<alert modal="true" name="PPSaveEffectAlert">
+		<message name="message">
+			PostProcess Effect exists. Do you still wish overwrite it?
+		</message>
+		<option name="Save">
+			Yes
+		</option>
+		<option name="Cancel">
+			No
+		</option>
+	</alert>
+	<alert modal="true" name="HelpEditSky">
+		<message name="message">
+			Edit the WindLight sliders to create and save a set of skies.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpEditDayCycle">
+		<message name="message">
+			Set which skies to turn to throughout the day.
+		</message>
+	</alert>
+	<alert modal="true" name="EnvSettingsHelpButton">
+		<message name="message">
+			These settings adjust the way the environment looks locally on your computer.  Your graphics card needs to support atmospheric shaders in order to have access to all of the settings.
+ 
+Adjust the &quot;Time of Day&quot; slider to change the day&apos;s phase locally on the viewer.
+ 
+Adjust the &quot;Cloud Cover&quot; slider to control how much the clouds cover the sky.
+ 
+Pick a color in the &quot;Water Color&quot; color picker to change the color of the water.
+ 
+Adjust the &quot;Water Fog&quot; slider to control how dense the fog is underwater.
+ 
+Click &quot;Use Estate Time&quot; to reset the time of day to the region&apos;s current time of day and remain linked to it.  
+ 
+Click &quot;Advanced Sky&quot; to bring up an editor with more advanced settings for the sky. 
+ 
+Click &quot;Advanced Water&quot; to bring up an editor with more advanced settings for the water.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpDayCycle">
+		<message name="message">
+			The Day Cycle Editor gives you control over the sky during Second Life&apos;s day/night cycle. This is the cycle that is used by the Basic Environment Editor&apos;s Time of Day slider.
+
+The Day Cycle Editor works by setting keyframes. These are nodes (represented by the gray blips on the time graph) that have Sky Presets associated with them. As the Time of Day progresses, the WindLight sky &quot;animates&quot; as it interpolates between these keyframes. 
+
+The yellow arrow above the timeline represents your current view, based on Time of Day. Click and drag it to see how your day will animate. You may add or delete keyframes by pressing the Add Key and Delete Key buttons to the right of the timeline.
+
+You can set the time position of a keyframe by either dragging it along the timeline, or by setting its value manually in the Key Frame Settings frame. Within the Key Frame Settings frame, you&apos;ll be able to associate the keyframe with its respective WindLight preset.
+
+Length of Cycle dictates the overall duration of a &quot;day&quot;. Setting this to a low value (for instance, 2 min.) will mean your entire 24-hour timeline will animate in only two real minutes! Once you are satisfied with your timeline and keyframe cycle, use the Play and Stop buttons to preview the results. Remember- you can also move the yellow time-indicator arrow above the timeline to see the cycle animate interactively. Using the Use Estate Time button will synchronize your day length and time of day with the Estate&apos;s day cycle.
+
+Once you are pleased with your Day Cycle, you can save and load it with the Save Test Day and Load Test Day buttons. Note that, for now, we only allow one Day Cycle.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpBlueHorizon">
+		<message name="message">
+			Use the Red/Green/Blue (RGB) sliders to adjust the color of the sky. You can use the Intensity (I) slider to move all three RGB sliders in unison.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpHazeHorizon">
+		<message name="message">
+			Haze Horizon is one of the most useful parameters for 
+adjusting overall light exposure in the scene.  It is
+effective for simulating many exposure settings,
+such as white-outs from the sun and darker, 
+closed-iris settings.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpBlueDensity">
+		<message name="message">
+			Blue Density affects the overall color saturation of the sky and fog. If you move the Intensity (I) slider to the right, colors will become brighter and more vibrant. If you move it all the way to the left, the colors will become duller, eventually fading to black and white. If you want to fine-tune the sky&apos;s color balance, you can control individual elements of saturation by using the Red/Green/Blue (RGB) sliders.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpHazeDensity">
+		<message name="message">
+			Haze Density controls the level of dull, gray
+haze in the atmosphere.  It is effective for 
+simulating scenes with high levels of smoke
+and man-made pollutants.  It is also effective
+for simulating fog and mist.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpDensityMult">
+		<message name="message">
+			The Density Multiplier can be used to affect the overall atmospheric density. At lower settings, it creates a feeling of &quot;thin air&quot;, and at higher settings, it creates a very heavy, smoggy effect.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpDistanceMult">
+		<message name="message">
+			Adjusts WindLight&apos;s perceived distance.  A value of
+zero effectively turns off WindLight&apos;s influence
+on terrain and objects.  Values greater than 1 simulate
+greater distances for thicker atmospheric effects.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpMaxAltitude">
+		<message name="message">
+			Max Altitude adjusts the altitude calculations WindLight
+performs when computing its atmospheric lighting.  At
+later times of day, it is useful for adjusting how
+&quot;deep&quot; the sunset appears.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpSunlightColor">
+		<message name="message">
+			Adjusts the color and intensity of the direct light in the scene.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpSunAmbient">
+		<message name="message">
+			Adjusts the color and intensity of ambient atmospheric light in the scene.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpSunGlow">
+		<message name="message">
+			The Size slider controls the size of the sun.
+The Focus slider controls how blurred the sun 
+is over the sky.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpSceneGamma">
+		<message name="message">
+			Adjust the screen&apos;s distribution of light and dark.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpStarBrightness">
+		<message name="message">
+			Adjusts the brightness of the stars in the sky.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpTimeOfDay">
+		<message name="message">
+			Controls the location of the sun in the sky.  
+Similar to elevation.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpEastAngle">
+		<message name="message">
+			Controls the location of the sun in the sky.  
+Similar to azimuth.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpCloudColor">
+		<message name="message">
+			Edits the color of the clouds.  It is generally
+recommended to keep it whitish,
+but hey, have fun if you want.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpCloudDetail">
+		<message name="message">
+			Controls the detail image layered on top
+of the main cloud image.  X and Y control
+its position.  D (Density) controls how puffy or 
+fractured the clouds appear.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpCloudDensity">
+		<message name="message">
+			Allows you to control the position of the clouds
+with the X and Y sliders and how dense they are
+with the the D slider.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpCloudCoverage">
+		<message name="message">
+			Controls how much the clouds cover the sky.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpCloudScale">
+		<message name="message">
+			Controls the scaling of the cloud image on the sky dome.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpCloudScrollX">
+		<message name="message">
+			Controls the speed of the clouds as they move in the X direction.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpCloudScrollY">
+		<message name="message">
+			Controls the speed of the clouds as they move in the Y direction.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpClassicClouds">
+		<message name="message">
+			Check this box to enable rendering of Second Life&apos;s older classic clouds in addition to WindLight&apos;s clouds.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpWaterFogColor">
+		<message name="message">
+			Chooses the color of the underwater fog.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpWaterFogDensity">
+		<message name="message">
+			Controls how dense the water fog is and how far you can see underwater.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpUnderWaterFogMod">
+		<message name="message">
+			Modifies the effect of the Fog Density Exponent to control how far you can see when your avatar is underwater.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpWaterGlow">
+		<message name="message">
+			Controls how much the surface of the water glows.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpWaterNormalScale">
+		<message name="message">
+			Controls the scaling of the three wavelets that make up the water.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpWaterFresnelScale">
+		<message name="message">
+			Controls how much light is reflected at different angles.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpWaterFresnelOffset">
+		<message name="message">
+			Controls how much light intensity is reflected.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpWaterScaleAbove">
+		<message name="message">
+			Controls how much light is refracted from looking above the surface of the water.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpWaterScaleBelow">
+		<message name="message">
+			Controls how much light is refracted from looking from below the surface of the water.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpWaterBlurMultiplier">
+		<message name="message">
+			Controls how waves and reflections are mixed.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpWaterNormalMap">
+		<message name="message">
+			Controls what normal map is layered across the water to determine reflections/refractions.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpWaterWave1">
+		<message name="message">
+			Controls where and how fast the large scaled version of the normal map moves in the X and Y direction.
+		</message>
+	</alert>
+	<alert modal="true" name="HelpWaterWave2">
+		<message name="message">
+			Controls where and how fast the the small scaled version of the normal map moves in the X and Y direction.
+		</message>
+	</alert>
+	<alert name="NewSkyPreset">
+		<message name="message">
+			Give me a name for the new sky.
+		</message>
+		<editline name="editline">
+			New Preset
+		</editline>
+		<option name="OK">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="ExistsSkyPresetAlert">
+		<message name="message">
+			Preset already exists!
+		</message>
+	</alert>
+	<alert name="NewWaterPreset">
+		<message name="message">
+			Give me a name for the new water preset.
+		</message>
+		<editline name="editline">
+			New Preset
+		</editline>
+		<option name="OK">
+			OK
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="ExistsWaterPresetAlert">
+		<message name="message">
+			Preset already exists!
+		</message>
+	</alert>
+	<alert modal="true" name="WaterNoEditDefault">
+		<message name="message">
+			You cannot edit or delete a default preset.
+		</message>
+	</alert>
+	<alert modal="true" name="ChatterBoxSessionStartError">
+		<message name="message">
+			Unable to start a new chat session with [RECIPIENT].
+[REASON]
+		</message>
+		<option default="true" name="OK">
+			OK
+		</option>
+	</alert>
+	<alert modal="true" name="ChatterBoxSessionEventError">
+		<message name="message">
+			[EVENT]
+[REASON]
+		</message>
+		<option default="true" name="OK">
+			OK
+		</option>
+	</alert>
+	<alert modal="true" name="ForceCloseChatterBoxSession">
+		<message name="message">
+			Your chat session with [NAME] must close.
+[REASON]
+		</message>
+		<option default="true" name="OK">
+			OK
+		</option>
+	</alert>
+	<alert modal="true" name="Cannot_Purchase_an_Attachment">
+		<message name="message">
+			Items may not be purchased while
+they are part of an attachment.
+		</message>
+	</alert>
+	<alert modal="true" name="DebitPermissionDetails"
+	     title="About Requests for the Debit Permission">
+		<message name="message">
+			Granting this request gives a script ongoing permission to take Linden dollars (L$) from your account. To revoke this permission, the object owner must delete the object or reset the scripts in the object.
+		</message>
+		<option default="true" name="OK">
+			OK
+		</option>
+	</alert>
+	<alert modal="true" name="AutoWearNewClothing">
+		<message name="message">
+			Would you like to automatically wear the clothing item you create?
+		</message>
+		<ignore name="ignore">
+			Automatically wear new clothing
+		</ignore>
+		<option name="Yes">
+			Yes
+		</option>
+		<option name="No">
+			No
+		</option>
+	</alert>
+	<!-- Luskwood functionality -->
+	<alert modal="true" name="LuskwoodGohomerWarn">
+		<message name="message">
+			Warn this avatar?
+			
+			This will show them a dialog asking to confirm that they understand
+			their behavior was found to be undesirable, and that they face
+			ejection or banning if it continues.
+		</message>
+		<option name="Warn">
+			Warn
+		</option>
+		<option default="true" name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="LuskwoodGohomerEject">
+		<message name="message">
+			Eject this avatar?
+			
+			This avatar will be ejected from the area, but will be able to
+			return immediately.
+		</message>
+		<option name="Eject">
+			Eject
+		</option>
+		<option default="true" name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="LuskwoodGohomerKeepAway">
+		<message name="message">
+			Eject this avatar and ban them for 2 hours?
+			
+			This avatar will be ejected from the area, and will be added to
+			the parcel's ban list for 2 hours.
+		</message>
+		<option name="KeepAway">
+			Keep Away
+		</option>
+		<option default="true" name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="LuskwoodGohomerSendHome">
+		<message name="message">
+			Send this avatar home and ban them for 4 hours?
+			
+			This avatar will be sent home, and will be added to the parcel's
+			ban list for 4 hours.
+		</message>
+		<option name="KeepAway">
+			Send Home
+		</option>
+		<option default="true" name="Cancel">
+			Cancel
+		</option>
+	</alert>
+	<alert modal="true" name="LuskwoodGohomerOff">
+		<message name="message">
+			Turn off the gohomer?
+			
+			This will make it stop trying to send the last ejected avatar home,
+			but won't remove them from the ban list.
+		</message>
+		<option name="TurnOff">
+			Turn Off
+		</option>
+		<option default="true" name="Cancel">
+			Cancel
+		</option>
+	</alert>	
+	<alert modal="true" name="BadURL">
+		<message name="message">
+			Second Life doesn&apos;t know how to handle the link:
+ [SLURL]
+Most links are similar to this:
+
+secondlife:///app/agent/0e346d8b-4433-4d66-a6b0-
+fd37083abc4c/about
+
+Please check the spelling and try again.
+		</message>
+	</alert>
+	<alert modal="true" name="NotAgeVerified">
+		<message name="message">
+			You need to be age-verified in order to access this parcel.
+Would you like to visit the Second Life website to verify your age?
+
+[_URL]
+		</message>
+		<ignore name="ignore">
+			Warn about lack of age verification
+		</ignore>
+		<option name="Yes">
+			Yes
+		</option>
+		<option name="No">
+			No
+		</option>
+		<url option="0">
+			https://secondlife.com/account/verification.php
+		</url>
+	</alert>
+	<alert modal="true" name="Cannot enter parcel: no payment info on file">
+		<message name="message">
+			This parcel requires that you have payment information on file before you can access it.
+Would you like to visit the Second Life website to set this up?
+
+[_URL]
+		</message>
+		<ignore name="ignore">
+			Warn about lack of payment info
+		</ignore>
+		<option name="Yes">
+			Yes
+		</option>
+		<option name="No">
+			No
+		</option>
+		<url option="0">
+			https://secondlife.com/account/
+		</url>
+	</alert>
+	<alert modal="true" name="MissingString">
+		<message name="message">
+			The string [STRING_NAME] is missing from strings.xml
+		</message>
+	</alert>
 </alerts>
 <!-- This file is no longer used. Please see notifications.xml and make your changes there. -->
\ No newline at end of file
diff --git a/indra/newview/skins/default/xui/en-us/floater_avatar_scanner.xml b/indra/newview/skins/default/xui/en-us/floater_avatar_scanner.xml
new file mode 100644
index 0000000..7156aa4
--- /dev/null
+++ b/indra/newview/skins/default/xui/en-us/floater_avatar_scanner.xml
@@ -0,0 +1,413 @@
+<?xml version="1.0" encoding="utf-8" standalone="yes"?>
+<floater
+	name="avatar list"
+	title="Avatar List"
+	can_resize="true"
+	can_minimize="true"
+	can_close="true"
+	can_drag_on_left="false"
+	rect_control="FloaterAvatarListRect"
+	min_width="400"
+	min_height="300"
+	>
+	<!-- <text
+		  name="help_label"
+		  bottom="-30"
+		  left="15"
+		  font="SansSerifSmall"
+		  follows="top|left"
+		  >
+	</text> -->
+	
+	<scroll_list
+		    name="avatar_list"
+		    left="10"
+		    right="-10"
+		    top="-20"
+		    bottom="150"
+		    column_padding="0"
+		    can_resize="true"
+		    follows="left|top|bottom|right"
+		    draw_heading="true"
+		    multi_select="true"
+		    search_column="1"
+		    tool_tip="Hold shift or control while clicking to select multiple avatars"
+		    >
+		<!-- Icons relating to the avatar, currently: tracking, and marked -->
+		<column name="avatar_icon" label="Icon" width="20" />
+		<column name="avatar_name" label="Name" dynamicwidth="true" />
+		<column name="distance" label="Distance" width="70"/>
+		<column name="age" label="Age" width="50"/>
+		<!-- <column name="payment_data" label="Payment" width="80"/> -->
+		<!-- TrustNet Score -->
+		<!-- <column name="score" label="Score" width="10"/> -->
+		<!-- Payment data icons -->
+		<column name="payment_data" label="" width="20" />
+		<!-- What the avatar is doing: producing sounds, rezzing, particles, etc -->
+		<column name="activity" label="" width="20" />
+		<!-- Time when avatar entered -->
+		<column name="entered" label="Entered" width="60"/>
+	</scroll_list>
+<!--	<panel 
+	       name="scanner_options"
+	       left="10"
+	       right="-10"	
+	       height="45"
+	       bottom="140"	
+	       border="true"
+	       mouse_opaque="true"
+	       bevel_style="in"
+	       background_visible="true"
+	       background_opaque="true"
+	       follows="left|right|bottom"
+	       bg_opaque_color="0,0,0,0.3"
+	       bg_alpha_color="blue"
+	       can_resize="false"
+	>
+	
+	</panel> -->
+	
+	<tab_container border="false" bottom_delta="-130" height="120" left="10" mouse_opaque="false"
+		       name="actions_tab_container" tab_position="top" follows="left|right|bottom">
+		<panel border="true" bottom_delta="-130" follows="left|top|right|bottom" height="255"
+		       label="Avatar" left="1" mouse_opaque="true"
+		     name="actions_tab" width="398">
+			<!-- upper row -->
+			<button
+			       name="profile_btn"
+			       label="Profile"
+			       tool_tip="Show picture, groups, and other information"
+			       left="10"
+			       bottom_delta="-190"
+			       width="80"
+			       height="20"
+			       font="SansSerifSmall"
+			       follows="bottom|left"
+			       />
+			<button
+			       name="im_btn"
+			       label="IM"
+			       tool_tip="Open Instant Message session"
+			       left_delta="90"
+			       bottom_delta="0"
+			       width="80"
+			       height="20"
+			       font="SansSerifSmall"
+			       follows="bottom|left"
+			       />
+			
+
+			<!--middle row -->
+			<button
+			       name="track_btn"
+			       label="Track"
+			       tool_tip="Track this avatar's position"
+			       left="10"
+			       bottom_delta="-24"
+			       width="80"
+			       height="20"
+			       font="SansSerifSmall"
+			       follows="bottom|left"
+			       />
+			<button
+			       name="mark_btn"
+			       label="Mark"
+			       tool_tip="Mark this avatar in the list"
+			       left_delta="90"
+			       bottom_delta="0"
+			       width="80"
+			       height="20"
+			       font="SansSerifSmall"
+			       follows="bottom|left"
+			       />
+			<button
+			       name="get_key_btn"
+			       label="Get Key"
+			       tool_tip="Copies avatar's key to the clipboard"
+			       left_delta="90"
+			       bottom_delta="0"
+			       width="80"
+			       height="20"
+			       font="SansSerifSmall"
+			       follows="bottom|left"
+			       />
+			<button
+			       name="teleport_btn"
+			       label="Teleport"
+			       tool_tip="Teleport to avatar's position"
+			       left_delta="90"
+			       bottom_delta="0"
+			       width="80"
+			       height="20"
+			       font="SansSerifSmall"
+			       follows="bottom|left"
+			       />			
+			<!-- lower row-->
+			<button
+			       name="prev_in_list_btn"
+			       label="Prev"
+			       tool_tip="Focus camera on previous avatar in list"
+			       left="10"
+			       bottom_delta="-24"
+			       width="80"
+			       height="20"
+			       font="SansSerifSmall"
+			       follows="bottom|left"
+			       />
+			<button
+			       name="next_in_list_btn"
+			       label="Next"
+			       tool_tip="Focus camera on next avatar in list"
+			       left_delta="90"
+			       bottom_delta="0"
+			       width="80"
+			       height="20"
+			       font="SansSerifSmall"
+			       follows="bottom|left"
+			       />
+			<button
+			       name="prev_marked_btn"
+			       label="Prev Marked"
+			       tool_tip="Focus camera on previous marked avatar"
+			       left_delta="90"
+			       bottom_delta="0"
+			       width="80"
+			       height="20"
+			       font="SansSerifSmall"
+			       follows="bottom|left"
+			       />
+			<button
+			       name="next_marked_btn"
+			       label="Next Marked"
+			       tool_tip="Focus camera on next marked avatar"
+			       left_delta="90"
+			       bottom_delta="0"
+			       width="80"
+			       height="20"
+			       font="SansSerifSmall"
+			       follows="bottom|left"
+			       />
+
+		</panel>
+		<panel border="true" bottom_delta="-130" follows="left|top|right|bottom" height="255"
+		       label="Moderation" left="1" mouse_opaque="true"
+		       name="land_tab" width="398">
+			
+			<!-- Upper row -->
+			<button
+			       name="freeze_btn"
+			       label="Freeze"
+			       tool_tip="Freeze the avatar, preventing it from moving"
+			       left="10"
+			       bottom_delta="-190"
+			       width="80"
+			       height="20"
+			       font="SansSerifSmall"
+			       follows="bottom|left"
+			       />
+			<button
+			       name="eject_btn"
+			       label="Eject"
+			       tool_tip="Eject the avatar from the parcel"
+			       left_delta="90"
+			       bottom_delta="0"
+			       width="80"
+			       height="20"
+			       font="SansSerifSmall"
+			       follows="bottom|left"
+			       />
+			
+			<button
+			       name="mute_btn"
+			       label="Mute"
+			       tool_tip="Mute this avatar"
+			       left_delta="90"
+			       bottom_delta="0"
+			       width="80"
+			       height="20"
+			       font="SansSerifSmall"
+			       follows="bottom|left"
+			       />
+			
+
+			<button
+			       name="ar_btn"
+			       label="AR"
+			       tool_tip="Report abuse on this avatar"
+			       left_delta="90"
+			       bottom_delta="0"
+			       width="80"
+			       height="20"
+			       font="SansSerifSmall"
+			       follows="bottom|left"
+			       />
+
+			<!-- middle row -->
+			<button
+			       name="estate_eject_btn"
+			       label="Eject from estate"
+			       tool_tip="Eject this avatar from the estate"
+			       left="10"
+			       bottom_delta="-24"
+			       width="170"
+			       height="20"
+			       font="SansSerifSmall"
+			       follows="bottom|left"
+			       />
+		</panel>
+		
+		<panel border="true" bottom_delta="-130" follows="left|top|right|bottom" height="255"
+		       label="TrustNet" left="1" mouse_opaque="true"
+		       name="trustnet_tab" width="398">
+			<!--TrustNet tools -->
+			<!-- upper row -->
+			<button
+			       name="tn_rate_btn"
+			       label="Rate"
+			       tool_tip="Give a TrustNet rating to this avatar"
+			       left="10"
+			       bottom_delta="-190"
+			       width="80"
+			       height="20"
+			       font="SansSerifSmall"
+			       follows="bottom|left"
+			       />
+			<button
+			       name="tn_explain_btn"
+			       label="Explain"
+			       tool_tip="Explain this avatar's score"
+			       left="100"
+			       bottom_delta="0"
+			       width="80"
+			       height="20"
+			       font="SansSerifSmall"
+			       follows="bottom|left"
+			       />
+			<!--lower row-->
+			<button
+			       name="tn_website_btn"
+			       label="Web"
+			       tool_tip="Open a web browser with the TrustNet website"
+			       left="10"
+			       bottom_delta="-24"
+			       width="80"
+			       height="20"
+			       font="SansSerifSmall"
+			       follows="bottom|left"
+			       />
+			<button
+			       name="tn_password_btn"
+			       label="Password"
+			       tool_tip="Get a password for the TrustNet website. A new password is generated every time."
+			       left="100"
+			       bottom_delta="0"
+			       width="80"
+			       height="20"
+			       font="SansSerifSmall"
+			       follows="bottom|left"
+			       />
+			<button
+			       name="tn_renew_btn"
+			       label="Renew"
+			       tool_tip="Renew the TrustNet subscription"
+			       left="190"
+			       bottom_delta="0"
+			       width="80"
+			       height="20"
+			       font="SansSerifSmall"
+			       follows="bottom|left"
+			       />
+			
+		</panel>
+		<panel border="true" bottom_delta="-130" follows="left|top|right|bottom" height="255"
+		       label="Luskwood" left="1" mouse_opaque="true"
+		     name="luskwood_tab" width="398">
+			<!--Luskwood tools, upper row-->
+			<button
+			       name="gowarn_btn"
+			       label="Warn"
+			       tool_tip="Give a warning to this avatar"
+			       left="10"
+			       bottom_delta="-190"
+			       width="80"
+			       height="20"
+			       font="SansSerifSmall"
+			       follows="bottom|left"
+			       />
+			<button
+			       name="goeject_btn"
+			       label="Eject"
+			       tool_tip="Eject this avatar"
+			       left="100"
+			       bottom_delta="0"
+			       width="80"
+			       height="20"
+			       font="SansSerifSmall"
+			       follows="bottom|left"
+			       />
+			<button
+			       name="goaway_btn"
+			       label="Keep away"
+			       tool_tip="Eject, and keep this avatar away for 2 hours"
+			       left="190"
+			       bottom_delta="0"
+			       width="80"
+			       height="20"
+			       font="SansSerifSmall"
+			       follows="bottom|left"
+			       />
+			<button
+			       name="gohome_btn"
+			       label="Send home"
+			       tool_tip="Send home, and keep this avatar away for 4 hours"
+			       left="280"
+			       bottom_delta="0"
+			       width="80"
+			       height="20"
+			       font="SansSerifSmall"
+			       follows="bottom|left"
+			       />
+			<!-- Middle row -->
+			<button
+			       name="gokey_btn"
+			       label="Ban by key"
+			       tool_tip="Turn off the send home function"
+			       left="10"
+			       bottom_delta="-24"
+			       width="80"
+			       height="20"
+			       font="SansSerifSmall"
+			       follows="bottom|left"
+			       />
+			<button
+			       name="gohomeoff_btn"
+			       label="Off"
+			       tool_tip="Turn off the send home function"
+			       left_delta="90"
+			       bottom_delta="0"
+			       width="80"
+			       height="20"
+			       font="SansSerifSmall"
+			       follows="bottom|left"
+			       />			
+		</panel>
+		<panel border="true" bottom_delta="-150" follows="left|top|right|bottom" height="255"
+		       label="Options" left="1" mouse_opaque="true"
+		     name="options_tab" width="398">
+			<check_box height="16" label="Update"
+				   left="10" bottom_delta="-190" name="update_enabled_cb" 
+				   width="200" follows="bottom|left"
+				   hidden="false" mouse_opaque="true" font="SansSerifSmall"
+				   initial_value="true" enabled="true" radio_style="false" 
+				   tool_tip="Set whether the avatar list should update" />
+			
+			<check_box height="16" label="Get avatar info"
+				   left="20" bottom_delta="-21" name="fetch_avdata_enabled_cb" 
+				   width="200" follows="bottom|left"
+				   hidden="false" mouse_opaque="true" font="SansSerifSmall"
+				   initial_value="true" enabled="true" radio_style="false" 
+			   tool_tip="Set whether avatar information should be retrieved" />			
+		</panel>
+	</tab_container>
+
+</floater>
diff --git a/indra/newview/skins/default/xui/en-us/menu_viewer.xml b/indra/newview/skins/default/xui/en-us/menu_viewer.xml
index 24248b6..ebdafe1 100644
--- a/indra/newview/skins/default/xui/en-us/menu_viewer.xml
+++ b/indra/newview/skins/default/xui/en-us/menu_viewer.xml
@@ -228,6 +228,13 @@
 		     mouse_opaque="true" name="Preferences..." shortcut="control|P" width="153">
 			<on_click function="ShowFloater" userdata="preferences" />
 		</menu_item_call>
+		<menu_item_separator bottom="-46" enabled="true" height="8" hidden="false" label="-----------"
+		     left="0" mouse_opaque="true" name="separator6" width="211" />
+		<menu_item_check bottom="-65" enabled="true" height="19" hidden="false" label="Avatar List" left="0" mouse_opaque="true" name="Avatar List" width="211">
+			<on_click function="ShowFloater" userdata="avatar list" />
+			<on_check function="FloaterVisible" userdata="avatar list" />
+		</menu_item_check>
+
 	</menu>
 	<menu bottom="-1" create_jump_keys="true" drop_shadow="true" enabled="true"
 	     height="537" label="View" left="80" mouse_opaque="false" name="View"
@@ -411,6 +418,12 @@
 		     mouse_opaque="true" name="Set UI Size to Default" width="188">
 			<on_click function="View.DefaultUISize" userdata="" />
 		</menu_item_call>
+		<menu_item_separator bottom="-46" enabled="true" height="8" hidden="false" label="-----------"
+		     left="0" mouse_opaque="true" name="separator6" width="211" />
+		<menu_item_check bottom="-65" enabled="true" height="19" hidden="false" label="Avatar List" left="0" mouse_opaque="true" name="Avatar List" width="211">
+			<on_click function="ShowFloater" userdata="avatar list" />
+			<on_check function="FloaterVisible" userdata="avatar list" />
+		</menu_item_check>
 	</menu>
 	<menu bottom="-18" create_jump_keys="true" drop_shadow="true" enabled="true"
 	     height="339" label="World" left="0" mouse_opaque="false" name="World"
diff --git a/indra/newview/skins/default/xui/en-us/notify.xml b/indra/newview/skins/default/xui/en-us/notify.xml
index 969117f..b6b2017 100644
--- a/indra/newview/skins/default/xui/en-us/notify.xml
+++ b/indra/newview/skins/default/xui/en-us/notify.xml
@@ -1,4 +1,1075 @@
 <?xml version="1.0" encoding="utf-8" standalone="yes" ?>
 <notifications>
+	<notify name="SystemMessageTip" tip="true">
+		<message name="message">
+			[MESSAGE]
+		</message>
+	</notify>
+	<notify name="Cancelled" tip="true">
+		<message name="message">
+			Cancelled
+		</message>
+	</notify>
+	<notify name="CancelledSit" tip="true">
+		<message name="message">
+			Cancelled Sit
+		</message>
+	</notify>
+	<notify name="CancelledAttach" tip="true">
+		<message name="message">
+			Cancelled Attach
+		</message>
+	</notify>
+	<notify name="ReplacedMissingWearable" tip="true">
+		<message name="message">
+			Replaced missing clothing/body part with default.
+		</message>
+	</notify>
+	<notify name="FriendOnline" tip="true">
+		<message name="message">
+			[FIRST] [LAST] is Online
+		</message>
+	</notify>
+	<notify name="FriendOffline" tip="true">
+		<message name="message">
+			[FIRST] [LAST] is Offline
+		</message>
+	</notify>
+	<notify name="AddSelfFriend" tip="true">
+		<message name="message">
+			You cannot add yourself as a friend.
+		</message>
+	</notify>
+	<notify name="UploadingAuctionSnapshot" tip="true">
+		<message name="message">
+			Uploading in-world and web site snapshots...
+(Takes about 5 minutes.)
+		</message>
+	</notify>
+	<notify name="UploadPayment" tip="false">
+		<message name="message">
+			You paid L$[AMOUNT] to upload.
+		</message>
+	</notify>
+	<notify name="UploadingSnapshot" tip="true">
+		<message name="message">
+			Uploading in-world snapshot...
+(Takes a minute or so.)
+		</message>
+	</notify>
+	<notify name="UploadWebSnapshotDone" tip="true">
+		<message name="message">
+			Web site snapshot upload done.
+		</message>
+	</notify>
+	<notify name="UploadSnapshotDone" tip="true">
+		<message name="message">
+			In-world snapshot upload done
+		</message>
+	</notify>
+	<notify name="TerrainDownloaded" tip="true">
+		<message name="message">
+			Terrain.raw downloaded
+		</message>
+	</notify>
+	<notify name="InMaxGroups" tip="true">
+		<message name="message">
+			You are already in the maximum number of groups. You will need to leave a group before you can create one.
+		</message>
+	</notify>
+	<notify name="GestureMissing" tip="true">
+		<message name="message">
+			Gesture [NAME] is missing from database.
+		</message>
+	</notify>
+	<notify name="UnableToLoadGesture" tip="true">
+		<message name="message">
+			Unable to load gesture [NAME].
+Please try again.
+		</message>
+	</notify>
+	<notify name="InventoryLoaded" tip="true">
+		<message name="message">
+			Your inventory is loaded.
+		</message>
+	</notify>
+	<notify name="LandmarkMissing" tip="true">
+		<message name="message">
+			Landmark is missing from database.
+		</message>
+	</notify>
+	<notify name="UnableToLoadLandmark" tip="true">
+		<message name="message">
+			Unable to load landmark.  Please try again.
+		</message>
+	</notify>
+	<notify name="CapsKeyOn" tip="true">
+		<message name="message">
+			Your Caps Lock key is on.
+As this will affect the password you type in,
+you will probably want to turn it off.
+		</message>
+	</notify>
+	<notify name="NotecardMissing" tip="true">
+		<message name="message">
+			Notecard is missing from database.
+		</message>
+	</notify>
+	<notify name="NotecardNoPermissions" tip="true">
+		<message name="message">
+			Insufficient permissions to view notecard.
+		</message>
+	</notify>
+	<notify name="RezItemNoPermissions" tip="true">
+		<message name="message">
+			Insufficient permissions to rez object.
+		</message>
+	</notify>
+	<notify name="UnableToLoadNotecard" tip="true">
+		<message name="message">
+			Unable to load notecard.
+Please try again.
+		</message>
+	</notify>
+	<notify name="ScriptMissing" tip="true">
+		<message name="message">
+			Script is missing from database.
+		</message>
+	</notify>
+	<notify name="ScriptNoPermissions" tip="true">
+		<message name="message">
+			Insufficient permissions to view script.
+		</message>
+	</notify>
+	<notify name="UnableToLoadScript" tip="true">
+		<message name="message">
+			Unable to load script.  Please try again.
+		</message>
+	</notify>
+	<notify name="IncompleteInventory" tip="true">
+		<message name="message">
+			The complete contents you are offering are not yet
+locally available. Please try offering those items
+again in a minute.
+		</message>
+	</notify>
+	<notify name="CannotModifyProtectedCategories" tip="true">
+		<message name="message">
+			You cannot modify protected categories.
+		</message>
+	</notify>
+	<notify name="CannotRemoveProtectedCategories" tip="true">
+		<message name="message">
+			You cannot remove protected categories.
+		</message>
+	</notify>
+	<notify name="OfferedCard" tip="true">
+		<message name="message">
+			You have offered a calling card to [FIRST] [LAST]
+		</message>
+	</notify>
+	<notify name="UnableToBuyWhileDownloading" tip="true">
+		<message name="message">
+			Unable to buy while downloading object data.
+Please try again.
+		</message>
+	</notify>
+	<notify name="UnableToLinkWhileDownloading" tip="true">
+		<message name="message">
+			Unable to link while downloading object data.
+Please try again.
+		</message>
+	</notify>
+	<notify name="CannotBuyObjectsFromDifferentOwners" tip="true">
+		<message name="message">
+			Cannot buy objects from different owners at the same time.
+Please select a single object.
+		</message>
+	</notify>
+	<notify name="ObjectNotForSale" tip="true">
+		<message name="message">
+			Object does not appear to be for sale.
+		</message>
+	</notify>
+	<notify name="EnteringGodMode" tip="true">
+		<message name="message">
+			Entering god mode, level [LEVEL]
+		</message>
+	</notify>
+	<notify name="LeavingGodMode" tip="true">
+		<message name="message">
+			Leaving god mode, level [LEVEL]
+		</message>
+	</notify>
+	<notify name="CopyFailed" tip="true">
+		<message name="message">
+			Copy failed because you lack copy permission
+		</message>
+	</notify>
+	<notify name="InventoryAccepted" tip="true">
+		<message name="message">
+			[NAME] accepted your inventory offer.
+		</message>
+	</notify>
+	<notify name="InventoryDeclined" tip="true">
+		<message name="message">
+			[NAME] declined your inventory offer.
+		</message>
+	</notify>
+	<notify name="ObjectMessage" tip="true">
+		<message name="message">
+			[NAME]: [MESSAGE]
+		</message>
+	</notify>
+	<notify name="CallingCardAccepted" tip="true">
+		<message name="message">
+			Your calling card was accepted.
+		</message>
+	</notify>
+	<notify name="CallingCardDeclined" tip="true">
+		<message name="message">
+			Your calling card was declined.
+		</message>
+	</notify>
+	<notify name="TeleportToLandmark" tip="true">
+		<message name="message">
+			Now that you have reached the mainland, you can teleport to locations like &apos;[NAME]&apos; by clicking on the Inventory button on the bottom right of your screen, and then select the Landmarks folder.
+Double click on the landmark and click on Teleport to travel there.
+		</message>
+	</notify>
+	<notify name="TeleportToPerson" tip="true">
+		<message name="message">
+			Now that you have reached the mainland, you can contact residents like &apos;[NAME]&apos; by clicking on the Inventory button on the bottom right of your screen, and then select the Calling Cards folder.
+Double click on the card, click on Instant Message, and type a message.
+		</message>
+	</notify>
+	<notify name="CantSelectLandFromMultipleRegions" tip="true">
+		<message name="message">
+			Can&apos;t select land across server boundaries.
+Try selecting a smaller piece of land.
+		</message>
+	</notify>
+	<notify name="GenerticNotify" tip="false">
+		<message name="message">
+			[MESSAGE]
+		</message>
+	</notify>
+	<notify name="GroupVote" tip="false">
+		<message name="message">
+			[NAME] has proposed to vote on:
+[MESSAGE]
+		</message>
+		<option name="VoteNow">
+			Vote Now
+		</option>
+		<option name="Later">
+			Later
+		</option>
+	</notify>
+	<notify name="GroupElection" tip="false">
+		<message name="message">
+			[NAME] has started an election:
+[MESSAGE]
+		</message>
+		<option name="VoteNow">
+			Vote Now
+		</option>
+		<option name="Later">
+			Later
+		</option>
+	</notify>
+	<notify name="SystemMessage" tip="false">
+		<message name="message">
+			[MESSAGE]
+		</message>
+	</notify>
+	<notify name="EventNotification" tip="false">
+		<message name="message">
+			Event Notification:
+ 
+[NAME]
+[DATE]
+		</message>
+		<option name="Teleport">
+			Teleport
+		</option>
+		<option name="Description">
+			Description
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</notify>
+	<notify name="TransferObjectsHighlighted" tip="false">
+		<message name="message">
+			All objects on this parcel that will transfer
+to the purchaser of this parcel are now highlighted.
+ 
+* Trees and grasses that will transfer are not highlighted.
+		</message>
+		<option name="Done">
+			Done
+		</option>
+	</notify>
+	<notify name="DeactivatedGesturesTrigger" tip="false">
+		<message name="message">
+			Deactivated gestures with same trigger:
+[NAMES]
+		</message>
+	</notify>
+	<notify name="InventoryNetworkCorruption" tip="false">
+		<message name="message">
+			Inventory could not be loaded because of network corruption. This indicates a bad network connection.
+		</message>
+	</notify>
+	<notify name="NoQuickTime" tip="false">
+		<message name="message">
+			Apple&apos;s QuickTime software does not appear to be installed on your system.
+If you want to view streaming media on parcels that support it you should go to the QuickTime site (http://www.apple.com/quicktime) and install the QuickTime Player.
+		</message>
+	</notify>
+	<notify name="OwnedObjectsReturned" tip="false">
+		<message name="message">
+			The objects you own on the selected parcel of land 
+have been returned back to your inventory.
+		</message>
+	</notify>
+	<notify name="OtherObjectsReturned" tip="false">
+		<message name="message">
+			The objects on the selected parcel of land
+that is owned by [FIRST] [LAST]
+have been returned to his or her inventory.
+		</message>
+	</notify>
+	<notify name="OtherObjectsReturned2" tip="false">
+		<message name="message">
+			The objects on the selected parcel of land 
+owned by the resident &apos;[NAME]&apos;
+have been returned to their owner.
+		</message>
+	</notify>
+	<notify name="GroupObjectsReturned" tip="false">
+		<message name="message">
+			The objects on the selected parcel of land shared with the group [GROUPNAME] have been returned back to their owner&apos;s inventory.
+Transferable deeded objects have been returned to their previous owners.
+Non-transferable objects that are deeded to the group have been deleted.
+		</message>
+	</notify>
+	<notify name="UnOwnedObjectsReturned" tip="false">
+		<message name="message">
+			The objects on the selected parcel that are NOT owned by you have been returned to their owners.
+		</message>
+	</notify>
+	<notify name="NotSafe" tip="false" unique="true">
+		<message name="message">
+			This land has damage enabled (&apos;not safe&apos;).
+You can be hurt here. If you die, you will be teleported to your home location.
+		</message>
+	</notify>
+	<notify name="NoFly" tip="false" unique="true">
+		<message name="message">
+			This land has flying disabled (&apos;no fly&apos;).
+You cannot fly here.
+		</message>
+	</notify>
+	<notify name="PushRestricted" tip="false" unique="true">
+		<message name="message">
+			This land is &apos;No Pushing&apos;.
+You cannot push others here unless you own the land.
+		</message>
+	</notify>
+	<notify name="NoVoice" tip="false" unique="true">
+		<message name="message">
+			This land has voice disabled.
+		</message>
+	</notify>
+	<notify name="NoBuild" tip="false" unique="true">
+		<message name="message">
+			This land has building disabled (&apos;no build&apos;).
+You cannot create objects here.
+		</message>
+	</notify>
+	<notify name="ScriptsStopped" tip="false">
+		<message name="message">
+			An administrator has temporarily stopped scripts in this region.
+		</message>
+	</notify>
+	<notify name="ScriptsNotRunning" tip="false">
+		<message name="message">
+			This region is not running any scripts.
+		</message>
+	</notify>
+	<notify name="NoOutsideScripts" tip="false">
+		<message name="message">
+			This land has outside scripts disabled
+(&apos;no outside scripts&apos;).
+No scripts will run except those belonging to the land owner.
+		</message>
+	</notify>
+	<notify name="ApproveURL" tip="false">
+		<message name="message">
+			An object wants to display this web page on its surface:
+[URL]
+		</message>
+		<option name="LoadPage">
+			Load Page
+		</option>
+		<option name="Don&apos;tLoad">
+			Don&apos;t Load
+		</option>
+	</notify>
+	<notify name="ClaimPublicLand" tip="false">
+		<message name="message">
+			Can only claim public land in region you&apos;re in.
+		</message>
+	</notify>
+	<notify name="ObjectGiveItem" tip="false">
+		<message name="message">
+			An object named [OBJECTFROMNAME] owned by [FIRST] [LAST] has given you a [OBJECTTYPE] named [OBJECTNAME].
+		</message>
+		<option name="Keep">
+			Keep
+		</option>
+		<option name="Discard">
+			Discard
+		</option>
+		<option name="Mute">
+			Mute
+		</option>
+	</notify>
+	<notify name="ObjectGiveItemUnknownUser" tip="false">
+		<message name="message">
+			An object named [OBJECTFROMNAME] owned by (an unknown user) has given you a [OBJECTTYPE] named [OBJECTNAME].
+		</message>
+		<option name="Keep">
+			Keep
+		</option>
+		<option name="Discard">
+			Discard
+		</option>
+		<option name="Mute">
+			Mute
+		</option>
+	</notify>
+	<notify name="UserGiveItem" tip="false">
+		<message name="message">
+			[NAME] has given you a [OBJECTTYPE] named &apos;[OBJECTNAME]&apos;.
+		</message>
+		<option name="Keep">
+			Keep
+		</option>
+		<option name="Discard">
+			Discard
+		</option>
+		<option name="Mute">
+			Mute
+		</option>
+	</notify>
+	<notify name="GodMessage" tip="false">
+		<message name="message">
+			[NAME]
+[MESSAGE]
+		</message>
+	</notify>
+	<notify name="JoinGroup" tip="false">
+		<message name="message">
+			[MESSAGE]
+		</message>
+		<option name="Join">
+			Join
+		</option>
+		<option name="Decline">
+			Decline
+		</option>
+		<option name="Info">
+			Info
+		</option>
+	</notify>
+	<notify name="JoinGroupOfficerNoFee" tip="false">
+		<message name="message">
+			[NAME] has invited you
+to join a group as an officer.
+There is no cost to join this group.
+ 
+[MESSAGE]
+		</message>
+		<option name="Join">
+			Join
+		</option>
+		<option name="Decline">
+			Decline
+		</option>
+		<option name="Info">
+			Info
+		</option>
+	</notify>
+	<notify name="JoinGroupMember" tip="false">
+		<message name="message">
+			[NAME] has invited you
+to join a group as a member.
+To join this group, you will have to pay a signup fee of L$[COST]
+ 
+[MESSAGE]
+		</message>
+		<option name="Join">
+			Join
+		</option>
+		<option name="Decline">
+			Decline
+		</option>
+		<option name="Info">
+			Info
+		</option>
+	</notify>
+	<notify name="JoinGroupMemberNoFee" tip="false">
+		<message name="message">
+			[NAME] has invited you
+to join a group as a member.
+There is no cost to join this group.
+ 
+[MESSAGE]
+		</message>
+		<option name="Join">
+			Join
+		</option>
+		<option name="Decline">
+			Decline
+		</option>
+		<option name="Info">
+			Info
+		</option>
+	</notify>
+	<notify name="OfferTeleport" tip="false">
+		<message name="message">
+			[NAME] has offered to teleport you
+to his or her location:
+ 
+[MESSAGE]
+		</message>
+		<option name="Teleport">
+			Teleport
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</notify>
+	<notify name="GotoURL" tip="false">
+		<message name="message">
+			[MESSAGE]
+[URL]
+		</message>
+		<option name="Later">
+			Later
+		</option>
+		<option name="GoNow...">
+			Go Now...
+		</option>
+	</notify>
+	<notify name="OfferFriendship" tip="false">
+		<message name="message">
+			[NAME] is offering friendship.
+ 
+[MESSAGE]
+ 
+(By default, you will be able to see each other&apos;s online status.)
+		</message>
+		<option name="Accept">
+			Accept
+		</option>
+		<option name="Decline">
+			Decline
+		</option>
+	</notify>
+	<notify name="OfferFriendshipNoMessage" tip="false">
+		<message name="message">
+			[NAME] is offering friendship.
+
+(By default, you will be able to 
+see each other&apos;s online status.)
+		</message>
+		<option name="Accept">
+			Accept
+		</option>
+		<option name="Decline">
+			Decline
+		</option>
+	</notify>
+	<notify name="FriendshipAccepted" tip="false">
+		<message name="message">
+			[NAME] accepted your friendship offer.
+		</message>
+	</notify>
+	<notify name="FriendshipDeclined" tip="false">
+		<message name="message">
+			[NAME] declined your friendship offer.
+		</message>
+	</notify>
+	<notify name="OfferCallingCard" tip="false">
+		<message name="message">
+			[FIRST] [LAST] is offering their calling card.
+This will add a bookmark in your inventory
+so you can quickly IM this resident.
+		</message>
+		<option name="Accept">
+			Accept
+		</option>
+		<option name="Decline">
+			Decline
+		</option>
+	</notify>
+	<notify name="RegionRestartMinutes" tip="false">
+		<message name="message">
+			Region is restarting in [MINUTES] minutes.
+If you remain in this region you will be logged out.
+		</message>
+	</notify>
+	<notify name="RegionRestartSeconds" tip="false">
+		<message name="message">
+			Region is restarting in [SECONDS] seconds.
+If you remain in this region you will be logged out.
+		</message>
+	</notify>
+	<notify name="LoadWebPage" tip="false">
+		<message name="message">
+			Load web page [URL]?
+ 
+[MESSAGE]
+ 
+From object: [OBJECTNAME], owner: [NAME]?
+		</message>
+		<option name="Gotopage">
+			Go to page
+		</option>
+		<option name="Cancel">
+			Cancel
+		</option>
+	</notify>
+	<notify name="FailedToLoadWearableUnnamed" tip="false">
+		<message name="message">
+			Oops!
+You tried to wear a [TYPE] and it did not load.
+
+Don't panic.
+Try again in a minute to give things a chance to settle down.
+		</message>
+	</notify>
+	<notify name="FailedToLoadWearable" tip="false">
+		<message name="message">
+			Oops!
+You tried to wear [TYPE] named [DESC] and it did not load.
+
+Don't panic.
+Try again in a minute to give things a chance to settle down.
+		</message>
+	</notify>
+	<notify name="FailedToFindWearableUnnamed" tip="false">
+		<message name="message">
+			Failed to find [TYPE] in database.
+		</message>
+	</notify>
+	<notify name="FailedToFindWearable" tip="false">
+		<message name="message">
+			Failed to find [TYPE] named [DESC] in database.
+		</message>
+	</notify>
+	<notify caution="true" name="ScriptTakeMoney" tip="false">
+		<message name="message">
+			Take Linden dollars (L$) from you
+		</message>
+	</notify>
+	<notify name="ActOnControlInputs" tip="false">
+		<message name="message">
+			Act on your control inputs
+		</message>
+	</notify>
+	<notify name="RemapControlInputs" tip="false">
+		<message name="message">
+			Remap your control inputs
+		</message>
+	</notify>
+	<notify name="AnimateYourAvatar" tip="false">
+		<message name="message">
+			Animate your avatar
+		</message>
+	</notify>
+	<notify name="AttachToYourAvatar" tip="false">
+		<message name="message">
+			Attach to your avatar
+		</message>
+	</notify>
+	<notify name="ReleaseOwnership" tip="false">
+		<message name="message">
+			Release ownership and become public
+		</message>
+	</notify>
+	<notify name="LinkAndDelink" tip="false">
+		<message name="message">
+			Link and delink from other objects
+		</message>
+	</notify>
+	<notify name="AddAndRemoveJoints" tip="false">
+		<message name="message">
+			Add and remove joints with other objects
+		</message>
+	</notify>
+	<notify name="ChangePermissions" tip="false">
+		<message name="message">
+			Change its permissions
+		</message>
+	</notify>
+	<notify name="TrackYourCamera" tip="false">
+		<message name="message">
+			Track your camera
+		</message>
+	</notify>
+	<notify name="ControlYourCamera" tip="false">
+		<message name="message">
+			Control your camera
+		</message>
+	</notify>
+	<notify name="ScriptQuestion" tip="false">
+		<message name="message">
+			&apos;[OBJECTNAME]&apos;, an object owned by &apos;[NAME]&apos;, would like to:
+ 
+[QUESTIONS]
+Is this OK?
+		</message>
+		<option name="Yes">
+			Yes
+		</option>
+		<option name="No">
+			No
+		</option>
+		<option name="Mute">
+			Mute
+		</option>
+	</notify>
+	<notify name="ScriptQuestionCautionChatGranted" tip="false">
+		<message name="message">
+			&apos;[OBJECTNAME]&apos;, an object owned by &apos;[OWNERNAME]&apos;, located in [REGIONNAME] at [REGIONPOS], has been granted permission to: [PERMISSIONS].
+		</message>
+	</notify>
+	<notify name="ScriptQuestionCautionChatDenied" tip="false">
+		<message name="message">
+			&apos;[OBJECTNAME]&apos;, an object owned by &apos;[OWNERNAME]&apos;, located in [REGIONNAME] at [REGIONPOS], has been denied permission to: [PERMISSIONS].
+		</message>
+	</notify>
+	<notify name="ScriptQuestionCautionWarn" tip="false">
+		<message name="message">
+			An object wants permission to take Linden dollars (L$) from your account.
+		</message>
+	</notify>
+	<notify caution="true" name="ScriptQuestionCaution" tip="false">
+		<message name="message">
+			&apos;[OBJECTNAME]&apos;, an object owned by &apos;[NAME]&apos;, would like to:
+ 
+[QUESTIONS]
+If you do not trust this object and its creator, you should deny the request. For additional information, click the Details button.
+
+Grant this request?
+		</message>
+		<option name="Grant">
+			Grant
+		</option>
+		<option default="true" name="Deny">
+			Deny
+		</option>
+		<option name="Details">
+			Details...
+		</option>
+	</notify>
+	<notify name="ScriptDialog" tip="false">
+		<message name="message">
+			[FIRST] [LAST]&apos;s &apos;[TITLE]&apos;
+[MESSAGE]
+		</message>
+		<option name="Ignore">
+			Ignore
+		</option>
+	</notify>
+	<notify name="ScriptDialogGroup" tip="false">
+		<message name="message">
+			[GROUPNAME]&apos;s &apos;[TITLE]&apos;
+[MESSAGE]
+		</message>
+		<option name="Ignore">
+			Ignore
+		</option>
+	</notify>
+	<notify name="FirstBalanceIncrease" tip="false">
+		<message name="message">
+			You just received L$[AMOUNT].
+Objects and other users may give you L$.
+Your balance is shown in the
+upper-right corner of the screen.
+		</message>
+	</notify>
+	<notify name="FirstBalanceDecrease" tip="false">
+		<message name="message">
+			You just paid L$[AMOUNT].
+Your balance is shown in the upper-right 
+corner of the screen.
+		</message>
+	</notify>
+	<notify name="FirstSit" tip="false">
+		<message name="message">
+			You are sitting.
+Use the arrow keys (or AWSD) to change the view.
+Click the &apos;Stand Up&apos; button to get up.
+		</message>
+	</notify>
+	<notify name="FirstMap" tip="false">
+		<message name="message">
+			Click and drag to scroll the map.
+Double-click to teleport.
+Use the controls on the right to find things
+and display different backgrounds.
+		</message>
+	</notify>
+	<notify name="FirstBuild" tip="false">
+		<message name="message">
+			You can build new objects in some areas of [SECOND_LIFE].
+Use the tools in the upper left to build, and try 
+holding down Ctrl or Alt to rapidly switch tools.
+Press Esc to stop building.
+		</message>
+	</notify>
+	<notify name="FirstLeftClickNoHit" tip="false">
+		<message name="message">
+			Left-clicking interacts with special objects. 
+If the mouse pointer changes to a hand, 
+you can interact with the object.  
+Right-click always shows a menu of things you can do.
+		</message>
+	</notify>
+	<notify name="FirstTeleport" tip="false">
+		<message name="message">
+			This region doesn't allow point-to-point teleports, so you've been transported to the nearest telehub. 
+Your destination is marked with a tall beacon. 
+Follow the red arrow to the beacon, or click the arrow to dismiss the beacon.
+		</message>
+	</notify>
+	<notify name="FirstOverrideKeys" tip="false">
+		<message name="message">
+			Your movement keys are now being handled by an object.  
+Try the arrow keys or AWSD to see what they do.  
+Some objects (like guns) require you to go into mouselook  to use them. 
+Press &apos;M&apos; to do this.
+		</message>
+	</notify>
+	<notify name="FirstAppearance" tip="false">
+		<message name="message">
+			You are editing your appearance.  
+To rotate and zoom view, use the arrow keys. 
+When you are finished, press &apos;Save All&apos; 
+to save your look and exit.  
+You can edit your appearance as often as you like.
+		</message>
+	</notify>
+	<notify name="FirstInventory" tip="false">
+		<message name="message">
+			This is your inventory, which contains objects, notecards, clothing, and other things you own.
+* To wear an object or outfit folder, drag it onto yourself.
+* To bring an object into the world, drag it onto the ground.
+* To read a notecard, double-click it.
+		</message>
+	</notify>
+	<notify name="FirstSandbox" tip="false">
+		<message name="message">
+			This is a sandbox region.
+Objects you build here may be deleted after
+you leave the area, Sandboxes clean on a regular basis, please refer to the information at the top of the screen next to the region name.
+ 
+Sandbox regions are uncommon, and are marked with signs.
+		</message>
+	</notify>
+	<notify name="FirstFlexible" tip="false">
+		<message name="message">
+			This object is flexible. 
+Flexible objects may not be physical and must be phantom 
+until the flexible checkbox is unchecked.
+		</message>
+	</notify>
+	<notify name="FirstDebugMenus" tip="false">
+		<message name="message">
+			You have enabled the Advanced menu. 
+This menu contains features useful for developers debugging Second Life.
+To toggle this menu on Windows press Ctrl-Alt-D. On Mac press Cmd-Opt-Shift-D.
+		</message>
+	</notify>
+	<notify name="FirstSculptedPrim" tip="false">
+		<message name="message">
+			You are editing a sculpted prim.  
+Sculpted prims require a special texture to specify their shape.  
+You can find example sculpted textures in the inventory library.
+		</message>
+	</notify>
+	<notify name="FirstMedia" tip="false">
+		<message name="message">
+			You have begun playing media.  Media can set to play automatically in the preferences window under Audio / Video. Note that this can be a security risk for media sites you do not trust.
+		</message>
+	</notify>
+	<notify name="MaxListSelectMessage" tip="true">
+		<message name="message">
+			You may only select up to [MAX_SELECT] items
+from this list.
+		</message>
+	</notify>
+	<!--Database preferences panel -->
+	<notify name="AddSelfDatabase" tip="false">
+		<message name="message">
+			You cannot use yourself as the database avatar.
+		</message>
+	</notify>	
+	<notify name="VoiceInviteP2P" tip="false" unique="true">
+		<message name="message">
+			[NAME] is inviting you to a Voice Chat call. 
+Click Accept to join the call or Decline to decline the invitation. Click Mute to mute this caller.
+		</message>
+		<option name="Accept">
+			Accept
+		</option>
+		<option name="Decline">
+			Decline
+		</option>
+		<option name="Mute">
+			Mute
+		</option>
+	</notify>
+	<notify name="AutoUnmuteByIM" tip="false">
+		<message name="message">
+			[FIRST] [LAST] was sent an instant message and has been automatically unmuted.
+		</message>
+	</notify>
+	<notify name="AutoUnmuteByMoney" tip="false">
+		<message name="message">
+			[FIRST] [LAST] was given money and has been automatically unmuted.
+		</message>
+	</notify>
+	<notify name="AutoUnmuteByInventory" tip="false">
+		<message name="message">
+			[FIRST] [LAST] was offered inventory and has been automatically unmuted.
+		</message>
+	</notify>
+	<notify name="VoiceInviteGroup" tip="false" unique="true">
+		<message name="message">
+			[NAME] has joined a Voice Chat call with the group [GROUP]. 
+Click Accept to join the call or Decline to decline the invitation. Click Mute to mute this caller.
+		</message>
+		<option name="Accept">
+			Accept
+		</option>
+		<option name="Decline">
+			Decline
+		</option>
+		<option name="Mute">
+			Mute
+		</option>
+	</notify>
+	<notify name="VoiceInviteAdHoc" tip="false" unique="true">
+		<message name="message">
+			[NAME] has joined a Voice Chat call with a conference chat.. 
+Click Accept to join the call or Decline to decline the invitation. Click Mute to mute this user.
+		</message>
+		<option name="Accept">
+			Accept
+		</option>
+		<option name="Decline">
+			Decline
+		</option>
+		<option name="Mute">
+			Mute
+		</option>
+	</notify>
+	<notify name="InviteAdHoc" tip="false" unique="true">
+		<message name="message">
+			[NAME] is inviting you to a conference chat. 
+Click Accept to join the chat or Decline to decline the invitation. Click Mute to mute this user.
+		</message>
+		<option name="Accept">
+			Accept
+		</option>
+		<option name="Decline">
+			Decline
+		</option>
+		<option name="Mute">
+			Mute
+		</option>
+	</notify>
+	<notify name="VoiceChannelFull" tip="true" unique="true">
+		<message name="message">
+			The voice call you are trying to join, [VOICE_CHANNEL_NAME], has reached maximum capacity. Please try again later.
+		</message>
+	</notify>
+	<notify name="ProximalVoiceChannelFull" tip="true" unique="true">
+		<message name="message">
+			We&apos;re sorry.  This area has reached maximum capacity for voice conversations.  Please try to use voice in another area.
+		</message>
+	</notify>
+	<notify name="VoiceChannelDisconnected" tip="true" unique="true">
+		<message name="message">
+			You have been disconnected from [VOICE_CHANNEL_NAME].  You will now be reconnected to spatial voice chat.
+		</message>
+	</notify>
+	<notify name="VoiceChannelDisconnectedP2P" tip="true" unique="true">
+		<message name="message">
+			[VOICE_CHANNEL_NAME] has ended the call.  You will now be reconnected to spatial voice chat.
+		</message>
+	</notify>
+	<notify name="P2PCallDeclined" tip="true" unique="true">
+		<message name="message">
+			[VOICE_CHANNEL_NAME] has declined your call.  You will now be reconnected to spatial voice chat.
+		</message>
+	</notify>
+	<notify name="P2PCallNoAnswer" tip="true" unique="true">
+		<message name="message">
+			[VOICE_CHANNEL_NAME] is not available to take your call.  You will now be reconnected to spatial voice chat.
+		</message>
+	</notify>
+	<notify name="VoiceChannelJoinFailed" tip="true" unique="true">
+		<message name="message">
+			Failed to connect to [VOICE_CHANNEL_NAME], please try again later.  You will now be reconnected to spatial voice chat.
+		</message>
+	</notify>
+	<notify duration="10" name="VoiceLoginRetry" tip="true" unique="true">
+		<message name="message">
+			We are creating a voice channel for you. This may take up to one minute.
+		</message>
+	</notify>
+	<notify name="Cannot enter parcel: not a group member" tip="true">
+		<message name="message">
+			Cannot enter parcel, you are not a member of the appropriate group.
+		</message>
+	</notify>
+	<notify name="Cannot enter parcel: banned" tip="true">
+		<message name="message">
+			Cannot enter parcel, you have been banned.
+		</message>
+	</notify>
+	<notify name="Cannot enter parcel: not on access list" tip="true">
+		<message name="message">
+			Cannot enter parcel, you are not on the access list.
+		</message>
+	</notify>
+	<notify name="VoiceNotAllowed" tip="true" unique="true">
+		<message name="message">
+			You do not have permission to connect to voice chat for [VOICE_CHANNEL_NAME].
+		</message>
+	</notify>
+	<notify name="VoiceCallGenericError" tip="true" unique="true">
+		<message name="message">
+			An error has occurred while trying to connect to voice chat for [VOICE_CHANNEL_NAME].  Please try again later.
+		</message>
+	</notify>
+	<notify caution="true" duration="10" name="ServerVersionChanged" tip="true">
+		<message name="message">
+			The region you have entered is running a different simulator version. Click this message for details.
+		</message>
+	</notify>
+	<notify caution="true" name="UnableToOpenCommandURL" tip="true">
+		<message name="message">
+			The URL you clicked cannot be opened from this web browser.
+		</message>
+	</notify>
 </notifications>
 <!-- This file is no longer used. Please see notifications.xml and make your changes there. -->
\ No newline at end of file
diff --git a/indra/newview/skins/default/xui/en-us/panel_preferences_database.xml b/indra/newview/skins/default/xui/en-us/panel_preferences_database.xml
new file mode 100644
index 0000000..314b02d
--- /dev/null
+++ b/indra/newview/skins/default/xui/en-us/panel_preferences_database.xml
@@ -0,0 +1,166 @@
+<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
+<panel border="true" bottom="-409" enabled="true" follows="left|top|right|bottom"
+       height="408" hidden="false" label="Database" left="102" mouse_opaque="true"
+       name="avatar_db" width="517">
+	
+	<!-- Options section -->
+	<text type="string" length="1" bg_visible="false" border_drop_shadow_visible="false" border_visible="false"
+	      bottom="-30" drop_shadow_visible="true" enabled="true" follows="left|top"
+	      font="SansSerifSmall" h_pad="0" halign="left" height="10" hidden="false"
+	      left="12" mouse_opaque="false" name="text_box" v_pad="0" width="300">
+		Options:
+	</text>
+
+	<check_box bottom_delta="0" control_name="DBEnabled" enabled="true"
+		   follows="left|top" font="SansSerifSmall" height="16" hidden="false"
+		   initial_value="false" label="Database enabled" left="148"
+		   mouse_opaque="true" name="database_enabled_cb" radio_style="false"
+	     width="256" />
+	
+	<radio_group bottom_delta="-110" control_name="DBRetrievalMode" draw_border="true" enabled="true"
+		     follows="left|top" height="100" hidden="false" left="148"
+		     mouse_opaque="true" name="Database access type" width="321">
+		<radio_item type="string" length="1" bottom="-20" enabled="true" follows="left|top" height="16" hidden="false"
+			    left="3" mouse_opaque="true" name="UseAvatar" width="315">
+			Avatar:
+		</radio_item>
+		<radio_item type="string" length="1" bottom_delta="-10" enabled="false" follows="left|top" height="16" hidden="false"
+			    left="3" mouse_opaque="true" name="UseURL" width="315">
+			URL:
+		</radio_item>
+	</radio_group>
+	
+	<!-- HACK: apparently line_editor can't go inside a radio_group, so we make it appear
+	     inside while not actually being in there -->
+	<button bottom_delta="78" follows="right|bottom" font="SansSerif" halign="center"
+		height="20" label="Change Avatar" label_selected="Change Avatar" left="260"
+	     mouse_opaque="true" name="change_avatar_btn" width="100" />
+	
+	<line_editor bevel_style="in" border_style="line" border_thickness="1" bottom_delta="0"
+		     follows="left|top|right" font="SansSerifSmall" height="16" hidden="false"
+		     left="348" max_length="254" mouse_opaque="true" name="db_avatar"
+		     select_on_focus="false" width="130" control_name="DBAvatar" enabled="false"/>
+	
+	<line_editor bevel_style="in" border_style="line" border_thickness="1" bottom_delta="-20"
+		     follows="left|top|right" font="SansSerifSmall" height="16" hidden="false"
+		     left="248" max_length="254" mouse_opaque="true" name="db_url"
+		     select_on_focus="false" width="230" enabled="false" control_name="DBURL" />	
+
+	<text type="string" length="1" bg_visible="false" border_drop_shadow_visible="false" border_visible="false"
+	      bottom_delta="-20" drop_shadow_visible="true" enabled="true" follows="left|top"
+	      font="SansSerifSmall" h_pad="0" halign="left" height="10" hidden="false"
+	      left="170" mouse_opaque="false" name="text_box" v_pad="0" width="300">
+		Username:
+	</text>	
+
+	<line_editor bevel_style="in" border_style="line" border_thickness="1" bottom_delta="0"
+		     follows="left|top|right" font="SansSerifSmall" height="16" hidden="false"
+		     left="248" max_length="254" mouse_opaque="true" name="db_url_username"
+		     select_on_focus="false" width="230" enabled="false" control_name="DBURLUsername" />
+	
+	<text type="string" length="1" bg_visible="false" border_drop_shadow_visible="false" border_visible="false"
+	      bottom_delta="-20" drop_shadow_visible="true" enabled="true" follows="left|top"
+	      font="SansSerifSmall" h_pad="0" halign="left" height="10" hidden="false"
+	      left="170" mouse_opaque="false" name="text_box" v_pad="0" width="300">
+		Password:
+	</text>	
+
+	<line_editor bevel_style="in" border_style="line" border_thickness="1" bottom_delta="0"
+		     follows="left|top|right" font="SansSerifSmall" height="16" hidden="false"
+		     left="248" max_length="254" mouse_opaque="true" name="db_url_password"
+		     select_on_focus="false" width="230" enabled="false" control_name="DBURLPassword" />
+
+	
+	<!--Patterns section-->
+	<text type="string" length="1" bg_visible="false" border_drop_shadow_visible="false" border_visible="false"
+	      bottom_delta="-30" drop_shadow_visible="true" enabled="true" follows="left|top"
+	      font="SansSerifSmall" h_pad="0" halign="left" height="10" hidden="false"
+	      left="12" mouse_opaque="false" name="text_box" v_pad="0" width="300">
+		Patterns:
+	</text>
+	
+
+	<text type="string" length="1" bg_visible="false" border_drop_shadow_visible="false" border_visible="false"
+	      bottom_delta="-20" drop_shadow_visible="true" enabled="true" follows="left|top"
+	      font="SansSerifSmall" h_pad="0" halign="left" height="10" hidden="false"
+	      left="148" mouse_opaque="false" name="text_box2" v_pad="0" width="300">
+		Send:
+	</text>
+	
+	<line_editor bevel_style="in" border_style="line" border_thickness="1" bottom_delta="0"
+		     follows="left|top|right" font="SansSerifSmall" height="16" hidden="false"
+		     left="248" max_length="254" mouse_opaque="true" name="send_pattern"
+		     select_on_focus="false" width="230" control_name="DBSendPattern" >
+		$NAME
+	</line_editor>
+
+	<text type="string" length="1" bg_visible="false" border_drop_shadow_visible="false" border_visible="false"
+	      bottom_delta="-20" drop_shadow_visible="true" enabled="true" follows="left|top"
+	      font="SansSerifSmall" h_pad="0" halign="left" height="10" hidden="false"
+	      left="148" mouse_opaque="false" name="text_box2" v_pad="0" width="300">
+		Positive contains:
+	</text>
+	
+	<line_editor bevel_style="in" border_style="line" border_thickness="1" bottom_delta="0"
+		     follows="left|top|right" font="SansSerifSmall" height="16" hidden="false"
+		     left="248" max_length="254" mouse_opaque="true" name="positive_pattern"
+		     select_on_focus="false" width="230"  control_name="DBPositivePattern" />
+	
+	
+	<text type="string" length="1" bg_visible="false" border_drop_shadow_visible="false" border_visible="false"
+	      bottom_delta="-20" drop_shadow_visible="true" enabled="true" follows="left|top"
+	      font="SansSerifSmall" h_pad="0" halign="left" height="10" hidden="false"
+	      left="148" mouse_opaque="false" name="text_box2" v_pad="0" width="300">
+		Negative contains:
+	</text>
+	
+	<line_editor bevel_style="in" border_style="line" border_thickness="1" bottom_delta="0"
+		     follows="left|top|right" font="SansSerifSmall" height="16" hidden="false"
+		     left="248" max_length="254" mouse_opaque="true" name="negative_pattern"
+		     select_on_focus="false" width="230"  control_name="DBNegativePattern" />
+	
+	
+	<text type="string" length="1" bg_visible="false" border_drop_shadow_visible="false" border_visible="false"
+	      bottom_delta="-20" drop_shadow_visible="true" enabled="true" follows="left|top"
+	      font="SansSerifSmall" h_pad="0" halign="left" height="10" hidden="false"
+	      left="148" mouse_opaque="false" name="text_box2" v_pad="0" width="300">
+		Denied contains:
+	</text>
+	
+	<line_editor bevel_style="in" border_style="line" border_thickness="1" bottom_delta="0"
+		     follows="left|top|right" font="SansSerifSmall" height="16" hidden="false"
+		     left="248" max_length="254" mouse_opaque="true" name="denied_pattern"
+		     select_on_focus="false" width="230"  control_name="DBDeniedPattern" />
+	
+	<!--Timeouts section-->
+	<text type="string" length="1" bg_visible="false" border_drop_shadow_visible="false" border_visible="false"
+	      bottom_delta="-30" drop_shadow_visible="true" enabled="true" follows="left|top"
+	      font="SansSerifSmall" h_pad="0" halign="left" height="10" hidden="false"
+	      left="12" mouse_opaque="false" name="text_box" v_pad="0" width="300">
+		Timeouts:
+	</text>
+		
+	<spinner bottom_delta="-20" control_name="DBMaxConcurrentRequests" decimal_digits="0" enabled="true"
+		 follows="left|top" height="16" hidden="false" increment="1"
+		 initial_val="4" label="Max concurrent requests:" label_width="138" left="148"
+		 max_val="32" min_val="1" mouse_opaque="true" name="max_concurrent_requests"
+		 width="202" />
+
+	<spinner bottom_delta="-20" control_name="DBDelayBetweenRequests" decimal_digits="0" enabled="true"
+		 follows="left|top" height="16" hidden="false" increment="1"
+		 initial_val="1" label="Delay between requests:" label_width="138" left="148"
+		 max_val="32" min_val="0" mouse_opaque="true" name="delay_between_requests"
+		 width="202" />
+	
+	<spinner bottom_delta="-20" control_name="DBRequestTimeout" decimal_digits="0" enabled="true"
+		 follows="left|top" height="16" hidden="false" increment="4"
+		 initial_val="64" label="Request timeout:" label_width="138" left="148"
+		 max_val="65536" min_val="16" mouse_opaque="true" name="request_timeout"
+		 width="202" />
+	
+	<spinner bottom_delta="-20" control_name="DBGiveUpAfter" decimal_digits="0" enabled="true"
+		 follows="left|top" height="16" hidden="false" increment="64"
+		 initial_val="4096" label="Give up after:" label_width="138" left="148"
+		 max_val="65536" min_val="64" mouse_opaque="true" name="give_up_after"
+		 width="202" />
+</panel>
\ No newline at end of file
diff --git a/indra/newview/skins/default/xui/en-us/panel_toolbar.xml b/indra/newview/skins/default/xui/en-us/panel_toolbar.xml
index 9c57be0..b264e6e 100644
--- a/indra/newview/skins/default/xui/en-us/panel_toolbar.xml
+++ b/indra/newview/skins/default/xui/en-us/panel_toolbar.xml
@@ -18,6 +18,12 @@
 	       list_position="above"
 	       width="50" follows="left|right" user_resize="false"/>
     <icon image_name="spacer24.tga" width="2" height="2" follows="left|right" auto_resize="false" color="0,0,0,0"/>
+ 	<button bottom="0" font="SansSerif" height="24" label="Avatars" left="0"
+ 	     name="avatar_list_btn" tool_tip="List of nearby avatars" width="50" 
+         image_selected="toolbar_btn_selected.tga" 
+         image_unselected="toolbar_btn_enabled.tga" scale_image="true"
+		 follows="left|right" user_resize="false" />	
+    <icon image_name="spacer24.tga" width="2" height="2" follows="left|right" auto_resize="false" color="0,0,0,0"/>
     <button bottom="0" font="SansSerif" height="24" label="Fly"
         image_overlay="icn_toolbar_fly.tga" image_overlay_alignment="left"
                         image_selected="toolbar_btn_selected.tga"
@@ -68,3 +74,4 @@
   </layout_stack>
 
 </panel>
+
-- 
tg: (9ec3cda..) topic/features/jira-backported/avatar_list (depends on: master)
